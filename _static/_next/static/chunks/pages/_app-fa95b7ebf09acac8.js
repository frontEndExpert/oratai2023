(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4444:function(e,t,n){"use strict";n.d(t,{BH:function(){return I},DV:function(){return B},Dv:function(){return ee},GJ:function(){return W},L:function(){return d},LL:function(){return L},Pz:function(){return w},Sg:function(){return S},UG:function(){return T},UI:function(){return H},US:function(){return u},Wj:function(){return en},Wl:function(){return F},Yr:function(){return R},ZB:function(){return g},ZR:function(){return x},aH:function(){return b},b$:function(){return O},cI:function(){return j},dS:function(){return ei},eu:function(){return D},g5:function(){return s},gK:function(){return et},gQ:function(){return Y},h$:function(){return h},hl:function(){return N},hu:function(){return o},jU:function(){return k},lb:function(){return er},m9:function(){return es},ne:function(){return J},p$:function(){return p},pd:function(){return G},r3:function(){return z},ru:function(){return P},tV:function(){return f},uI:function(){return E},ug:function(){return eo},vZ:function(){return function e(t,n){if(t===n)return!0;let r=Object.keys(t),i=Object.keys(n);for(let o of r){if(!i.includes(o))return!1;let r=t[o],s=n[o];if(K(r)&&K(s)){if(!e(r,s))return!1}else if(r!==s)return!1}for(let e of i)if(!r.includes(e))return!1;return!0}},w1:function(){return A},w9:function(){return U},xO:function(){return $},xb:function(){return V},z$:function(){return C},zd:function(){return Q}});var r=n(3454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw s(t)},s=function(e){return Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},a=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):(64512&i)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){let o=e[n++],s=e[n++],a=e[n++],l=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&a)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(1023&l))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],o=t+1<e.length,s=o?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|s>>4,h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):l(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],o=t<e.length,s=o?n[e.charAt(t)]:0;++t;let a=t<e.length,l=a?n[e.charAt(t)]:64;++t;let u=t<e.length,h=u?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==l||null==h)throw new c;let d=i<<2|s>>4;if(r.push(d),64!==l){let e=s<<4&240|l>>2;if(r.push(e),64!==h){let e=l<<6&192|h;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class c extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let h=function(e){let t=a(e);return u.encodeByteArray(t,!0)},d=function(e){return h(e).replace(/\./g,"")},f=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e){return g(void 0,e)}function g(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=g(e[n],t[n]));return e}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,v=()=>{if(void 0===r||void 0===r.env)return;let e=r.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},y=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&f(e[1]);return t&&JSON.parse(t)},_=()=>{try{return m()||v()||y()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},b=()=>{var e;return null===(e=_())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=_())||void 0===t?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(C())}function T(){var e;let t=null===(e=_())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function k(){return"object"==typeof self&&self.self===self}function P(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function O(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function A(){let e=C();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function R(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function N(){try{return"object"==typeof indexedDB}catch(e){return!1}}function D(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?i.replace(M,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`}):"Error",s=`${this.serviceName}: ${o} (${r}).`,a=new x(r,s,n);return a}}let M=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){return JSON.parse(e)}function F(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q=function(e){let t={},n={},r={},i="";try{let o=e.split(".");t=j(f(o[0])||""),n=j(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},U=function(e){let t=q(e),n=t.claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")},W=function(e){let t=q(e).claims;return"object"==typeof t&&!0===t.admin};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function V(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function H(e,t,n){let r={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function K(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Q(e){let t={},n=e.replace(/^\?/,"").split("&");return n.forEach(e=>{if(e){let[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function G(e){let t=e.indexOf("?");if(!t)return"";let n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){let n,r;t||(t=0);let i=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)i[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)i[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){let t=i[e-3]^i[e-8]^i[e-14]^i[e-16];i[e]=(t<<1|t>>>31)&4294967295}let o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=l^s&(a^l),r=1518500249):(n=s^a^l,r=1859775393):e<60?(n=s&a|l&(s|a),r=2400959708):(n=s^a^l,r=3395469782);let t=(o<<5|o>>>27)+n+u+r+i[e]&4294967295;u=l,l=a,a=(s<<30|s>>>2)&4294967295,s=o,o=t}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);let n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}}function J(e,t){let n=new Z(e,t);return n.subscribe.bind(n)}class Z{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw Error("Missing Observer.");void 0===(r=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:n}:e).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ee=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){let t=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw Error(t)}};function et(e,t){return`${e} failed: ${t} argument `}function en(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw Error(et(e,t)+"must be a valid function.")}function er(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw Error(et(e,t)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){let t=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate.");let n=e.charCodeAt(r)-56320;i=65536+(t<<10)+n}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},eo=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}},9493:function(e,t,n){var r,i,o=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},a=Object.create,l=Object.defineProperty,u=Object.defineProperties,c=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,v=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y=function(e,t){for(var n in t||(t={}))g.call(t,n)&&v(e,n,t[n]);if(f)for(var r=0,i=f(t);r<i.length;r++)m.call(t,n=i[r])&&v(e,n,t[n]);return e},_=function(e,t){return u(e,h(t))},b=function(e){return l(e,"__esModule",{value:!0})},w=function(e,t){var n={};for(var r in e)g.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&f)for(var i=0,o=f(e);i<o.length;i++)0>t.indexOf(r=o[i])&&m.call(e,r)&&(n[r]=e[r]);return n},I=function(e){return function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r=function(r){g.call(e,r)||"default"===r||l(e,r,{get:function(){return t[r]},enumerable:!(n=c(t,r))||n.enumerable})},i=0,o=d(t);i<o.length;i++)r(o[i]);return e}(b(l(null!=e?a(p(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},S=function(e,t,n){return new Promise(function(r,i){var o=function(e){try{a(n.next(e))}catch(e){i(e)}},s=function(e){try{a(n.throw(e))}catch(e){i(e)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,s)};a((n=n.apply(e,t)).next())})};b(t),function(e,t){for(var n in t)l(e,n,{get:t[n],enumerable:!0})}(t,{QueryStatus:function(){return r},buildCreateApi:function(){return ew},copyWithStructuralSharing:function(){return T},coreModule:function(){return eU},createApi:function(){return eW},defaultSerializeQueryArgs:function(){return ey},fakeBaseQuery:function(){return eI},fetchBaseQuery:function(){return N},retry:function(){return M},setupListeners:function(){return B},skipSelector:function(){return ed},skipToken:function(){return eh}}),(i=r||(r={})).uninitialized="uninitialized",i.pending="pending",i.fulfilled="fulfilled",i.rejected="rejected";var C=function(e){return[].concat.apply([],e)},E=I(n(7236)).isPlainObject;function T(e,t){if(e===t||!(E(e)&&E(t)||Array.isArray(e)&&Array.isArray(t)))return t;for(var n=Object.keys(t),r=Object.keys(e),i=n.length===r.length,o=Array.isArray(t)?[]:{},s=0;s<n.length;s++){var a=n[s];o[a]=T(e[a],t[a]),i&&(i=e[a]===o[a])}return i?e:o}var k=I(n(7236)),P=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fetch.apply(void 0,e)},O=function(e){return e.status>=200&&e.status<=299},A=function(e){return/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"")};function R(e){if(!(0,k.isPlainObject)(e))return e;for(var t=y({},e),n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];void 0===i[1]&&delete t[i[0]]}return t}function N(e){var t=this;void 0===e&&(e={});var n=e.baseUrl,r=e.prepareHeaders,i=void 0===r?function(e){return e}:r,s=e.fetchFn,a=void 0===s?P:s,l=e.paramsSerializer,u=e.isJsonContentType,c=void 0===u?A:u,h=e.jsonContentType,d=void 0===h?"application/json":h,f=e.jsonReplacer,p=e.timeout,g=e.responseHandler,m=e.validateStatus,v=w(e,["baseUrl","prepareHeaders","fetchFn","paramsSerializer","isJsonContentType","jsonContentType","jsonReplacer","timeout","responseHandler","validateStatus"]);return"undefined"==typeof fetch&&a===P&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),function(e,r){return S(t,null,function(){var t,s,u,h,b,I,C,E,T,P,A,N,D,x,L,M,j,F,q,U,W,z,B,V,H,K,$,Q,G,Y,J,Z,X;return o(this,function(ee){switch(ee.label){case 0:return t=r.signal,s=r.getState,u=r.extra,h=r.endpoint,b=r.forced,I=r.type,T=(E="string"==typeof e?{url:e}:e).url,A=void 0===(P=E.headers)?new Headers(v.headers):P,D=void 0===(N=E.params)?void 0:N,L=void 0===(x=E.responseHandler)?null!=g?g:"json":x,j=void 0===(M=E.validateStatus)?null!=m?m:O:M,q=void 0===(F=E.timeout)?p:F,U=w(E,["url","headers","params","responseHandler","validateStatus","timeout"]),W=y(_(y({},v),{signal:t}),U),A=new Headers(R(A)),z=W,[4,i(A,{getState:s,extra:u,endpoint:h,forced:b,type:I})];case 1:z.headers=ee.sent()||A,B=function(e){return"object"==typeof e&&((0,k.isPlainObject)(e)||Array.isArray(e)||"function"==typeof e.toJSON)},!W.headers.has("content-type")&&B(W.body)&&W.headers.set("content-type",d),B(W.body)&&c(W.headers)&&(W.body=JSON.stringify(W.body,f)),D&&(V=~T.indexOf("?")?"&":"?",T+=V+(l?l(D):new URLSearchParams(R(D)))),T=function(e,t){if(!e)return t;if(!t)return e;if(RegExp("(^|:)//").test(t))return t;var n=e.endsWith("/")||!t.startsWith("?")?"/":"";return""+(e=e.replace(/\/$/,""))+n+t.replace(/^\//,"")}(n,T),C={request:(H=new Request(T,W)).clone()},$=!1,Q=q&&setTimeout(function(){$=!0,r.abort()},q),ee.label=2;case 2:return ee.trys.push([2,4,5,6]),[4,a(H)];case 3:return K=ee.sent(),[3,6];case 4:return[2,{error:{status:$?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(ee.sent())},meta:C}];case 5:return Q&&clearTimeout(Q),[7];case 6:G=K.clone(),C.response=G,J="",ee.label=7;case 7:return ee.trys.push([7,9,,10]),[4,Promise.all([(function(e,t){return S(this,null,function(){var n;return o(this,function(r){switch(r.label){case 0:return"function"==typeof t?[2,t(e)]:("content-type"===t&&(t=c(e.headers)?"json":"text"),"json"!==t?[3,2]:[4,e.text()]);case 1:return[2,(n=r.sent()).length?JSON.parse(n):null];case 2:return[2,e.text()]}})})})(K,L).then(function(e){return Y=e},function(e){return Z=e}),G.text().then(function(e){return J=e},function(){})])];case 8:if(ee.sent(),Z)throw Z;return[3,10];case 9:return X=ee.sent(),[2,{error:{status:"PARSING_ERROR",originalStatus:K.status,data:J,error:String(X)},meta:C}];case 10:return[2,j(K,Y)?{data:Y,meta:C}:{error:{status:K.status,data:Y},meta:C}]}})})}}var D=function(e,t){void 0===t&&(t=void 0),this.value=e,this.meta=t};function x(e,t){return void 0===e&&(e=0),void 0===t&&(t=5),S(this,null,function(){var n;return o(this,function(r){switch(r.label){case 0:return n=~~((Math.random()+.4)*(300<<Math.min(e,t))),[4,new Promise(function(e){return setTimeout(function(t){return e(t)},n)})];case 1:return r.sent(),[2]}})})}var L={},M=Object.assign(function(e,t){return function(n,r,i){return S(void 0,null,function(){var s,a,l,u,c,h;return o(this,function(o){switch(o.label){case 0:s=[5,(t||L).maxRetries,(i||L).maxRetries].filter(function(e){return void 0!==e}).slice(-1)[0],a=function(e,t,n){return n.attempt<=s},l=y(y({maxRetries:s,backoff:x,retryCondition:a},t),i),u=0,o.label=1;case 1:o.label=2;case 2:return o.trys.push([2,4,,6]),[4,e(n,r,i)];case 3:if((c=o.sent()).error)throw new D(c);return[2,c];case 4:if(h=o.sent(),u++,h.throwImmediately){if(h instanceof D)return[2,h.value];throw h}return h instanceof D&&!l.retryCondition(h.value.error,n,{attempt:u,baseQueryApi:r,extraOptions:i})?[2,h.value]:[4,l.backoff(u,l.maxRetries)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return[2]}})})}},{fail:function(e){throw Object.assign(new D({error:e}),{throwImmediately:!0})}}),j=I(n(7236)),F=(0,j.createAction)("__rtkq/focused"),q=(0,j.createAction)("__rtkq/unfocused"),U=(0,j.createAction)("__rtkq/online"),W=(0,j.createAction)("__rtkq/offline"),z=!1;function B(e,t){var n,r,i,o;return t?t(e,{onFocus:F,onFocusLost:q,onOffline:W,onOnline:U}):(n=function(){return e(F())},r=function(){return e(U())},i=function(){return e(W())},o=function(){"visible"===window.document.visibilityState?n():e(q())},z||"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",n,!1),window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),z=!0),function(){window.removeEventListener("focus",n),window.removeEventListener("visibilitychange",o),window.removeEventListener("online",r),window.removeEventListener("offline",i),z=!1})}var V,H,K=I(n(7236));function $(e){return e.type===V.query}function Q(e,t,n,r,i,o){return"function"==typeof e?e(t,n,r,i).map(G).map(o):Array.isArray(e)?e.map(G).map(o):[]}function G(e){return"string"==typeof e?{type:e}:e}(H=V||(V={})).query="query",H.mutation="mutation";var Y=I(n(7236));function J(e){return null!=e}var Z=Symbol("forceQueryFn"),X=function(e){return"function"==typeof e[Z]},ee=I(n(7236)),et=I(n(6312)),en=I(n(7236));function er(e){return e}function ei(e,t,n,r){return Q(n[e.meta.arg.endpointName][t],(0,ee.isFulfilled)(e)?e.payload:void 0,(0,ee.isRejectedWithValue)(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}var eo=I(n(6312)),es=I(n(6312));function ea(e,t,n){var r=e[t];r&&n(r)}function el(e){var t;return null!=(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)?t:e.requestId}function eu(e,t,n){var r=e[el(t)];r&&n(r)}var ec={},eh=Symbol.for("RTKQ/skipToken"),ed=eh,ef={status:r.uninitialized},ep=(0,K.createNextState)(ef,function(){}),eg=(0,K.createNextState)(ef,function(){}),em=I(n(7236)),ev=WeakMap?new WeakMap:void 0,ey=function(e){var t=e.endpointName,n=e.queryArgs,r="",i=null==ev?void 0:ev.get(n);if("string"==typeof i)r=i;else{var o=JSON.stringify(n,function(e,t){return(0,em.isPlainObject)(t)?Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{}):t});(0,em.isPlainObject)(n)&&(null==ev||ev.set(n,o)),r=o}return t+"("+r+")"},e_=I(n(7236)),eb=I(n(8697));function ew(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=(0,eb.defaultMemoize)(function(e){var n,r;return null==(r=t.extractRehydrationInfo)?void 0:r.call(t,e,{reducerPath:null!=(n=t.reducerPath)?n:"api"})}),r=_(y({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},t),{extractRehydrationInfo:n,serializeQueryArgs:function(e){var n=ey;if("serializeQueryArgs"in e.endpointDefinition){var r=e.endpointDefinition.serializeQueryArgs;n=function(e){var t=r(e);return"string"==typeof t?t:ey(_(y({},e),{queryArgs:t}))}}else t.serializeQueryArgs&&(n=t.serializeQueryArgs);return n(e)},tagTypes:s([],t.tagTypes||[])}),i={endpointDefinitions:{},batch:function(e){e()},apiUid:(0,e_.nanoid)(),extractRehydrationInfo:n,hasRehydrationInfo:(0,eb.defaultMemoize)(function(e){return null!=n(e)})},o={injectEndpoints:function(e){for(var t=e.endpoints({query:function(e){return _(y({},e),{type:V.query})},mutation:function(e){return _(y({},e),{type:V.mutation})}}),n=0,r=Object.entries(t);n<r.length;n++){var s=r[n],l=s[0],u=s[1];if(e.overrideExisting||!(l in i.endpointDefinitions)){i.endpointDefinitions[l]=u;for(var c=0;c<a.length;c++)a[c].injectEndpoint(l,u)}}return o},enhanceEndpoints:function(e){var t=e.addTagTypes,n=e.endpoints;if(t)for(var s=0;s<t.length;s++){var a=t[s];r.tagTypes.includes(a)||r.tagTypes.push(a)}if(n)for(var l=0,u=Object.entries(n);l<u.length;l++){var c=u[l],h=c[0],d=c[1];"function"==typeof d?d(i.endpointDefinitions[h]):Object.assign(i.endpointDefinitions[h]||{},d)}return o}},a=e.map(function(e){return e.init(o,r,i)});return o.injectEndpoints({endpoints:t.endpoints})}}function eI(){return function(){throw Error("When using `fakeBaseQuery`, all queries & mutations must use the `queryFn` definition syntax.")}}var eS,eC=I(n(7236)),eE=function(e){var t=e.reducerPath,n=e.api,r=e.context,i=e.internalState,o=n.internalActions,s=o.removeQueryResult,a=o.unsubscribeQueryResult;function l(e){var t=i.currentSubscriptions[e];return!!t&&!function(e){for(var t in e)return!1;return!0}(t)}var u={};function c(e,t,n,i){var o,a=r.endpointDefinitions[t],c=null!=(o=null==a?void 0:a.keepUnusedDataFor)?o:i.keepUnusedDataFor;if(1/0!==c&&!l(e)){var h=u[e];h&&clearTimeout(h),u[e]=setTimeout(function(){l(e)||n.dispatch(s({queryCacheKey:e})),delete u[e]},1e3*Math.max(0,Math.min(c,2147482.647)))}}return function(e,i,o){var s;if(a.match(e)){var l=i.getState()[t];c(_=e.payload.queryCacheKey,null==(s=l.queries[_])?void 0:s.endpointName,i,l.config)}if(n.util.resetApiState.match(e))for(var h=0,d=Object.entries(u);h<d.length;h++){var f=d[h],p=f[0],g=f[1];g&&clearTimeout(g),delete u[p]}if(r.hasRehydrationInfo(e)){l=i.getState()[t];for(var m=r.extractRehydrationInfo(e).queries,v=0,y=Object.entries(m);v<y.length;v++){var _,b=y[v],w=b[1];c(_=b[0],null==w?void 0:w.endpointName,i,l.config)}}}},eT=I(n(7236)),ek=function(e){var t=e.reducerPath,n=e.context,i=e.context.endpointDefinitions,o=e.mutationThunk,s=e.api,a=e.assertTagType,l=e.refetchQuery,u=s.internalActions.removeQueryResult,c=(0,eT.isAnyOf)((0,eT.isFulfilled)(o),(0,eT.isRejectedWithValue)(o));function h(e,i){var o=i.getState(),a=o[t],c=s.util.selectInvalidatedBy(o,e);n.batch(function(){for(var e,t=0,n=Array.from(c.values());t<n.length;t++){var o=n[t].queryCacheKey,s=a.queries[o],h=null!=(e=a.subscriptions[o])?e:{};s&&(0===Object.keys(h).length?i.dispatch(u({queryCacheKey:o})):s.status!==r.uninitialized&&i.dispatch(l(s,o)))}})}return function(e,t){c(e)&&h(ei(e,"invalidatesTags",i,a),t),s.util.invalidateTags.match(e)&&h(Q(e.payload,void 0,void 0,void 0,void 0,a),t)}},eP=function(e){var t=e.reducerPath,n=e.queryThunk,i=e.api,o=e.refetchQuery,s=e.internalState,a={};function l(e,n){var i=e.queryCacheKey,l=n.getState()[t].queries[i];if(l&&l.status!==r.uninitialized){var u=h(s.currentSubscriptions[i]);if(Number.isFinite(u)){var c=a[i];(null==c?void 0:c.timeout)&&(clearTimeout(c.timeout),c.timeout=void 0);var d=Date.now()+u,f=a[i]={nextPollTimestamp:d,pollingInterval:u,timeout:setTimeout(function(){f.timeout=void 0,n.dispatch(o(l,i))},u)}}}}function u(e,n){var i=e.queryCacheKey,o=n.getState()[t].queries[i];if(o&&o.status!==r.uninitialized){var u=h(s.currentSubscriptions[i]);if(Number.isFinite(u)){var d=a[i],f=Date.now()+u;(!d||f<d.nextPollTimestamp)&&l({queryCacheKey:i},n)}else c(i)}}function c(e){var t=a[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete a[e]}function h(e){void 0===e&&(e={});var t=Number.POSITIVE_INFINITY;for(var n in e)e[n].pollingInterval&&(t=Math.min(e[n].pollingInterval,t));return t}return function(e,t){(i.internalActions.updateSubscriptionOptions.match(e)||i.internalActions.unsubscribeQueryResult.match(e))&&u(e.payload,t),(n.pending.match(e)||n.rejected.match(e)&&e.meta.condition)&&u(e.meta.arg,t),(n.fulfilled.match(e)||n.rejected.match(e)&&!e.meta.condition)&&l(e.meta.arg,t),i.util.resetApiState.match(e)&&function(){for(var e=0,t=Object.keys(a);e<t.length;e++)c(t[e])}()}},eO=I(n(7236)),eA=Error("Promise never resolved before cacheEntryRemoved."),eR=function(e){var t=e.api,n=e.reducerPath,r=e.context,i=e.queryThunk,o=e.mutationThunk,s=(0,eO.isAsyncThunkAction)(i),a=(0,eO.isAsyncThunkAction)(o),l=(0,eO.isFulfilled)(i,o),u={};function c(e,n,i,o,s){var a=r.endpointDefinitions[e],l=null==a?void 0:a.onCacheEntryAdded;if(l){var c={},h=new Promise(function(e){c.cacheEntryRemoved=e}),d=Promise.race([new Promise(function(e){c.valueResolved=e}),h.then(function(){throw eA})]);d.catch(function(){}),u[i]=c;var f=t.endpoints[e].select(a.type===V.query?n:i),p=o.dispatch(function(e,t,n){return n}),g=_(y({},o),{getCacheEntry:function(){return f(o.getState())},requestId:s,extra:p,updateCachedData:a.type===V.query?function(r){return o.dispatch(t.util.updateQueryData(e,n,r))}:void 0,cacheDataLoaded:d,cacheEntryRemoved:h});Promise.resolve(l(n,g)).catch(function(e){if(e!==eA)throw e})}}return function(e,r,h){var d=s(e)?e.meta.arg.queryCacheKey:a(e)?e.meta.requestId:t.internalActions.removeQueryResult.match(e)?e.payload.queryCacheKey:t.internalActions.removeMutationResult.match(e)?el(e.payload):"";if(i.pending.match(e)){var f=h[n].queries[d],p=r.getState()[n].queries[d];!f&&p&&c(e.meta.arg.endpointName,e.meta.arg.originalArgs,d,r,e.meta.requestId)}else if(o.pending.match(e))(p=r.getState()[n].mutations[d])&&c(e.meta.arg.endpointName,e.meta.arg.originalArgs,d,r,e.meta.requestId);else if(l(e))(null==(y=u[d])?void 0:y.valueResolved)&&(y.valueResolved({data:e.payload,meta:e.meta.baseQueryMeta}),delete y.valueResolved);else if(t.internalActions.removeQueryResult.match(e)||t.internalActions.removeMutationResult.match(e))(y=u[d])&&(delete u[d],y.cacheEntryRemoved());else if(t.util.resetApiState.match(e))for(var g=0,m=Object.entries(u);g<m.length;g++){var v=m[g],y=v[1];delete u[v[0]],y.cacheEntryRemoved()}}},eN=I(n(7236)),eD=function(e){var t=e.api,n=e.context,r=e.queryThunk,i=e.mutationThunk,o=(0,eN.isPending)(r,i),s=(0,eN.isRejected)(r,i),a=(0,eN.isFulfilled)(r,i),l={};return function(e,r){var i,u,c;if(o(e)){var h=e.meta,d=h.requestId,f=h.arg,p=f.endpointName,g=f.originalArgs,m=n.endpointDefinitions[p],v=null==m?void 0:m.onQueryStarted;if(v){var b={},w=new Promise(function(e,t){b.resolve=e,b.reject=t});w.catch(function(){}),l[d]=b;var I=t.endpoints[p].select(m.type===V.query?g:d),S=r.dispatch(function(e,t,n){return n}),C=_(y({},r),{getCacheEntry:function(){return I(r.getState())},requestId:d,extra:S,updateCachedData:m.type===V.query?function(e){return r.dispatch(t.util.updateQueryData(p,g,e))}:void 0,queryFulfilled:w});v(g,C)}}else if(a(e)){var E=e.meta,T=E.baseQueryMeta;null==(i=l[d=E.requestId])||i.resolve({data:e.payload,meta:T}),delete l[d]}else if(s(e)){var k=e.meta;T=k.baseQueryMeta,null==(c=l[d=k.requestId])||c.reject({error:null!=(u=e.payload)?u:e.error,isUnhandledError:!k.rejectedWithValue,meta:T}),delete l[d]}}},ex=function(e){var t=e.api,n=e.context.apiUid;return function(e,r){t.util.resetApiState.match(e)&&r.dispatch(t.internalActions.middlewareRegistered(n))}},eL=I(n(6312)),eM="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis):function(e){return(eS||(eS=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})};function ej(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Object.assign.apply(Object,s([e],t))}var eF=I(n(6312)),eq=Symbol(),eU=function(){return{name:eq,init:function(e,t,n){var i,a,l,u,c,h,d,f,p,g,m,v,b,w,I,E,k,P,O,A,R,N,x,L,M,j,z,B,H,Q,ed,ef=t.baseQuery,em=t.reducerPath,ev=t.serializeQueryArgs,ey=t.keepUnusedDataFor,e_=t.refetchOnMountOrArgChange,eb=t.refetchOnFocus,ew=t.refetchOnReconnect;(0,eF.enablePatches)();var eI=function(e){return e};Object.assign(e,{reducerPath:em,endpoints:{},internalActions:{onOnline:U,onOffline:W,onFocus:F,onFocusLost:q},util:{}});var eS=function(e){var t=this,n=e.reducerPath,i=e.baseQuery,s=e.context.endpointDefinitions,a=e.serializeQueryArgs,l=e.api,u=function(e,n){return S(t,[e,n],function(e,t){var n,r,a,l,u,h,d,f,p,g,m,v=t.signal,y=t.abort,_=t.rejectWithValue,b=t.fulfillWithValue,w=t.dispatch,I=t.getState,S=t.extra;return o(this,function(t){switch(t.label){case 0:n=s[e.endpointName],t.label=1;case 1:return t.trys.push([1,8,,13]),r=er,a=void 0,l={signal:v,abort:y,dispatch:w,getState:I,extra:S,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?c(e,I()):void 0},(u="query"===e.type?e[Z]:void 0)?(a=u(),[3,6]):[3,2];case 2:return n.query?[4,i(n.query(e.originalArgs),l,n.extraOptions)]:[3,4];case 3:return a=t.sent(),n.transformResponse&&(r=n.transformResponse),[3,6];case 4:return[4,n.queryFn(e.originalArgs,l,n.extraOptions,function(e){return i(e,l,n.extraOptions)})];case 5:a=t.sent(),t.label=6;case 6:if(a.error)throw new D(a.error,a.meta);return h=b,[4,r(a.data,a.meta,e.originalArgs)];case 7:return[2,h.apply(void 0,[t.sent(),((g={fulfilledTimeStamp:Date.now(),baseQueryMeta:a.meta})[en.SHOULD_AUTOBATCH]=!0,g)])];case 8:if(!((d=t.sent())instanceof D))return[3,12];f=er,n.query&&n.transformErrorResponse&&(f=n.transformErrorResponse),t.label=9;case 9:return t.trys.push([9,11,,12]),p=_,[4,f(d.value,d.meta,e.originalArgs)];case 10:return[2,p.apply(void 0,[t.sent(),((m={baseQueryMeta:d.meta})[en.SHOULD_AUTOBATCH]=!0,m)])];case 11:return d=t.sent(),[3,12];case 12:throw console.error(d),d;case 13:return[2]}})})};function c(e,t){var r,i,o,s,a=null==(i=null==(r=t[n])?void 0:r.queries)?void 0:i[e.queryCacheKey],l=null==(o=t[n])?void 0:o.config.refetchOnMountOrArgChange,u=null==a?void 0:a.fulfilledTimeStamp,c=null!=(s=e.forceRefetch)?s:e.subscribe&&l;return!!c&&(!0===c||(Number(new Date)-Number(u))/1e3>=c)}function h(e){return function(t){var n,r;return(null==(r=null==(n=null==t?void 0:t.meta)?void 0:n.arg)?void 0:r.endpointName)===e}}return{queryThunk:(0,en.createAsyncThunk)(n+"/executeQuery",u,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[en.SHOULD_AUTOBATCH]=!0,e},condition:function(e,t){var r,i,o,a=(0,t.getState)(),l=null==(i=null==(r=a[n])?void 0:r.queries)?void 0:i[e.queryCacheKey],u=null==l?void 0:l.fulfilledTimeStamp,h=e.originalArgs,d=null==l?void 0:l.originalArgs,f=s[e.endpointName];return!(!X(e)&&("pending"===(null==l?void 0:l.status)||!c(e,a)&&(!$(f)||!(null==(o=null==f?void 0:f.forceRefetch)?void 0:o.call(f,{currentArg:h,previousArg:d,endpointState:l,state:a})))&&u))},dispatchConditionRejection:!0}),mutationThunk:(0,en.createAsyncThunk)(n+"/executeMutation",u,{getPendingMeta:function(){var e;return(e={startedTimeStamp:Date.now()})[en.SHOULD_AUTOBATCH]=!0,e}}),prefetch:function(e,t,n){return function(r,i){var o="force"in n&&n.force,s="ifOlderThan"in n&&n.ifOlderThan,a=function(n){return void 0===n&&(n=!0),l.endpoints[e].initiate(t,{forceRefetch:n})},u=l.endpoints[e].select(t)(i());if(o)r(a());else if(s){var c=null==u?void 0:u.fulfilledTimeStamp;if(!c)return void r(a());(Number(new Date)-Number(new Date(c)))/1e3>=s&&r(a())}else r(a(!1))}},updateQueryData:function(e,t,n){return function(i,o){var s,a,u=l.endpoints[e].select(t)(o()),c={patches:[],inversePatches:[],undo:function(){return i(l.util.patchQueryData(e,t,c.inversePatches))}};if(u.status===r.uninitialized)return c;if("data"in u){if((0,et.isDraftable)(u.data)){var h=(0,et.produceWithPatches)(u.data,n),d=h[2];(s=c.patches).push.apply(s,h[1]),(a=c.inversePatches).push.apply(a,d)}else{var f=n(u.data);c.patches.push({op:"replace",path:[],value:f}),c.inversePatches.push({op:"replace",path:[],value:u.data})}}return i(l.util.patchQueryData(e,t,c.patches)),c}},upsertQueryData:function(e,t,n){return function(r){var i;return r(l.endpoints[e].initiate(t,((i={subscribe:!1,forceRefetch:!0})[Z]=function(){return{data:n}},i)))}},patchQueryData:function(e,t,n){return function(r){r(l.internalActions.queryResultPatched({queryCacheKey:a({queryArgs:t,endpointDefinition:s[e],endpointName:e}),patches:n}))}},buildMatchThunkActions:function(e,t){return{matchPending:(0,ee.isAllOf)((0,ee.isPending)(e),h(t)),matchFulfilled:(0,ee.isAllOf)((0,ee.isFulfilled)(e),h(t)),matchRejected:(0,ee.isAllOf)((0,ee.isRejected)(e),h(t))}}}}({baseQuery:ef,reducerPath:em,context:n,api:e,serializeQueryArgs:ev}),eT=eS.queryThunk,eO=eS.mutationThunk,eA=eS.patchQueryData,eN=eS.updateQueryData,eU=eS.upsertQueryData,eW=eS.prefetch,ez=eS.buildMatchThunkActions,eB=(a=(i={context:n,queryThunk:eT,mutationThunk:eO,reducerPath:em,assertTagType:eI,config:{refetchOnFocus:eb,refetchOnReconnect:ew,refetchOnMountOrArgChange:e_,keepUnusedDataFor:ey,reducerPath:em}}).reducerPath,l=i.queryThunk,u=i.mutationThunk,h=(c=i.context).endpointDefinitions,d=c.apiUid,f=c.extractRehydrationInfo,p=c.hasRehydrationInfo,g=i.assertTagType,m=i.config,v=(0,Y.createAction)(a+"/resetApiState"),b=(0,Y.createSlice)({name:a+"/queries",initialState:ec,reducers:{removeQueryResult:{reducer:function(e,t){delete e[t.payload.queryCacheKey]},prepare:(0,Y.prepareAutoBatched)()},queryResultPatched:function(e,t){var n=t.payload,r=n.patches;ea(e,n.queryCacheKey,function(e){e.data=(0,es.applyPatches)(e.data,r.concat())})}},extraReducers:function(e){e.addCase(l.pending,function(e,t){var n,i=t.meta,o=t.meta.arg,s=X(o);(o.subscribe||s)&&(null!=e[n=o.queryCacheKey]||(e[n]={status:r.uninitialized,endpointName:o.endpointName})),ea(e,o.queryCacheKey,function(e){e.status=r.pending,e.requestId=s&&e.requestId?e.requestId:i.requestId,void 0!==o.originalArgs&&(e.originalArgs=o.originalArgs),e.startedTimeStamp=i.startedTimeStamp})}).addCase(l.fulfilled,function(e,t){var n=t.meta,i=t.payload;ea(e,n.arg.queryCacheKey,function(e){var t;if(e.requestId===n.requestId||X(n.arg)){var o=h[n.arg.endpointName].merge;if(e.status=r.fulfilled,o){if(void 0!==e.data){var s=n.fulfilledTimeStamp,a=n.arg,l=n.baseQueryMeta,u=n.requestId,c=(0,Y.createNextState)(e.data,function(e){return o(e,i,{arg:a.originalArgs,baseQueryMeta:l,fulfilledTimeStamp:s,requestId:u})});e.data=c}else e.data=i}else e.data=null==(t=h[n.arg.endpointName].structuralSharing)||t?T((0,eo.isDraft)(e.data)?(0,es.original)(e.data):e.data,i):i;delete e.error,e.fulfilledTimeStamp=n.fulfilledTimeStamp}})}).addCase(l.rejected,function(e,t){var n=t.meta,i=n.condition,o=n.requestId,s=t.error,a=t.payload;ea(e,n.arg.queryCacheKey,function(e){if(i);else{if(e.requestId!==o)return;e.status=r.rejected,e.error=null!=a?a:s}})}).addMatcher(p,function(e,t){for(var n=f(t).queries,i=0,o=Object.entries(n);i<o.length;i++){var s=o[i],a=s[1];(null==a?void 0:a.status)!==r.fulfilled&&(null==a?void 0:a.status)!==r.rejected||(e[s[0]]=a)}})}}),w=(0,Y.createSlice)({name:a+"/mutations",initialState:ec,reducers:{removeMutationResult:{reducer:function(e,t){var n=el(t.payload);n in e&&delete e[n]},prepare:(0,Y.prepareAutoBatched)()}},extraReducers:function(e){e.addCase(u.pending,function(e,t){var n=t.meta,i=n.requestId,o=n.arg,s=n.startedTimeStamp;o.track&&(e[el(t.meta)]={requestId:i,status:r.pending,endpointName:o.endpointName,startedTimeStamp:s})}).addCase(u.fulfilled,function(e,t){var n=t.payload,i=t.meta;i.arg.track&&eu(e,i,function(e){e.requestId===i.requestId&&(e.status=r.fulfilled,e.data=n,e.fulfilledTimeStamp=i.fulfilledTimeStamp)})}).addCase(u.rejected,function(e,t){var n=t.payload,i=t.error,o=t.meta;o.arg.track&&eu(e,o,function(e){e.requestId===o.requestId&&(e.status=r.rejected,e.error=null!=n?n:i)})}).addMatcher(p,function(e,t){for(var n=f(t).mutations,i=0,o=Object.entries(n);i<o.length;i++){var s=o[i],a=s[0],l=s[1];(null==l?void 0:l.status)!==r.fulfilled&&(null==l?void 0:l.status)!==r.rejected||a===(null==l?void 0:l.requestId)||(e[a]=l)}})}}),I=(0,Y.createSlice)({name:a+"/invalidation",initialState:ec,reducers:{},extraReducers:function(e){e.addCase(b.actions.removeQueryResult,function(e,t){for(var n=t.payload.queryCacheKey,r=0,i=Object.values(e);r<i.length;r++)for(var o=0,s=Object.values(i[r]);o<s.length;o++){var a=s[o],l=a.indexOf(n);-1!==l&&a.splice(l,1)}}).addMatcher(p,function(e,t){for(var n,r,i,o,s=f(t).provided,a=0,l=Object.entries(s);a<l.length;a++)for(var u=l[a],c=u[0],h=0,d=Object.entries(u[1]);h<d.length;h++)for(var p=d[h],g=p[0],m=p[1],v=null!=(o=(r=null!=(n=e[c])?n:e[c]={})[i=g||"__internal_without_id"])?o:r[i]=[],y=0;y<m.length;y++){var _=m[y];v.includes(_)||v.push(_)}}).addMatcher((0,Y.isAnyOf)((0,Y.isFulfilled)(l),(0,Y.isRejectedWithValue)(l)),function(e,t){for(var n,r,i,o,s=ei(t,"providesTags",h,g),a=t.meta.arg.queryCacheKey,l=0,u=Object.values(e);l<u.length;l++)for(var c=0,d=Object.values(u[l]);c<d.length;c++){var f=d[c],p=f.indexOf(a);-1!==p&&f.splice(p,1)}for(var m=0;m<s.length;m++){var v=s[m],y=v.type,_=v.id,b=null!=(o=(r=null!=(n=e[y])?n:e[y]={})[i=_||"__internal_without_id"])?o:r[i]=[];b.includes(a)||b.push(a)}})}}),E=(0,Y.createSlice)({name:a+"/subscriptions",initialState:ec,reducers:{updateSubscriptionOptions:function(e,t){},unsubscribeQueryResult:function(e,t){},internal_probeSubscription:function(e,t){}}}),k=(0,Y.createSlice)({name:a+"/internalSubscriptions",initialState:ec,reducers:{subscriptionsUpdated:{reducer:function(e,t){return(0,es.applyPatches)(e,t.payload)},prepare:(0,Y.prepareAutoBatched)()}}}),P=(0,Y.createSlice)({name:a+"/config",initialState:y({online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine,focused:"undefined"==typeof document||"hidden"!==document.visibilityState,middlewareRegistered:!1},m),reducers:{middlewareRegistered:function(e,t){e.middlewareRegistered="conflict"!==e.middlewareRegistered&&d===t.payload||"conflict"}},extraReducers:function(e){e.addCase(U,function(e){e.online=!0}).addCase(W,function(e){e.online=!1}).addCase(F,function(e){e.focused=!0}).addCase(q,function(e){e.focused=!1}).addMatcher(p,function(e){return y({},e)})}}),O=(0,Y.combineReducers)({queries:b.reducer,mutations:w.reducer,provided:I.reducer,subscriptions:k.reducer,config:P.reducer}),{reducer:function(e,t){return O(v.match(t)?void 0:e,t)},actions:_(y(y(y(y(y({},P.actions),b.actions),E.actions),k.actions),w.actions),{unsubscribeMutationResult:w.actions.removeMutationResult,resetApiState:v})}),eV=eB.reducer,eH=eB.actions;ej(e.util,{patchQueryData:eA,updateQueryData:eN,upsertQueryData:eU,prefetch:eW,resetApiState:eH.resetApiState}),ej(e.internalActions,eH);var eK=function(e){var t=e.reducerPath,n=e.queryThunk,i=e.api,o=e.context,s=o.apiUid,a={invalidateTags:(0,eC.createAction)(t+"/invalidateTags")},l=[ex,eE,ek,eP,eR,eD];return{middleware:function(n){var a,c,h,d,f,p,g,m,v,b=!1,w=_(y({},e),{internalState:{currentSubscriptions:{}},refetchQuery:u}),I=l.map(function(e){return e(w)}),S=(a=w.api,c=w.queryThunk,h=w.internalState,d=a.reducerPath+"/subscriptions",f=null,p=!1,m=(g=a.internalActions).updateSubscriptionOptions,v=g.unsubscribeQueryResult,function(e,t){if(f||(f=JSON.parse(JSON.stringify(h.currentSubscriptions))),a.util.resetApiState.match(e))return f=h.currentSubscriptions={},[!0,!1];if(a.internalActions.internal_probeSubscription.match(e)){var n,r,i=e.payload;return[!1,!!(null==(n=h.currentSubscriptions[i.queryCacheKey])?void 0:n[i.requestId])]}if(function(e,t){var n,r,i,o,s,l,u,h,d;if(m.match(t)){var f=t.payload,p=f.queryCacheKey,g=f.requestId;return(null==(n=null==e?void 0:e[p])?void 0:n[g])&&(e[p][g]=f.options),!0}if(v.match(t)){var y=t.payload;return g=y.requestId,e[p=y.queryCacheKey]&&delete e[p][g],!0}if(a.internalActions.removeQueryResult.match(t))return delete e[t.payload.queryCacheKey],!0;if(c.pending.match(t)){var _=t.meta;if(g=_.requestId,(I=_.arg).subscribe)return(b=null!=(i=e[r=I.queryCacheKey])?i:e[r]={})[g]=null!=(s=null!=(o=I.subscriptionOptions)?o:b[g])?s:{},!0}if(c.rejected.match(t)){var b,w=t.meta,I=w.arg;if(g=w.requestId,w.condition&&I.subscribe)return(b=null!=(u=e[l=I.queryCacheKey])?u:e[l]={})[g]=null!=(d=null!=(h=I.subscriptionOptions)?h:b[g])?d:{},!0}return!1}(h.currentSubscriptions,e)){p||(eM(function(){var e=JSON.parse(JSON.stringify(h.currentSubscriptions)),n=(0,eL.produceWithPatches)(f,function(){return e});t.next(a.internalActions.subscriptionsUpdated(n[1])),f=e,p=!1}),p=!0);var o=!!(null==(r=e.type)?void 0:r.startsWith(d)),s=c.rejected.match(e)&&e.meta.condition&&!!e.meta.arg.subscribe;return[!o&&!s,!1]}return[!0,!1]}),C=function(e){var t=e.reducerPath,n=e.context,i=e.refetchQuery,o=e.internalState,s=e.api.internalActions.removeQueryResult;function a(e,a){var l=e.getState()[t],u=l.queries,c=o.currentSubscriptions;n.batch(function(){for(var t=0,n=Object.keys(c);t<n.length;t++){var o=n[t],h=u[o],d=c[o];d&&h&&(Object.values(d).some(function(e){return!0===e[a]})||Object.values(d).every(function(e){return void 0===e[a]})&&l.config[a])&&(0===Object.keys(d).length?e.dispatch(s({queryCacheKey:o})):h.status!==r.uninitialized&&e.dispatch(i(h,o)))}})}return function(e,t){F.match(e)&&a(t,"refetchOnFocus"),U.match(e)&&a(t,"refetchOnReconnect")}}(w);return function(e){return function(r){b||(b=!0,n.dispatch(i.internalActions.middlewareRegistered(s)));var a,l=_(y({},n),{next:e}),u=n.getState(),c=S(r,l,u),h=c[1];if(a=c[0]?e(r):h,n.getState()[t]&&(C(r,l,u),r&&"string"==typeof r.type&&r.type.startsWith(t+"/")||o.hasRehydrationInfo(r)))for(var d=0;d<I.length;d++)(0,I[d])(r,l,u);return a}}},actions:a};function u(e,t,r){return void 0===r&&(r={}),n(y({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t},r))}}({reducerPath:em,context:n,queryThunk:eT,mutationThunk:eO,api:e,assertTagType:eI}),e$=eK.middleware;ej(e.util,eK.actions),ej(e,{reducer:eV,middleware:e$});var eQ=function(e){var t=e.serializeQueryArgs,n=e.reducerPath,i=function(e){return ep},o=function(e){return eg};return{buildQuerySelector:function(e,r){return function(o){var a=t({queryArgs:o,endpointDefinition:r,endpointName:e});return(0,K.createSelector)(o===eh?i:function(e){var t,r,i;return null!=(i=null==(r=null==(t=e[n])?void 0:t.queries)?void 0:r[a])?i:ep},s)}},buildMutationSelector:function(){return function(e){var t,r;return r="object"==typeof e?null!=(t=el(e))?t:eh:e,(0,K.createSelector)(r===eh?o:function(e){var t,i,o;return null!=(o=null==(i=null==(t=e[n])?void 0:t.mutations)?void 0:i[r])?o:eg},s)}},selectInvalidatedBy:function(e,t){for(var r,i=e[n],o=new Set,s=0,a=t.map(G);s<a.length;s++){var l=a[s],u=i.provided[l.type];if(u)for(var c=0,h=null!=(r=void 0!==l.id?u[l.id]:C(Object.values(u)))?r:[];c<h.length;c++)o.add(h[c])}return C(Array.from(o.values()).map(function(e){var t=i.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]}))}};function s(e){var t;return y(y({},e),{status:t=e.status,isUninitialized:t===r.uninitialized,isLoading:t===r.pending,isSuccess:t===r.fulfilled,isError:t===r.rejected})}}({serializeQueryArgs:ev,reducerPath:em}),eG=eQ.buildQuerySelector,eY=eQ.buildMutationSelector;ej(e.util,{selectInvalidatedBy:eQ.selectInvalidatedBy});var eJ=(R=(A={queryThunk:eT,mutationThunk:eO,api:e,serializeQueryArgs:ev,context:n}).serializeQueryArgs,N=A.queryThunk,x=A.mutationThunk,L=A.api,M=A.context,j=new Map,z=new Map,H=(B=L.internalActions).unsubscribeQueryResult,Q=B.removeMutationResult,ed=B.updateSubscriptionOptions,{buildInitiateQuery:function(e,t){var n=function(r,i){var s=void 0===i?{}:i,a=s.subscribe,l=void 0===a||a,u=s.forceRefetch,c=s.subscriptionOptions,h=s[Z];return function(i,s){var a,d,f=R({queryArgs:r,endpointDefinition:t,endpointName:e}),p=N(((a={type:"query",subscribe:l,forceRefetch:u,subscriptionOptions:c,endpointName:e,originalArgs:r,queryCacheKey:f})[Z]=h,a)),g=L.endpoints[e].select(r),m=i(p),v=g(s()),y=m.requestId,_=m.abort,b=v.requestId!==y,w=null==(d=j.get(i))?void 0:d[f],I=function(){return g(s())},C=Object.assign(h?m.then(I):b&&!w?Promise.resolve(v):Promise.all([w,m]).then(I),{arg:r,requestId:y,subscriptionOptions:c,queryCacheKey:f,abort:_,unwrap:function(){return S(this,null,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,C];case 1:if((e=t.sent()).isError)throw e.error;return[2,e.data]}})})},refetch:function(){return i(n(r,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){l&&i(H({queryCacheKey:f,requestId:y}))},updateSubscriptionOptions:function(t){C.subscriptionOptions=t,i(ed({endpointName:e,requestId:y,queryCacheKey:f,options:t}))}});if(!w&&!b&&!h){var E=j.get(i)||{};E[f]=C,j.set(i,E),C.then(function(){delete E[f],Object.keys(E).length||j.delete(i)})}return C}};return n},buildInitiateMutation:function(e){return function(t,n){var r=void 0===n?{}:n,i=r.track,o=void 0===i||i,s=r.fixedCacheKey;return function(n,r){var i=n(x({type:"mutation",endpointName:e,originalArgs:t,track:o,fixedCacheKey:s})),a=i.requestId,l=i.abort,u=i.unwrap,c=i.unwrap().then(function(e){return{data:e}}).catch(function(e){return{error:e}}),h=function(){n(Q({requestId:a,fixedCacheKey:s}))},d=Object.assign(c,{arg:i.arg,requestId:a,abort:l,unwrap:u,unsubscribe:h,reset:h}),f=z.get(n)||{};return z.set(n,f),f[a]=d,d.then(function(){delete f[a],Object.keys(f).length||z.delete(n)}),s&&(f[s]=d,d.then(function(){f[s]===d&&(delete f[s],Object.keys(f).length||z.delete(n))})),d}}},getRunningQueryThunk:function(e,t){return function(n){var r,i=R({queryArgs:t,endpointDefinition:M.endpointDefinitions[e],endpointName:e});return null==(r=j.get(n))?void 0:r[i]}},getRunningMutationThunk:function(e,t){return function(e){var n;return null==(n=z.get(e))?void 0:n[t]}},getRunningQueriesThunk:function(){return function(e){return Object.values(j.get(e)||{}).filter(J)}},getRunningMutationsThunk:function(){return function(e){return Object.values(z.get(e)||{}).filter(J)}},getRunningOperationPromises:function(){var e=function(e){return Array.from(e.values()).flatMap(function(e){return e?Object.values(e):[]})};return s(s([],e(j)),e(z)).filter(J)},removalWarning:function(){throw Error("This method had to be removed due to a conceptual bug in RTK.\n       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.\n       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.")}}),eZ=eJ.buildInitiateQuery,eX=eJ.buildInitiateMutation;return ej(e.util,{getRunningOperationPromises:eJ.getRunningOperationPromises,getRunningOperationPromise:eJ.removalWarning,getRunningMutationThunk:eJ.getRunningMutationThunk,getRunningMutationsThunk:eJ.getRunningMutationsThunk,getRunningQueryThunk:eJ.getRunningQueryThunk,getRunningQueriesThunk:eJ.getRunningQueriesThunk}),{name:eq,injectEndpoint:function(t,n){var r;null!=(r=e.endpoints)[t]||(r[t]={}),$(n)?ej(e.endpoints[t],{name:t,select:eG(t,n),initiate:eZ(t,n)},ez(eT,t)):n.type===V.mutation&&ej(e.endpoints[t],{name:t,select:eY(),initiate:eX(t)},ez(eO,t))}}}}},eW=ew(eU())},7236:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[K]}function o(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$}(e)||Array.isArray(e)||!!e[H]||!!(null===(t=e.constructor)||void 0===t?void 0:t[H])||d(e)||f(e))}function s(e){return i(e)||r(23,e),e[K].t}function a(e,t,n){void 0===n&&(n=!1),0===l(e)?(n?Object.keys:Q)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function l(e){var t=e[K];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:f(e)?3:0}function u(e,t){return 2===l(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function c(e,t,n){var r=l(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return W&&e instanceof Map}function f(e){return z&&e instanceof Set}function p(e){return e.o||e.t}function g(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=G(e);delete t[K];for(var n=Q(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||i(e)||!o(e)||(l(e)>1&&(e.set=e.add=e.clear=e.delete=v),Object.freeze(e),t&&a(e,function(e,t){return m(t,!0)},!0)),e}function v(){r(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function _(e){var t=Y[e];return t||r(18,e),t}function b(e,t){t&&(_("Patches"),e.u=[],e.s=[],e.v=t)}function w(e){I(e),e.p.forEach(C),e.p=null}function I(e){e===q&&(q=e.l)}function S(e){return q={p:[],l:q,h:e,m:!0,_:0}}function C(e){var t=e[K];0===t.i||1===t.i?t.j():t.g=!0}function E(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.O||_("ES5").S(t,e,i),i?(n[K].P&&(w(t),r(4)),o(e)&&(e=T(t,e),t.l||P(t,e)),t.u&&_("Patches").M(n[K].t,e,t.u,t.s)):e=T(t,n,[]),w(t),t.u&&t.v(t.u,t.s),e!==V?e:void 0}function T(e,t,n){if(y(t))return t;var r=t[K];if(!r)return a(t,function(i,o){return k(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=g(r.k):r.o,o=i,s=!1;3===r.i&&(o=new Set(i),i.clear(),s=!0),a(o,function(t,o){return k(e,r,i,t,o,n,s)}),P(e,i,!1),n&&e.u&&_("Patches").N(r,n,e.u,e.s)}return r.o}function k(e,t,n,r,s,a,l){if(i(s)){var h=T(e,s,a&&t&&3!==t.i&&!u(t.R,r)?a.concat(r):void 0);if(c(n,r,h),!i(h))return;e.m=!1}else l&&n.add(s);if(o(s)&&!y(s)){if(!e.h.D&&e._<1)return;T(e,s),t&&t.A.l||P(e,s)}}function P(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&m(t,n)}function O(e,t){var n=e[K];return(n?p(n):e)[t]}function A(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function R(e){e.P||(e.P=!0,e.l&&R(e.l))}function N(e){e.o||(e.o=g(e.t))}function D(e,t,n){var r,i,o,s,a,l,u,c=d(t)?_("MapSet").F(t,n):f(t)?_("MapSet").T(t,n):e.O?(o=i={i:(r=Array.isArray(t))?1:0,A:n?n.A:q,P:!1,I:!1,R:{},l:n,t:t,k:null,o:null,j:null,C:!1},s=J,r&&(o=[i],s=Z),l=(a=Proxy.revocable(o,s)).revoke,u=a.proxy,i.k=u,i.j=l,u):_("ES5").J(t,n);return(n?n.A:q).p.push(c),c}function x(e){return i(e)||r(22,e),function e(t){if(!o(t))return t;var n,r=t[K],i=l(t);if(r){if(!r.P&&(r.i<4||!_("ES5").K(r)))return r.t;r.I=!0,n=L(t,i),r.I=!1}else n=L(t,i);return a(n,function(t,i){var o;r&&(2===l(o=r.t)?o.get(t):o[t])===i||c(n,t,e(i))}),3===i?new Set(n):n}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return g(e)}n.r(t),n.d(t,{EnhancerArray:function(){return eS},MiddlewareArray:function(){return eI},SHOULD_AUTOBATCH:function(){return tI},TaskAbortError:function(){return to},__DO_NOT_USE__ActionTypes:function(){return en.Kf},addListener:function(){return tv},applyMiddleware:function(){return en.md},autoBatchEnhancer:function(){return tk},bindActionCreators:function(){return en.DE},clearAllListeners:function(){return ty},combineReducers:function(){return en.UY},compose:function(){return en.qC},configureStore:function(){return eA},createAction:function(){return eR},createAsyncThunk:function(){return eG},createDraftSafeSelector:function(){return e_},createEntityAdapter:function(){return eB},createImmutableStateInvariantMiddleware:function(){return eT},createListenerMiddleware:function(){return tw},createNextState:function(){return et},createReducer:function(){return ej},createSelector:function(){return er.createSelector},createSerializableStateInvariantMiddleware:function(){return eP},createSlice:function(){return eF},createStore:function(){return en.MT},current:function(){return x},findNonSerializableValue:function(){return function e(t,n,r,i,o,s){if(void 0===n&&(n=""),void 0===r&&(r=ek),void 0===o&&(o=[]),!r(t))return{keyPath:n||"<root>",value:t};if("object"!=typeof t||null===t||(null==s?void 0:s.has(t)))return!1;for(var a,l=null!=i?i(t):Object.entries(t),u=o.length>0,c=0;c<l.length;c++){var h=l[c],d=function(t,l){var c=n?n+"."+t:t;return u&&o.some(function(e){return e instanceof RegExp?e.test(c):c===e})?"continue":r(l)?"object"==typeof l&&(a=e(l,c,r,i,o,s))?{value:a}:void 0:{value:{keyPath:c,value:l}}}(h[0],h[1]);if("object"==typeof d)return d.value}return s&&function e(t){if(!Object.isFrozen(t))return!1;for(var n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if("object"==typeof i&&null!==i&&!e(i))return!1}return!0}(t)&&s.add(t),!1}},freeze:function(){return m},getDefaultMiddleware:function(){return eO},getType:function(){return eL},isAction:function(){return eN},isAllOf:function(){return eX},isAnyOf:function(){return eZ},isAsyncThunkAction:function(){return function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?function(e){return e0(e,["pending","fulfilled","rejected"])}:e1(t)?function(e){for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(i.pending,i.rejected,i.fulfilled)}return eZ.apply(void 0,n)(e)}:e()(t[0])}},isDraft:function(){return i},isFluxStandardAction:function(){return eD},isFulfilled:function(){return function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?function(e){return e0(e,["fulfilled"])}:e1(t)?function(e){var n=t.map(function(e){return e.fulfilled});return eZ.apply(void 0,n)(e)}:e()(t[0])}},isImmutableDefault:function(){return eE},isPending:function(){return function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?function(e){return e0(e,["pending"])}:e1(t)?function(e){var n=t.map(function(e){return e.pending});return eZ.apply(void 0,n)(e)}:e()(t[0])}},isPlain:function(){return ek},isPlainObject:function(){return ew},isRejected:function(){return e2},isRejectedWithValue:function(){return function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===t.length?function(e){return eX(e2.apply(void 0,t),r)(e)}:e1(t)?function(e){return eX(e2.apply(void 0,t),r)(e)}:e()(t[0])}},legacy_createStore:function(){return en.jB},miniSerializeError:function(){return eQ},nanoid:function(){return eV},original:function(){return s},prepareAutoBatched:function(){return tS},removeListener:function(){return t_},unwrapResult:function(){return eY}});var M,j,F,q,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,z="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,V=U?Symbol.for("immer-nothing"):((F={})["immer-nothing"]=!0,F),H=U?Symbol.for("immer-draftable"):"__$immer_draftable",K=U?Symbol.for("immer-state"):"__$immer_state",$=""+Object.prototype.constructor,Q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,G=Object.getOwnPropertyDescriptors||function(e){var t={};return Q(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Y={},J={get:function(e,t){if(t===K)return e;var n,r,i=p(e);if(!u(i,t))return(r=A(i,t))?"value"in r?r.value:null===(n=r.get)||void 0===n?void 0:n.call(e.k):void 0;var s=i[t];return e.I||!o(s)?s:s===O(e.t,t)?(N(e),e.o[t]=D(e.A.h,s,e)):s},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,n){var r=A(p(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=O(p(e),t),o=null==i?void 0:i[K];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(h(n,i)&&(void 0!==n||u(e.t,t)))return!0;N(e),R(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==O(e.t,t)||t in e.t?(e.R[t]=!1,N(e),R(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},Z={};a(J,function(e,t){Z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Z.deleteProperty=function(e,t){return Z.set.call(this,e,t,void 0)},Z.set=function(e,t,n){return J.set.call(this,e[0],t,n,e[0])};var X=new(function(){function e(e){var t=this;this.O=B,this.D=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var s,a=n;return n=e,function(e){var r=this;void 0===e&&(e=a);for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=n).call.apply(t,[r,e].concat(o))})}}if("function"!=typeof n&&r(6),void 0!==i&&"function"!=typeof i&&r(7),o(e)){var l=S(t),u=D(t,e,void 0),c=!0;try{s=n(u),c=!1}finally{c?w(l):I(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return b(l,i),E(e,l)},function(e){throw w(l),e}):(b(l,i),E(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===V&&(s=void 0),t.D&&m(s,!0),i){var h=[],d=[];_("Patches").M(e,s,h,d),i(h,d)}return s}r(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){o(e)||r(8),i(e)&&(e=x(e));var t=S(this),n=D(this,e,void 0);return n[K].C=!0,I(t),n},t.finishDraft=function(e,t){var n=(e&&e[K]).A;return b(n,t),E(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!B&&r(20),this.O=e},t.applyPatches=function(e,t){for(n=t.length-1;n>=0;n--){var n,r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=_("Patches").$;return i(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}()),ee=X.produce;X.produceWithPatches.bind(X),X.setAutoFreeze.bind(X),X.setUseProxies.bind(X),X.applyPatches.bind(X),X.createDraft.bind(X),X.finishDraft.bind(X);var et=ee,en=n(8356),er=n(8697);function ei(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var eo=ei();eo.withExtraArgument=ei,n(3454);var es=(M=function(e,t){return(M=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ea=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},el=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},eu=Object.defineProperty,ec=Object.defineProperties,eh=Object.getOwnPropertyDescriptors,ed=Object.getOwnPropertySymbols,ef=Object.prototype.hasOwnProperty,ep=Object.prototype.propertyIsEnumerable,eg=function(e,t,n){return t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},em=function(e,t){for(var n in t||(t={}))ef.call(t,n)&&eg(e,n,t[n]);if(ed)for(var r=0,i=ed(t);r<i.length;r++){var n=i[r];ep.call(t,n)&&eg(e,n,t[n])}return e},ev=function(e,t){return ec(e,eh(t))},ey=function(e,t,n){return new Promise(function(r,i){var o=function(e){try{a(n.next(e))}catch(e){i(e)}},s=function(e){try{a(n.throw(e))}catch(e){i(e)}},a=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,s)};a((n=n.apply(e,t)).next())})},e_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=er.createSelector.apply(void 0,e);return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,el([i(e)?x(e):e],t))}},eb="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?en.qC:en.qC.apply(null,arguments)};function ew(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var eI=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return es(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,el([void 0],e[0].concat(this)))):new(t.bind.apply(t,el([void 0],e.concat(this))))},t}(Array),eS=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return es(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,el([void 0],e[0].concat(this)))):new(t.bind.apply(t,el([void 0],e.concat(this))))},t}(Array);function eC(e){return o(e)?et(e,function(){}):e}function eE(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function eT(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function ek(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||ew(e)}function eP(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function eO(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t;e.immutableCheck,e.serializableCheck;var r=new eI;return n&&("boolean"==typeof n?r.push(eo):r.push(eo.withExtraArgument(n.extraArgument))),r}function eA(e){var t,n=function(e){return eO(e)},r=e||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=r.enhancers,d=void 0===h?void 0:h;if("function"==typeof o)t=o;else if(ew(o))t=(0,en.UY)(o);else throw Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var f=a;"function"==typeof f&&(f=f(n));var p=en.md.apply(void 0,f),g=en.qC;u&&(g=eb(em({trace:!1},"object"==typeof u&&u)));var m=new eS(p),v=m;Array.isArray(d)?v=el([p],d):"function"==typeof d&&(v=d(m));var y=g.apply(void 0,v);return(0,en.MT)(t,void 0===c?void 0:c,y)}function eR(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw Error("prepareAction did not return an object");return em(em({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function eN(e){return ew(e)&&"type"in e}function eD(e){return eN(e)&&"string"==typeof e.type&&Object.keys(e).every(ex)}function ex(e){return["type","payload","error","meta"].indexOf(e)>-1}function eL(e){return""+e}function eM(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function ej(e,t,n,r){void 0===n&&(n=[]);var s,a="function"==typeof t?eM(t):[t,n,r],l=a[0],u=a[1],c=a[2];if("function"==typeof e)s=function(){return eC(e())};else{var h=eC(e);s=function(){return h}}function d(e,t){void 0===e&&(e=s());var n=el([l[t.type]],u.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===n.filter(function(e){return!!e}).length&&(n=[c]),n.reduce(function(e,n){if(n){if(i(e)){var r=n(e,t);return void 0===r?e:r}if(o(e))return et(e,function(e){return n(e,t)});var r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e},e)}return d.getInitialState=s,d}function eF(e){var t,n=e.name;if(!n)throw Error("`name` is a required option for createSlice");var r="function"==typeof e.initialState?e.initialState:eC(e.initialState),i=e.reducers||{},o=Object.keys(i),s={},a={},l={};function u(){var t="function"==typeof e.extraReducers?eM(e.extraReducers):[e.extraReducers],n=t[0],i=t[1],o=void 0===i?[]:i,s=t[2],l=void 0===s?void 0:s,u=em(em({},void 0===n?{}:n),a);return ej(r,function(e){for(var t in u)e.addCase(t,u[t]);for(var n=0;n<o.length;n++){var r=o[n];e.addMatcher(r.matcher,r.reducer)}l&&e.addDefaultCase(l)})}return o.forEach(function(e){var t,r,o=i[e],u=n+"/"+e;"reducer"in o?(t=o.reducer,r=o.prepare):t=o,s[e]=t,a[u]=t,l[e]=r?eR(u,r):eR(u)}),{name:n,reducer:function(e,n){return t||(t=u()),t(e,n)},actions:l,caseReducers:s,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}function eq(e){return function(t,n){var r=function(t){eD(n)?e(n.payload,t):e(n,t)};return i(t)?(r(t),t):et(t,r)}}function eU(e){return Array.isArray(e)||(e=Object.values(e)),e}function eW(e,t,n){e=eU(e);for(var r=[],i=[],o=0,s=e;o<s.length;o++){var a=s[o],l=t(a);l in n.entities?i.push({id:l,changes:a}):r.push(a)}return[r,i]}function ez(e){var t,n;function r(t,n){var r=e(t);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function i(e,t){e=eU(e);for(var n=0,i=e;n<i.length;n++)r(i[n],t)}function o(t,n){var r=e(t);r in n.entities||n.ids.push(r),n.entities[r]=t}function s(e,t){var n=!1;e.forEach(function(e){e in t.entities&&(delete t.entities[e],n=!0)}),n&&(t.ids=t.ids.filter(function(e){return e in t.entities}))}function a(t,n){var r={},i={};t.forEach(function(e){e.id in n.entities&&(i[e.id]={id:e.id,changes:em(em({},i[e.id]?i[e.id].changes:null),e.changes)})}),(t=Object.values(i)).length>0&&t.filter(function(t){var i,o,s,a,l,u;return i=r,o=t,(u=(l=e(a=Object.assign({},(s=n).entities[o.id],o.changes)))!==o.id)&&(i[o.id]=l,delete s.entities[o.id]),s.entities[l]=a,u}).length>0&&(n.ids=Object.keys(n.entities))}function l(t,n){var r=eW(t,e,n),o=r[0];a(r[1],n),i(o,n)}return{removeAll:(t=function(e){Object.assign(e,{ids:[],entities:{}})},n=eq(function(e,n){return t(n)}),function(e){return n(e,void 0)}),addOne:eq(r),addMany:eq(i),setOne:eq(o),setMany:eq(function(e,t){e=eU(e);for(var n=0,r=e;n<r.length;n++)o(r[n],t)}),setAll:eq(function(e,t){e=eU(e),t.ids=[],t.entities={},i(e,t)}),updateOne:eq(function(e,t){return a([e],t)}),updateMany:eq(a),upsertOne:eq(function(e,t){return l([e],t)}),upsertMany:eq(l),removeOne:eq(function(e,t){return s([e],t)}),removeMany:eq(s)}}function eB(e){void 0===e&&(e={});var t=em({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,r=t.sortComparer,i=r?function(e,t){var n=ez(e);function r(t,n){var r=(t=eU(t)).filter(function(t){return!(e(t) in n.entities)});0!==r.length&&a(r,n)}function i(e,t){0!==(e=eU(e)).length&&a(e,t)}function o(t,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i],s=n.entities[o.id];if(s){r=!0,Object.assign(s,o.changes);var a=e(s);o.id!==a&&(delete n.entities[o.id],n.entities[a]=s)}}r&&l(n)}function s(t,n){var i=eW(t,e,n),s=i[0];o(i[1],n),r(s,n)}function a(t,n){t.forEach(function(t){n.entities[e(t)]=t}),l(n)}function l(n){var r=Object.values(n.entities);r.sort(t);var i=r.map(e);!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!1;return!0}(n.ids,i)&&(n.ids=i)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:eq(function(e,t){return r([e],t)}),updateOne:eq(function(e,t){return o([e],t)}),upsertOne:eq(function(e,t){return s([e],t)}),setOne:eq(function(e,t){return i([e],t)}),setMany:eq(i),setAll:eq(function(e,t){e=eU(e),t.entities={},t.ids=[],r(e,t)}),addMany:eq(r),updateMany:eq(o),upsertMany:eq(s)}}(n,r):ez(n);return em(em(em({selectId:n,sortComparer:r},{getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}}),{getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},r=e_(t,n,function(e,t){return e.map(function(e){return t[e]})}),i=function(e,t){return t},o=function(e,t){return e[t]},s=e_(t,function(e){return e.length});if(!e)return{selectIds:t,selectEntities:n,selectAll:r,selectTotal:s,selectById:e_(n,i,o)};var a=e_(e,n);return{selectIds:e_(e,t),selectEntities:a,selectAll:e_(e,r),selectTotal:e_(e,s),selectById:e_(a,i,o)}}}),i)}var eV=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},eH=["name","message","stack","code"],eK=function(e,t){this.payload=e,this.meta=t},e$=function(e,t){this.payload=e,this.meta=t},eQ=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0;n<eH.length;n++){var r=eH[n];"string"==typeof e[r]&&(t[r]=e[r])}return t}return{message:String(e)}},eG=function(){function e(e,t,n){var r=eR(e+"/fulfilled",function(e,t,n,r){return{payload:e,meta:ev(em({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}}),i=eR(e+"/pending",function(e,t,n){return{payload:void 0,meta:ev(em({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),o=eR(e+"/rejected",function(e,t,r,i,o){return{payload:i,error:(n&&n.serializeError||eQ)(e||"Rejected"),meta:ev(em({},o||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:(null==e?void 0:e.name)==="AbortError",condition:(null==e?void 0:e.name)==="ConditionError"})}}),s="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign(function(e){return function(a,l,u){var c,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):eV(),d=new s;function f(e){c=e,d.abort()}var p=function(){return ey(this,null,function(){var s,p,g,m,v,y;return ea(this,function(_){switch(_.label){case 0:var b;if(_.trys.push([0,4,,5]),!(null!==(b=m=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:l,extra:u}))&&"object"==typeof b&&"function"==typeof b.then))return[3,2];return[4,m];case 1:m=_.sent(),_.label=2;case 2:if(!1===m||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise(function(e,t){return d.signal.addEventListener("abort",function(){return t({name:"AbortError",message:c||"Aborted"})})}),a(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:l,extra:u}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:a,getState:l,extra:u,requestId:h,signal:d.signal,abort:f,rejectWithValue:function(e,t){return new eK(e,t)},fulfillWithValue:function(e,t){return new e$(e,t)}})).then(function(t){if(t instanceof eK)throw t;return t instanceof e$?r(t.payload,h,e,t.meta):r(t,h,e)})])];case 3:return g=_.sent(),[3,5];case 4:return g=(y=_.sent())instanceof eK?o(null,h,e,y.payload,y.meta):o(y,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&o.match(g)&&g.meta.condition||a(g),[2,g]}})})}();return Object.assign(p,{abort:f,requestId:h,arg:e,unwrap:function(){return p.then(eY)}})}},{pending:i,rejected:o,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function eY(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var eJ=function(e,t){return e&&"function"==typeof e.match?e.match(t):e(t)};function eZ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some(function(e){return eJ(e,t)})}}function eX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every(function(e){return eJ(e,t)})}}function e0(e,t){if(!e||!e.meta)return!1;var n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function e1(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function e2(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return e0(e,["rejected"])}:e1(e)?function(t){var n=e.map(function(e){return e.rejected});return eZ.apply(void 0,n)(t)}:e2()(e[0])}var e4=function(e,t){if("function"!=typeof e)throw TypeError(t+" is not a function")},e3=function(){},e6=function(e,t){return void 0===t&&(t=e3),e.catch(t),e},e5=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},e8=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},e9="listener",e7="completed",te="cancelled",tt="task-"+te,tn="task-"+e7,tr=e9+"-"+te,ti=e9+"-"+e7,to=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+te+" (reason: "+e+")"},ts=function(e){if(e.aborted)throw new to(e.reason)};function ta(e,t){var n=e3;return new Promise(function(r,i){var o=function(){return i(new to(e.reason))};if(e.aborted){o();return}n=e5(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=e3})}var tl=function(e){return function(t){return e6(ta(e,t).then(function(t){return ts(e),t}))}},tu=function(e){var t=tl(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},tc=Object.assign,th={},td="listenerMiddleware",tf=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=eR(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(i);else throw Error("Creating or removing a listener requires one of the known fields for matching an action");return e4(o,"options.listener"),{predicate:i,type:t,effect:o}},tp=function(e){var t=tf(e),n=t.type,r=t.predicate,i=t.effect;return{id:eV(),effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw Error("Unsubscribe not initialized")}}},tg=function(e){e.pending.forEach(function(e){e8(e,tr)})},tm=function(e,t,n){try{e(t,n)}catch(e){setTimeout(function(){throw e},0)}},tv=eR(td+"/add"),ty=eR(td+"/removeAll"),t_=eR(td+"/remove"),tb=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,el([td+"/error"],e))};function tw(e){var t=this;void 0===e&&(e={});var n=new Map,r=e.extra,i=e.onError,o=void 0===i?tb:i;e4(o,"onError");var s=function(e){for(var t=0,r=Array.from(n.values());t<r.length;t++){var i=r[t];if(e(i))return i}},a=function(e){var t,r=s(function(t){return t.effect===e.effect});return r||(r=tp(e)),(t=r).unsubscribe=function(){return n.delete(t.id)},n.set(t.id,t),function(e){t.unsubscribe(),(null==e?void 0:e.cancelActive)&&tg(t)}},l=function(e){var t=tf(e),n=t.type,r=t.effect,i=t.predicate,o=s(function(e){return("string"==typeof n?e.type===n:e.predicate===i)&&e.effect===r});return o&&(o.unsubscribe(),e.cancelActive&&tg(o)),!!o},u=function(e,i,s,l){return ey(t,null,function(){var t,u,c;return ea(this,function(h){var d,f;switch(h.label){case 0:d=(t=new AbortController).signal,u=function(e,t){return e6(ey(void 0,null,function(){var n,r,i;return ea(this,function(o){switch(o.label){case 0:ts(d),n=function(){},r=[new Promise(function(t,r){var i=a({predicate:e,effect:function(e,n){n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});n=function(){i(),r()}})],null!=t&&r.push(new Promise(function(e){return setTimeout(e,t,null)})),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,ta(d,Promise.race(r))];case 2:return i=o.sent(),ts(d),[2,i];case 3:return n(),[7];case 4:return[2]}})}))},h.label=1;case 1:return h.trys.push([1,3,4,5]),e.pending.add(t),[4,Promise.resolve(e.effect(i,tc({},s,{getOriginalState:l,condition:function(e,t){return u(e,t).then(Boolean)},take:u,delay:tu(t.signal),pause:tl(t.signal),extra:r,signal:t.signal,fork:(f=t.signal,function(e){e4(e,"taskExecutor");var t,n=new AbortController;e5(f,function(){return e8(n,f.reason)});var r=(t=function(){return e8(n,tn)},ey(void 0,null,function(){var r;return ea(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,ey(void 0,null,function(){var t;return ea(this,function(r){switch(r.label){case 0:return ts(f),ts(n.signal),[4,e({pause:tl(n.signal),delay:tu(n.signal),signal:n.signal})];case 1:return t=r.sent(),ts(n.signal),[2,t]}})})];case 2:return[2,{status:"ok",value:i.sent()}];case 3:return[2,{status:(r=i.sent())instanceof to?"cancelled":"rejected",error:r}];case 4:return null==t||t(),[7];case 5:return[2]}})}));return{result:tl(f)(r),cancel:function(){e8(n,tt)}}}),unsubscribe:e.unsubscribe,subscribe:function(){n.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,n,r){e!==t&&(e8(e,tr),r.delete(e))})}})))];case 2:return h.sent(),[3,5];case 3:return(c=h.sent())instanceof to||tm(o,c,{raisedBy:"effect"}),[3,5];case 4:return e8(t,ti),e.pending.delete(t),[7];case 5:return[2]}})})},c=function(){n.forEach(tg),n.clear()};return{middleware:function(e){return function(t){return function(r){if(!eN(r))return t(r);if(tv.match(r))return a(r.payload);if(ty.match(r)){c();return}if(t_.match(r))return l(r.payload);var i,s=e.getState(),h=function(){if(s===th)throw Error(td+": getOriginalState can only be called synchronously");return s};try{if(i=t(r),n.size>0)for(var d=e.getState(),f=Array.from(n.values()),p=0;p<f.length;p++){var g=f[p],m=!1;try{m=g.predicate(r,d,s)}catch(e){m=!1,tm(o,e,{raisedBy:"predicate"})}m&&u(g,r,e,h)}}finally{s=th}return i}}},startListening:a,stopListening:l,clearListeners:c}}var tI="RTK_autoBatch",tS=function(){return function(e){var t;return{payload:e,meta:((t={})[tI]=!0,t)}}},tC="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==n.g?n.g:globalThis):function(e){return(j||(j=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},tE=function(e){return function(t){setTimeout(t,e)}},tT="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:tE(10),tk=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(void 0,n),o=!0,s=!1,a=!1,l=new Set,u="tick"===e.type?tC:"raf"===e.type?tT:"callback"===e.type?e.queueNotification:tE(e.timeout),c=function(){a=!1,s&&(s=!1,l.forEach(function(e){return e()}))};return Object.assign({},i,{subscribe:function(e){var t=i.subscribe(function(){return o&&e()});return l.add(e),function(){t(),l.delete(e)}},dispatch:function(e){var t;try{return(s=!(o=!(null==(t=null==e?void 0:e.meta)?void 0:t[tI])))&&!a&&(a=!0,u(c)),i.dispatch(e)}finally{o=!0}}})}}};!function(){function e(e,t){var n=o[e];return n?n.enumerable=t:o[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[K];return J.get(t,e)},set:function(t){var n=this[K];J.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][K];if(!i.P)switch(i.i){case 5:r(i)&&R(i);break;case 4:n(i)&&R(i)}}}function n(e){for(var t=e.t,n=e.k,r=Q(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==K){var s=t[o];if(void 0===s&&!u(t,o))return!0;var a=n[o],l=a&&a[K];if(l?l.t!==s:!h(a,s))return!0}}var c=!!t[K];return r.length!==Q(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var o={};Y.ES5||(Y.ES5={J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=G(n);delete o[K];for(var s=Q(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:q,P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,K,{value:o,writable:!0}),i},S:function(e,n,o){o?i(n)&&n[K].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[K];if(n){var i=n.t,o=n.k,s=n.R,l=n.i;if(4===l)a(o,function(t){t!==K&&(void 0!==i[t]||u(i,t)?s[t]||e(o[t]):(s[t]=!0,R(n)))}),a(i,function(e){void 0!==o[e]||u(o,e)||(s[e]=!1,R(n))});else if(5===l){if(r(n)&&(R(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var h=i.length;h<o.length;h++)s[h]=!0;for(var d=Math.min(o.length,i.length),f=0;f<d;f++)o.hasOwnProperty(f)||(s[f]=!0),void 0===s[f]&&e(o[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}()},452:function(e,t,n){var r,i,o,s,a,l,u,c,h,d,f,p,g,m,v,y;e.exports=(r=n(8249),n(8269),n(8214),n(888),n(5109),o=(i=r).lib.BlockCipher,s=i.algo,a=[],l=[],u=[],c=[],h=[],d=[],f=[],p=[],g=[],m=[],function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var n=0,r=0,t=0;t<256;t++){var i=r^r<<1^r<<2^r<<3^r<<4;i=i>>>8^255&i^99,a[n]=i,l[i]=n;var o=e[n],s=e[o],v=e[s],y=257*e[i]^16843008*i;u[n]=y<<24|y>>>8,c[n]=y<<16|y>>>16,h[n]=y<<8|y>>>24,d[n]=y;var y=16843009*v^65537*s^257*o^16843008*n;f[i]=y<<24|y>>>8,p[i]=y<<16|y>>>16,g[i]=y<<8|y>>>24,m[i]=y,n?(n=o^e[e[e[v^o]]],r^=e[e[r]]):n=r=1}}(),v=[0,1,2,4,8,16,32,64,128,27,54],y=s.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,n=t.words,r=t.sigBytes/4,i=((this._nRounds=r+6)+1)*4,o=this._keySchedule=[],s=0;s<i;s++)s<r?o[s]=n[s]:(e=o[s-1],s%r?r>6&&s%r==4&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):e=(a[(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e])^v[s/r|0]<<24,o[s]=o[s-r]^e);for(var l=this._invKeySchedule=[],u=0;u<i;u++){var s=i-u;if(u%4)var e=o[s];else var e=o[s-4];u<4||s<=4?l[u]=e:l[u]=f[a[e>>>24]]^p[a[e>>>16&255]]^g[a[e>>>8&255]]^m[a[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,u,c,h,d,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,f,p,g,m,l);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],f=4,p=1;p<l;p++){var g=r[u>>>24]^i[c>>>16&255]^o[h>>>8&255]^s[255&d]^n[f++],m=r[c>>>24]^i[h>>>16&255]^o[d>>>8&255]^s[255&u]^n[f++],v=r[h>>>24]^i[d>>>16&255]^o[u>>>8&255]^s[255&c]^n[f++],y=r[d>>>24]^i[u>>>16&255]^o[c>>>8&255]^s[255&h]^n[f++];u=g,c=m,h=v,d=y}var g=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],m=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&u])^n[f++],v=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^n[f++],y=(a[d>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^n[f++];e[t]=g,e[t+1]=m,e[t+2]=v,e[t+3]=y},keySize:8}),i.AES=o._createHelper(y),r.AES)},5109:function(e,t,n){var r,i,o,s,a,l,u,c,h,d,f,p,g,m,v,y,_,b,w;e.exports=(r=n(8249),n(888),void(r.lib.Cipher||(s=(o=(i=r).lib).Base,a=o.WordArray,l=o.BufferedBlockAlgorithm,(u=i.enc).Utf8,c=u.Base64,h=i.algo.EvpKDF,d=o.Cipher=l.extend({cfg:s.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:_}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),o.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),g=f.CBC=function(){var e=p.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),m=(i.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var l=a.create(o,r);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=d.extend({cfg:d.cfg.extend({mode:g,padding:m}),reset:function(){d.reset.call(this);var e,t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),v=o.CipherParams=s.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),v.create({ciphertext:n,salt:t})}},_=o.SerializableCipher=s.extend({cfg:s.extend({format:y}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),s=i.cfg;return v.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(i.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var i=h.create({keySize:t+n}).compute(e,r),o=a.create(i.words.slice(t),4*n);return i.sigBytes=4*t,v.create({key:i,iv:o,salt:r})}},w=o.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:b}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=_.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,_.decrypt.call(this,e,t,i.key,r)}}))))},8249:function(e,t,n){var r;e.exports=r=r||function(e,t){if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(e){}var r,i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},l=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=a.WordArray=l.extend({init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),c=s.enc={},h=c.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*l,o);if(l){for(var h=0;h<l;h+=s)this._doProcessBlock(i,h);n=i.splice(0,l),r.sigBytes-=c}return new u.init(n,c)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}});var g=s.algo={};return s}(Math)},8269:function(e,t,n){var r,i;e.exports=(i=(r=n(8249)).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return function(e,t,n){for(var r=[],o=0,s=0;s<t;s++)if(s%4){var a=n[e.charCodeAt(s-1)]<<s%4*2|n[e.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=a<<24-o%4*8,o++}return i.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},888:function(e,t,n){var r,i,o,s,a,l,u,c;e.exports=(r=n(8249),n(2783),n(9824),s=(o=(i=r).lib).Base,a=o.WordArray,u=(l=i.algo).MD5,c=l.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:u,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,l=r.keySize,u=r.iterations;s.length<l;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var c=1;c<u;c++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*l,o}}),i.EvpKDF=function(e,t,n){return c.create(n).compute(e,t)},r.EvpKDF)},9824:function(e,t,n){var r,i,o;e.exports=void(i=(r=n(8249)).lib.Base,o=r.enc.Utf8,r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,l=s.words,u=0;u<n;u++)a[u]^=1549556828,l[u]^=909522486;i.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}}))},8214:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var o=this._hash.words,s=e[t+0],l=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],w=e[t+10],I=e[t+11],S=e[t+12],C=e[t+13],E=e[t+14],T=e[t+15],k=o[0],P=o[1],O=o[2],A=o[3];k=u(k,P,O,A,s,7,a[0]),A=u(A,k,P,O,l,12,a[1]),O=u(O,A,k,P,f,17,a[2]),P=u(P,O,A,k,p,22,a[3]),k=u(k,P,O,A,g,7,a[4]),A=u(A,k,P,O,m,12,a[5]),O=u(O,A,k,P,v,17,a[6]),P=u(P,O,A,k,y,22,a[7]),k=u(k,P,O,A,_,7,a[8]),A=u(A,k,P,O,b,12,a[9]),O=u(O,A,k,P,w,17,a[10]),P=u(P,O,A,k,I,22,a[11]),k=u(k,P,O,A,S,7,a[12]),A=u(A,k,P,O,C,12,a[13]),O=u(O,A,k,P,E,17,a[14]),P=u(P,O,A,k,T,22,a[15]),k=c(k,P,O,A,l,5,a[16]),A=c(A,k,P,O,v,9,a[17]),O=c(O,A,k,P,I,14,a[18]),P=c(P,O,A,k,s,20,a[19]),k=c(k,P,O,A,m,5,a[20]),A=c(A,k,P,O,w,9,a[21]),O=c(O,A,k,P,T,14,a[22]),P=c(P,O,A,k,g,20,a[23]),k=c(k,P,O,A,b,5,a[24]),A=c(A,k,P,O,E,9,a[25]),O=c(O,A,k,P,p,14,a[26]),P=c(P,O,A,k,_,20,a[27]),k=c(k,P,O,A,C,5,a[28]),A=c(A,k,P,O,f,9,a[29]),O=c(O,A,k,P,y,14,a[30]),P=c(P,O,A,k,S,20,a[31]),k=h(k,P,O,A,m,4,a[32]),A=h(A,k,P,O,_,11,a[33]),O=h(O,A,k,P,I,16,a[34]),P=h(P,O,A,k,E,23,a[35]),k=h(k,P,O,A,l,4,a[36]),A=h(A,k,P,O,g,11,a[37]),O=h(O,A,k,P,y,16,a[38]),P=h(P,O,A,k,w,23,a[39]),k=h(k,P,O,A,C,4,a[40]),A=h(A,k,P,O,s,11,a[41]),O=h(O,A,k,P,p,16,a[42]),P=h(P,O,A,k,v,23,a[43]),k=h(k,P,O,A,b,4,a[44]),A=h(A,k,P,O,S,11,a[45]),O=h(O,A,k,P,T,16,a[46]),P=h(P,O,A,k,f,23,a[47]),k=d(k,P,O,A,s,6,a[48]),A=d(A,k,P,O,y,10,a[49]),O=d(O,A,k,P,E,15,a[50]),P=d(P,O,A,k,m,21,a[51]),k=d(k,P,O,A,S,6,a[52]),A=d(A,k,P,O,p,10,a[53]),O=d(O,A,k,P,w,15,a[54]),P=d(P,O,A,k,l,21,a[55]),k=d(k,P,O,A,_,6,a[56]),A=d(A,k,P,O,T,10,a[57]),O=d(O,A,k,P,v,15,a[58]),P=d(P,O,A,k,C,21,a[59]),k=d(k,P,O,A,g,6,a[60]),A=d(A,k,P,O,I,10,a[61]),O=d(O,A,k,P,f,15,a[62]),P=d(P,O,A,k,b,21,a[63]),o[0]=o[0]+k|0,o[1]=o[1]+P|0,o[2]=o[2]+O|0,o[3]=o[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);n[(i+64>>>9<<4)+15]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,n[(i+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,t.sigBytes=(n.length+1)*4,this._process();for(var s=this._hash,a=s.words,l=0;l<4;l++){var u=a[l];a[l]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function c(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(l),t.HmacMD5=o._createHmacHelper(l)}(Math),r.MD5)},2783:function(e,t,n){var r,i,o,s,a,l,u,c;e.exports=(s=(o=(i=r=n(8249)).lib).WordArray,a=o.Hasher,l=i.algo,u=[],c=l.SHA1=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=0;l<80;l++){if(l<16)u[l]=0|e[t+l];else{var c=u[l-3]^u[l-8]^u[l-14]^u[l-16];u[l]=c<<1|c>>>31}var h=(r<<5|r>>>27)+a+u[l];l<20?h+=(i&o|~i&s)+1518500249:l<40?h+=(i^o^s)+1859775393:l<60?h+=(i&o|i&s|o&s)-1894007588:h+=(i^o^s)-899497514,a=s,s=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=a._createHelper(c),i.HmacSHA1=a._createHmacHelper(c),r.SHA1)},8679:function(e,t,n){"use strict";var r=n(9864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=c(n);h&&(s=s.concat(h(n)));for(var a=l(t),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!o[v]&&!(r&&r[v])&&!(g&&g[v])&&!(a&&a[v])){var y=d(n,v);try{u(t,v,y)}catch(e){}}}}return t}},8041:function(e,t){function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[$]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===G}(e)||Array.isArray(e)||!!e[K]||!!(null===(t=e.constructor)||void 0===t?void 0:t[K])||h(e)||d(e))}function o(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:Y)(e).forEach(function(r){n&&"symbol"==typeof r||t(r,e[r],e)}):e.forEach(function(n,r){return t(r,n,e)})}function s(e){var t=e[$];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:h(e)?2:d(e)?3:0}function a(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===s(e)?e.get(t):e[t]}function u(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return z&&e instanceof Map}function d(e){return B&&e instanceof Set}function f(e){return e.i||e.u}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=J(e);delete t[$];for(var n=Y(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function g(e,t){return void 0===t&&(t=!1),v(e)||r(e)||!i(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=m),Object.freeze(e),t&&o(e,function(e,t){return g(t,!0)},!0)),e}function m(){n(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function y(e){var t=Z[e];return t||n(18,e),t}function _(e,t){Z[e]||(Z[e]=t)}function b(e,t){t&&(y("Patches"),e.o=[],e.v=[],e.s=t)}function w(e){I(e),e.p.forEach(C),e.p=null}function I(e){e===U&&(U=e.l)}function S(e){return U={p:[],l:U,h:e,_:!0,m:0}}function C(e){var t=e[$];0===t.t||1===t.t?t.j():t.O=!0}function E(e,t){t.m=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.S||y("ES5").P(t,e,o),o?(r[$].g&&(w(t),n(4)),i(e)&&(e=T(t,e),t.l||P(t,e)),t.o&&y("Patches").M(r[$].u,e,t.o,t.v)):e=T(t,r,[]),w(t),t.o&&t.s(t.o,t.v),e!==H?e:void 0}function T(e,t,n){if(v(t))return t;var r=t[$];if(!r)return o(t,function(i,o){return k(e,r,t,i,o,n)},!0),t;if(r.A!==e)return t;if(!r.g)return P(e,r.u,!0),r.u;if(!r.R){r.R=!0,r.A.m--;var i=4===r.t||5===r.t?r.i=p(r.k):r.i,s=i,a=!1;3===r.t&&(s=new Set(i),i.clear(),a=!0),o(s,function(t,o){return k(e,r,i,t,o,n,a)}),P(e,i,!1),n&&e.o&&y("Patches").F(r,n,e.o,e.v)}return r.i}function k(e,t,n,o,s,l,c){if(r(s)){var h=T(e,s,l&&t&&3!==t.t&&!a(t.N,o)?l.concat(o):void 0);if(u(n,o,h),!r(h))return;e._=!1}else c&&n.add(s);if(i(s)&&!v(s)){if(!e.h.D&&e.m<1)return;T(e,s),t&&t.A.l||P(e,s)}}function P(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e._&&g(t,n)}function O(e,t){var n=e[$];return(n?f(n):e)[t]}function A(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function R(e){e.g||(e.g=!0,e.l&&R(e.l))}function N(e){e.i||(e.i=p(e.u))}function D(e,t,n){var r,i,o,s,a,l,u,c=h(t)?y("MapSet").K(t,n):d(t)?y("MapSet").$(t,n):e.S?(o=i={t:(r=Array.isArray(t))?1:0,A:n?n.A:U,g:!1,R:!1,N:{},l:n,u:t,k:null,i:null,j:null,C:!1},s=X,r&&(o=[i],s=ee),l=(a=Proxy.revocable(o,s)).revoke,u=a.proxy,i.k=u,i.j=l,u):y("ES5").I(t,n);return(n?n.A:U).p.push(c),c}function x(e){return r(e)||n(22,e),function e(t){if(!i(t))return t;var n,r=t[$],a=s(t);if(r){if(!r.g&&(r.t<4||!y("ES5").J(r)))return r.u;r.R=!0,n=L(t,a),r.R=!1}else n=L(t,a);return o(n,function(t,i){r&&l(r.u,t)===i||u(n,t,e(i))}),3===a?new Set(n):n}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}function M(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){return X.get(this[$],e)},set:function(t){X.set(this[$],e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][$];if(!r.g)switch(r.t){case 5:i(r)&&R(r);break;case 4:n(r)&&R(r)}}}function n(e){for(var t=e.u,n=e.k,r=Y(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==$){var s=t[o];if(void 0===s&&!a(t,o))return!0;var l=n[o],u=l&&l[$];if(u?u.u!==s:!c(l,s))return!0}}var h=!!t[$];return r.length!==Y(t).length+(h?0:1)}function i(e){var t=e.k;if(t.length!==e.u.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var s={};_("ES5",{I:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=J(n);delete o[$];for(var s=Y(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={t:r?5:4,A:n?n.A:U,g:!1,R:!1,N:{},l:n,u:t,k:i,i:null,O:!1,C:!1};return Object.defineProperty(i,$,{value:o,writable:!0}),i},P:function(e,n,s){s?r(n)&&n[$].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var n=t[$];if(n){var r=n.u,s=n.k,l=n.N,u=n.t;if(4===u)o(s,function(t){t!==$&&(void 0!==r[t]||a(r,t)?l[t]||e(s[t]):(l[t]=!0,R(n)))}),o(r,function(e){void 0!==s[e]||a(s,e)||(l[e]=!1,R(n))});else if(5===u){if(i(n)&&(R(n),l.length=!0),s.length<r.length)for(var c=s.length;c<r.length;c++)l[c]=!1;else for(var h=r.length;h<s.length;h++)l[h]=!0;for(var d=Math.min(s.length,r.length),f=0;f<d;f++)s.hasOwnProperty(f)||(l[f]=!0),void 0===l[f]&&e(s[f])}}}}(e.p[0]),t(e.p))},J:function(e){return 4===e.t?n(e):i(e)}})}function j(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(h(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(d(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return a(t,K)&&(n[K]=t[K]),n}function t(t){return r(t)?e(t):t}_("Patches",{W:function(t,r){return r.forEach(function(r){for(var i=r.path,o=r.op,a=t,u=0;u<i.length-1;u++){var c=s(a),h=i[u];"string"!=typeof h&&"number"!=typeof h&&(h=""+h),0!==c&&1!==c||"__proto__"!==h&&"constructor"!==h||n(24),"function"==typeof a&&"prototype"===h&&n(24),"object"!=typeof(a=l(a,h))&&n(15,i.join("/"))}var d=s(a),f=e(r.value),p=i[i.length-1];switch(o){case"replace":switch(d){case 2:return a.set(p,f);case 3:n(16);default:return a[p]=f}case"add":switch(d){case 1:return"-"===p?a.push(f):a.splice(p,0,f);case 2:return a.set(p,f);case 3:return a.add(f);default:return a[p]=f}case"remove":switch(d){case 1:return a.splice(p,1);case 2:return a.delete(p);case 3:return a.delete(r.value);default:return delete a[p]}default:n(17,o)}}),t},F:function(e,n,r,i){var s,u,c,h,d;switch(e.t){case 0:case 4:case 2:return s=e.u,u=e.i,void o(e.N,function(e,o){var c=l(s,e),h=l(u,e),d=o?a(s,e)?"replace":"add":"remove";if(c!==h||"replace"!==d){var f=n.concat(e);r.push("remove"===d?{op:d,path:f}:{op:d,path:f,value:h}),i.push("add"===d?{op:"remove",path:f}:"remove"===d?{op:"add",path:f,value:t(c)}:{op:"replace",path:f,value:t(c)})}});case 5:case 1:return function(e,n,r,i){var o=e.u,s=e.N,a=e.i;if(a.length<o.length){var l=[a,o];o=l[0],a=l[1];var u=[i,r];r=u[0],i=u[1]}for(var c=0;c<o.length;c++)if(s[c]&&a[c]!==o[c]){var h=n.concat([c]);r.push({op:"replace",path:h,value:t(a[c])}),i.push({op:"replace",path:h,value:t(o[c])})}for(var d=o.length;d<a.length;d++){var f=n.concat([d]);r.push({op:"add",path:f,value:t(a[d])})}o.length<a.length&&i.push({op:"replace",path:n.concat(["length"]),value:o.length})}(e,n,r,i);case 3:return c=e.u,h=e.i,d=0,void(c.forEach(function(e){if(!h.has(e)){var t=n.concat([d]);r.push({op:"remove",path:t,value:e}),i.unshift({op:"add",path:t,value:e})}d++}),d=0,h.forEach(function(e){if(!c.has(e)){var t=n.concat([d]);r.push({op:"add",path:t,value:e}),i.unshift({op:"remove",path:t,value:e})}d++}))}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===H?void 0:t}),r.push({op:"replace",path:[],value:e})}})}function F(){function e(e,t){function n(){this.constructor=e}a(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.i||(e.N=new Map,e.i=new Map(e.u))}function r(e){e.i||(e.i=new Set,e.u.forEach(function(t){if(i(t)){var n=D(e.A.h,t,e);e.p.set(t,n),e.i.add(n)}else e.i.add(t)}))}function s(e){e.O&&n(3,JSON.stringify(f(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},l=function(){function n(e,t){return this[$]={t:2,l:t,A:t?t.A:U,g:!1,R:!1,i:void 0,N:void 0,u:e,k:this,C:!1,O:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return f(this[$]).size}}),r.has=function(e){return f(this[$]).has(e)},r.set=function(e,n){var r=this[$];return s(r),f(r).has(e)&&f(r).get(e)===n||(t(r),R(r),r.N.set(e,!0),r.i.set(e,n),r.N.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[$];return s(n),t(n),R(n),n.u.has(e)?n.N.set(e,!1):n.N.delete(e),n.i.delete(e),!0},r.clear=function(){var e=this[$];s(e),f(e).size&&(t(e),R(e),e.N=new Map,o(e.u,function(t){e.N.set(t,!1)}),e.i.clear())},r.forEach=function(e,t){var n=this;f(this[$]).forEach(function(r,i){e.call(t,n.get(i),i,n)})},r.get=function(e){var n=this[$];s(n);var r=f(n).get(e);if(n.R||!i(r)||r!==n.u.get(e))return r;var o=D(n.A.h,r,n);return t(n),n.i.set(e,o),o},r.keys=function(){return f(this[$]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[Q]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[Q]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[Q]=function(){return this.entries()},n}(),u=function(){function t(e,t){return this[$]={t:3,l:t,A:t?t.A:U,g:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return f(this[$]).size}}),n.has=function(e){var t=this[$];return s(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[$];return s(t),this.has(e)||(r(t),R(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[$];return s(t),r(t),R(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[$];s(e),f(e).size&&(r(e),R(e),e.i.clear())},n.values=function(){var e=this[$];return s(e),r(e),e.i.values()},n.entries=function(){var e=this[$];return s(e),r(e),e.i.entries()},n.keys=function(){return this.values()},n[Q]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();_("MapSet",{K:function(e,t){return new l(e,t)},$:function(e,t){return new u(e,t)}})}Object.defineProperty(t,"__esModule",{value:!0});var q,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),z="undefined"!=typeof Map,B="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((q={})["immer-nothing"]=!0,q),K=W?Symbol.for("immer-draftable"):"__$immer_draftable",$=W?Symbol.for("immer-state"):"__$immer_state",Q="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",G=""+Object.prototype.constructor,Y="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,J=Object.getOwnPropertyDescriptors||function(e){var t={};return Y(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Z={},X={get:function(e,t){if(t===$)return e;var n,r,o=f(e);if(!a(o,t))return(r=A(o,t))?"value"in r?r.value:null===(n=r.get)||void 0===n?void 0:n.call(e.k):void 0;var s=o[t];return e.R||!i(s)?s:s===O(e.u,t)?(N(e),e.i[t]=D(e.A.h,s,e)):s},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var r=A(f(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.g){var i=O(f(e),t),o=null==i?void 0:i[$];if(o&&o.u===n)return e.i[t]=n,e.N[t]=!1,!0;if(c(n,i)&&(void 0!==n||a(e.u,t)))return!0;N(e),R(e)}return e.i[t]===n&&(void 0!==n||t in e.i)||Number.isNaN(n)&&Number.isNaN(e.i[t])||(e.i[t]=n,e.N[t]=!0),!0},deleteProperty:function(e,t){return void 0!==O(e.u,t)||t in e.u?(e.N[t]=!1,N(e),R(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},ee={};o(X,function(e,t){ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ee.deleteProperty=function(e,t){return ee.set.call(this,e,t,void 0)},ee.set=function(e,t,n){return X.set.call(this,e[0],t,n,e[0])};var et=function(){function e(e){var t=this;this.S=V,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var s,a=r;return r=e,function(e){var n=this;void 0===e&&(e=a);for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(o))})}}if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var l=S(t),u=D(t,e,void 0),c=!0;try{s=r(u),c=!1}finally{c?w(l):I(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return b(l,o),E(e,l)},function(e){throw w(l),e}):(b(l,o),E(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===H&&(s=void 0),t.D&&g(s,!0),o){var h=[],d=[];y("Patches").M(e,s,h,d),o(h,d)}return s}n(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,function(t){return e.apply(void 0,[t].concat(i))})};var r,i,o=t.produce(e,n,function(e,t){r=e,i=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,r,i]}):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),r(e)&&(e=x(e));var t=S(this),o=D(this,e,void 0);return o[$].C=!0,I(t),o},t.finishDraft=function(e,t){var n=(e&&e[$]).A;return b(n,t),E(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!V&&n(20),this.S=e},t.applyPatches=function(e,t){for(n=t.length-1;n>=0;n--){var n,i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));var o=y("Patches").W;return r(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),en=new et,er=en.produce,ei=en.produceWithPatches.bind(en),eo=en.setAutoFreeze.bind(en),es=en.setUseProxies.bind(en),ea=en.applyPatches.bind(en),el=en.createDraft.bind(en),eu=en.finishDraft.bind(en);t.Immer=et,t.applyPatches=ea,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=el,t.current=x,t.default=er,t.enableAllPlugins=function(){M(),F(),j()},t.enableES5=M,t.enableMapSet=F,t.enablePatches=j,t.finishDraft=eu,t.freeze=g,t.immerable=K,t.isDraft=r,t.isDraftable=i,t.nothing=H,t.original=function(e){return r(e)||n(23,e),e[$].u},t.produce=er,t.produceWithPatches=ei,t.setAutoFreeze=eo,t.setUseProxies=es},6312:function(e,t,n){"use strict";e.exports=n(8041)},4530:function(e,t){(e.exports=function(e,t,r,i){return JSON.stringify(e,n(t,i),r)}).getSerialize=n;function n(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(i,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?r.splice(s,1/0,i):r.push(i),~n.indexOf(o)&&(o=t.call(this,i,o))}else n.push(o);return null==e?o:e.call(this,i,o)}}},3454:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(7663)},6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(4334)}])},8683:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(5893),i=n(7294);let o=(0,i.createContext)({currentLanguage:"en",setCurrentLanguage:()=>"he"});function s(e){let{children:t}=e,[n,s]=(0,i.useState)("en");return(0,r.jsx)(o.Provider,{value:{currentLanguage:n,setCurrentLanguage:s},children:t})}t.Z=o},4334:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(5893),i=n(7294),o=n(9008),s=n.n(o);n(4627);var a=n(8683),l=n(3746),u=n(1649);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){var t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=(e=(t=d(n)).call.apply(t,[this].concat(o)))&&("object"===c(e)||"function"==typeof e)?e:f(this),g(f(r),"state",{bootstrapped:!1}),g(f(r),"_unsubscribe",void 0),g(f(r),"handlePersistorState",function(){r.props.persistor.getState().bootstrapped&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,e),h(n.prototype,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t&&h(n,t),n}(i.PureComponent);g(m,"defaultProps",{children:null,loading:null});let v=(0,n(7786).p5)(l.ZP);var y=function(e){let{Component:t,pageProps:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("link",{rel:"icon",href:"/static/favicon.ico"})}),(0,r.jsx)(u.zt,{store:l.ZP,children:(0,r.jsx)(m,{persistor:v,loading:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(a.I,{children:(0,r.jsx)(t,{...n})})})})]})}},2700:function(e,t,n){"use strict";n.d(t,{I8:function(){return o},b8:function(){return u},bg:function(){return a},v4:function(){return c}}),n(7294);var r=n(7236),i=n(4866);n(2148),n(7921),i.Z.apps.length||i.Z.initializeApp({apiKey:"AIzaSyDW7ozYaZ9Z8_6pqHnyeVIJFNgwEkKrD_A",authDomain:"oratai-2018.firebaseapp.com",projectId:"oratai-2018",messagingSenderId:"376642946923",appId:"oratai-2018",databaseURL:"https://oratai-2018.firebaseio.com/"}),i.Z.database();let o=(0,r.createAsyncThunk)("auth/auth",async(e,t)=>{let{dispatch:n}=t,{email:r,password:o,isSignup:a}=e;try{let e={email:"",isAdmin:!1,localId:"",isAuthenticated:!1};if(a){let t=await i.Z.auth().createUserWithEmailAndPassword(r,o);t.user&&(await i.Z.database().ref("users/"+t.user.uid).set({email:r,isAdmin:!1}),e.localId=t.user.uid||"123",e.email=r,e.isAuthenticated=!0,e.isAdmin=!1)}else{let t=await i.Z.auth().signInWithEmailAndPassword(r,o);if(t.user){let i=t.user.uid,o=await n(s(i)).unwrap();e.localId=i,e.email=r,e.isAuthenticated=!0,e.isAdmin=o}}return n(c()),{...e}}catch(e){if(console.log("error",e),!e.response)throw e;return e}}),s=(0,r.createAsyncThunk)("auth/getisAdmin",async(e,t)=>{let{rejectWithValue:n,fulfillWithValue:r}=t,o=!1;try{return await i.Z.database().ref("users/"+e).once("value").then(e=>{o=e.val().isAdmin}),r(o)}catch(e){if(console.log("isadmin error",e),!e)throw e;return n(e)}}),a=(0,r.createAsyncThunk)("auth/authLogout",async(e,t)=>{let{rejectWithValue:n}=t;try{await i.Z.auth().signOut(),console.log("User signed out");return}catch(e){return console.log("Error signing out:",e),n(e)}}),l=(0,r.createSlice)({name:"auth",initialState:{isAuthenticated:!1,userId:"",error:"",loading:!1,authShow:!1,isAdmin:!1,userDetails:null,path:"/",email:""},reducers:{authOpen:e=>{e.authShow=!0,e.loading=!1},authClose:e=>{e.authShow=!1,e.loading=!0}},extraReducers:e=>{e.addCase(o.pending,e=>{e.error="",e.loading=!0}),e.addCase(o.fulfilled,(e,t)=>{e.isAuthenticated=!0,e.userId=t.payload.localId,e.error="",e.isAdmin=t.payload.isAdmin,e.loading=!1}),e.addCase(o.rejected,(e,t)=>{e.error=t.payload.toString(),e.isAuthenticated=!1,e.isAdmin=!1}),e.addCase(s.pending,e=>{e.error="",e.loading=!0}),e.addCase(s.fulfilled,(e,t)=>{e.isAdmin=t.payload,e.error="",e.loading=!1}),e.addCase(s.rejected,(e,t)=>{e.isAdmin=!1,e.error=t.payload.toString(),e.loading=!1}),e.addCase(a.pending,e=>{e.error="",e.loading=!0}),e.addCase(a.fulfilled,e=>{console.log("User signed out"),e.isAuthenticated=!1,e.userId="",e.isAdmin=!1,e.error="",e.loading=!1}),e.addCase(a.rejected,(e,t)=>{e.error=t.payload.toString()})}}),{authOpen:u,authClose:c}=l.actions;t.ZP=l.reducer},7863:function(e,t,n){"use strict";n.d(t,{Cy:function(){return d},F2:function(){return v},Ff:function(){return _},Hl:function(){return l},J6:function(){return g},Sz:function(){return p},dx:function(){return f},fF:function(){return y},gK:function(){return a},if:function(){return S},kw:function(){return m},t2:function(){return s},zG:function(){return u}}),n(7294);var r=n(7236),i=n(4866);n(2148),n(7921),i.Z.apps.length||i.Z.initializeApp({apiKey:"AIzaSyDW7ozYaZ9Z8_6pqHnyeVIJFNgwEkKrD_A",authDomain:"oratai-2018.firebaseapp.com",projectId:"oratai-2018",messagingSenderId:"376642946923",appId:"oratai-2018",databaseURL:"https://oratai-2018.firebaseio.com/"});let o=i.Z.database(),s=(0,r.createAsyncThunk)("products/fetchProducts",async(e,t)=>{let n=[];try{return o.ref("allProducts").on("value",e=>{let t=e.val(),r=Object.keys(t);n=r.map(e=>({id:e,...t[e]}))}),t.fulfillWithValue(n)}catch(e){if(console.log("fetchProducts error",e),!e)throw e;return t.rejectWithValue(e)}}),a=(0,r.createAsyncThunk)("products/addProduct",async(e,t)=>{try{let n=o.ref("allProducts"),r=n.push(),i=r.key;if(!i)throw Error("Failed to generate key for new product");return await r.set(e),console.log("addProduct saved successfully!"),t.fulfillWithValue(!0)}catch(e){return console.error("addProduct error",e),t.rejectWithValue(e)}}),l=(0,r.createAsyncThunk)("products/delProduct",async(e,t)=>{try{if(e)await o.ref("/allProducts/".concat(e)).remove();else throw Error("id of product is invalid or missing");return console.log("delProduct saved successfully!"),t.fulfillWithValue(!0)}catch(e){return console.log("delProduct error",e),t.rejectWithValue(e)}}),u=(0,r.createAsyncThunk)("products/editProduct",async(e,t)=>{var n={};n["/allProducts/"+e.id]=e.fireProduct,o.ref().update(n,e=>e?(console.log("editProduct error",e),t.rejectWithValue(e)):(console.log("editProduct saved successfully!"),t.fulfillWithValue(!0)))}),c=(0,r.createSlice)({name:"products",initialState:{loading:!0,error:"",orders_loading:!1,allProducts:[],productAdded:!1,add2AllShow:!1,prodShow:!1,currentProductId:"",editShow:!1,currentProductGroup:[],currentLanguage:"en",globalformIsValid:!1,pathname:"/"},reducers:{add2AllOpen:e=>{e.add2AllShow=!0},add2AllClose:e=>{e.add2AllShow=!1},openProductPage:e=>{e.prodShow=!0},closeProductPage:e=>{e.prodShow=!1},openEdit:(e,t)=>{e.currentProductId=t.payload,e.editShow=!0},closeEdit:e=>{e.editShow=!1},updateCurrentProductId:(e,t)=>{e.currentProductId=t.payload},updateCurrentProductGroup:(e,t)=>{e.currentProductGroup=t.payload,e.loading=!1},changeLanguages:(e,t)=>{e.currentLanguage=t.payload},updateAllProducts:(e,t)=>{e.allProducts=t.payload},closeAdded:e=>{e.productAdded=!1},openAdded:e=>{e.productAdded=!0},setPathname:(e,t)=>{e.pathname=t.payload},setgFormIsValid:(e,t)=>{e.globalformIsValid=t.payload}},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0}),e.addCase(s.fulfilled,(e,t)=>{e.allProducts=t.payload,e.loading=!1}),e.addCase(s.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}),e.addCase(u.pending,e=>{e.productAdded=!1,e.loading=!0}),e.addCase(u.fulfilled,e=>{e.productAdded=!0,e.loading=!1}),e.addCase(u.rejected,(e,t)=>{e.error=t.payload}),e.addCase(a.pending,e=>{e.productAdded=!1,e.loading=!0}),e.addCase(a.fulfilled,e=>{e.productAdded=!0,e.loading=!1,e.add2AllShow=!1}),e.addCase(a.rejected,(e,t)=>{e.error=t.payload.error,e.productAdded=!1,e.loading=!1}),e.addCase(l.pending,e=>{e.loading=!0,e.productAdded=!1}),e.addCase(l.fulfilled,e=>{e.loading=!1,e.productAdded=!0,e.editShow=!1,e.prodShow=!1}),e.addCase(l.rejected,e=>{e.error="",e.loading=!1})}}),h=c.actions,{add2AllOpen:d,add2AllClose:f,openProductPage:p,closeProductPage:g,openEdit:m,closeEdit:v,updateCurrentProductId:y,updateCurrentProductGroup:_,changeLanguages:b,updateAllProducts:w,closeAdded:I,openAdded:S,setPathname:C,setgFormIsValid:E}=h;t.ZP=c.reducer},3746:function(e,t,n){"use strict";n.d(t,{Gb:function(){return w},ZP:function(){return b},TP:function(){return I}});var r=n(7863),i=n(2700),o=n(8356),s=n(7236),a=n(9493),l=n(452),u=n(8249),c=n(4530),h=n(7786);let d=e=>Error(`redux-persist-transform-encrypt: ${e}`);var f=n(3488);let p=(0,f.Z)("local"),g=(0,o.UY)({products:r.ZP,auth:i.ZP}),m=[];{let e=((e,t)=>{if(void 0===e)throw d("No configuration provided.");let{secretKey:n}=e;if(!n)throw d("No secret key provided.");let r="function"==typeof e.onError?e.onError:console.warn;return(0,h.pH)((e,t)=>l.encrypt(c(e),n).toString(),(e,t)=>{if("string"!=typeof e)return r(d("Expected outbound state to be a string."));try{let t=l.decrypt(e,n).toString(u.enc.Utf8);if(!t)throw Error("Decrypted string is empty.");try{return JSON.parse(t)}catch{return r(d("Failed to parse state as JSON."))}}catch{return r(d("Could not decrypt state. Please verify that you are using the correct secret key."))}},void 0)})({secretKey:"AIzaSyDW7ozYaZ9Z8_6pqHnyeVIJFNgwEkKrD_A",onError:function(e){console.log("encrypt error",e)}});m=[e]}let v={key:"root",storage:p,transforms:m},y=(0,h.OJ)(v,g),_=(0,s.configureStore)({reducer:y,middleware:e=>{let t=e({serializableCheck:{ignoredActions:[h._P,h.I2,h.E7,h.ex,h.e,h.Nz]}});return t},devTools:!0});var b=_;(0,a.setupListeners)(_.dispatch);let w=e=>e.auth,I=e=>e.products},4627:function(){},7663:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var l=[],u=!1,c=-1;function h(){u&&r&&(u=!1,r.length?l=r.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new f(e,t)),1!==l.length||u||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},s=!0;try{t[e](o,o.exports,r),s=!1}finally{s&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},9008:function(e,t,n){e.exports=n(2636)},9921:function(e,t){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case m:case g:case l:return e;default:return t}}case i:return t}}}function I(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||w(e)===c},t.isConcurrentMode=I,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===y||e.$$typeof===_||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},9864:function(e,t,n){"use strict";e.exports=n(9921)},1649:function(e,t,n){"use strict";n.d(t,{zt:function(){return y},I0:function(){return w},v9:function(){return p}});var r=n(1688),i=n(2798),o=n(3935);let s=function(e){e()},a=()=>s;var l=n(7294);let u=(0,l.createContext)(null);function c(){let e=(0,l.useContext)(u);return e}let h=()=>{throw Error("uSES not initialized!")},d=h,f=(e,t)=>e===t,p=function(e=u){let t=e===u?c:()=>(0,l.useContext)(e);return function(e,n=f){let{store:r,subscription:i,getServerState:o}=t(),s=d(i.addNestedSub,r.getState,o||r.getState,e,n);return(0,l.useDebugValue)(s),s}}();n(8679),n(2973);let g={notify(){},get:()=>[]},m=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),v=m?l.useLayoutEffect:l.useEffect;var y=function({store:e,context:t,children:n,serverState:r}){let i=(0,l.useMemo)(()=>{let t=function(e,t){let n;let r=g;function i(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){let e=a(),t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let e=t;for(;e;)e.callback(),e=e.next})},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}let s={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return!!n},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=g)},getListeners:()=>r};return s}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0}},[e,r]),o=(0,l.useMemo)(()=>e.getState(),[e]);return v(()=>{let{subscription:t}=i;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),o!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}},[i,o]),l.createElement((t||u).Provider,{value:i},n)};function _(e=u){let t=e===u?c:()=>(0,l.useContext)(e);return function(){let{store:e}=t();return e}}let b=_(),w=function(e=u){let t=e===u?b:_(e);return function(){let e=t();return e.dispatch}}();d=i.useSyncExternalStoreWithSelector,r.useSyncExternalStore,s=o.unstable_batchedUpdates},8359:function(e,t){"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.module.reference")},2973:function(e,t,n){"use strict";n(8359)},7786:function(e,t,n){"use strict";n.d(t,{_P:function(){return i},E7:function(){return s},ex:function(){return a},e:function(){return l},Nz:function(){return u},I2:function(){return o},pH:function(){return k},OJ:function(){return _},p5:function(){return T}});var r="persist:",i="persist/FLUSH",o="persist/REHYDRATE",s="persist/PAUSE",a="persist/PERSIST",l="persist/PURGE",u="persist/REGISTER";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e,t,n,r){r.debug;var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);return e&&"object"===c(e)&&Object.keys(e).forEach(function(r){"_persist"!==r&&t[r]===n[r]&&(i[r]=e[r])}),i}function f(e){return JSON.stringify(e)}function p(e){var t,n=e.transforms||[],i="".concat(void 0!==e.keyPrefix?e.keyPrefix:r).concat(e.key),o=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:g,o.getItem(i).then(function(e){if(e)try{var r={},i=t(e);return Object.keys(i).forEach(function(e){r[e]=n.reduceRight(function(t,n){return n.out(t,e,i)},t(i[e]))}),r}catch(e){throw e}})}function g(e){return JSON.parse(e)}function m(e){}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t){var n=void 0!==e.version?e.version:-1;e.debug;var u=void 0===e.stateReconciler?d:e.stateReconciler,c=e.getStoredState||p,h=void 0!==e.timeout?e.timeout:5e3,g=null,v=!1,_=!0,b=function(e){return e._persist.rehydrated&&g&&!_&&g.update(e),e};return function(d,p){var w,I,S=d||{},C=S._persist,E=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(S,["_persist"]);if(p.type===a){var T=!1,k=function(t,n){T||(p.rehydrate(e.key,t,n),T=!0)};if(h&&setTimeout(function(){T||k(void 0,Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},h),_=!1,g||(g=function(e){var t,n=e.blacklist||null,i=e.whitelist||null,o=e.transforms||[],s=e.throttle||0,a="".concat(void 0!==e.keyPrefix?e.keyPrefix:r).concat(e.key),l=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:f;var u=e.writeFailHandler||null,c={},h={},d=[],p=null,g=null;function m(){if(0===d.length){p&&clearInterval(p),p=null;return}var e=d.shift(),n=o.reduce(function(t,n){return n.in(t,e,c)},c[e]);if(void 0!==n)try{h[e]=t(n)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete h[e];0===d.length&&(Object.keys(h).forEach(function(e){void 0===c[e]&&delete h[e]}),g=l.setItem(a,t(h)).catch(y))}function v(e){return(!i||-1!==i.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function y(e){u&&u(e)}return{update:function(e){Object.keys(e).forEach(function(t){v(t)&&c[t]!==e[t]&&-1===d.indexOf(t)&&d.push(t)}),Object.keys(c).forEach(function(t){void 0===e[t]&&v(t)&&-1===d.indexOf(t)&&void 0!==c[t]&&d.push(t)}),null===p&&(p=setInterval(m,s)),c=e},flush:function(){for(;0!==d.length;)m();return g||Promise.resolve()}}}(e)),C)return y({},t(E,p),{_persist:C});if("function"!=typeof p.rehydrate||"function"!=typeof p.register)throw Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return p.register(e.key),c(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then(function(e){k(e)},function(e){k(void 0,e)})},function(e){k(void 0,e)}),y({},t(E,p),{_persist:{version:n,rehydrated:!1}})}if(p.type===l)return v=!0,p.result((w=e.storage,I="".concat(void 0!==e.keyPrefix?e.keyPrefix:r).concat(e.key),w.removeItem(I,m))),y({},t(E,p),{_persist:C});if(p.type===i)return p.result(g&&g.flush()),y({},t(E,p),{_persist:C});if(p.type===s)_=!0;else if(p.type===o){if(v)return y({},E,{_persist:y({},C,{rehydrated:!0})});if(p.key===e.key){var P=t(E,p),O=p.payload;return b(y({},!1!==u&&void 0!==O?u(O,d,P,e):P,{_persist:y({},C,{rehydrated:!0})}))}}if(!C)return t(d,p);var A=t(E,p);return A===E?d:b(y({},A,{_persist:C}))}}var b=n(8356);function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){var r,i;r=e,i=n[t],t in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C={registry:[],bootstrapped:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return S({},e,{registry:[].concat(w(e.registry),[t.key])});case o:var n=e.registry.indexOf(t.key),r=w(e.registry);return r.splice(n,1),S({},e,{registry:r,bootstrapped:0===r.length});default:return e}};function T(e,t,n){var r=n||!1,c=(0,b.MT)(E,C,t&&t.enhancer?t.enhancer:void 0),h=function(e){c.dispatch({type:u,key:e})},d=function(t,n,i){var s={type:o,payload:n,err:i,key:t};e.dispatch(s),c.dispatch(s),r&&f.getState().bootstrapped&&(r(),r=!1)},f=S({},c,{purge:function(){var t=[];return e.dispatch({type:l,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return e.dispatch({type:i,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){e.dispatch({type:s})},persist:function(){e.dispatch({type:a,register:h,rehydrate:d})}});return t&&t.manualPersist||f.persist(),f}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.whitelist||null,i=n.blacklist||null;function o(e){return!!r&&-1===r.indexOf(e)||!!i&&-1!==i.indexOf(e)}return{in:function(t,n,r){return!o(n)&&e?e(t,n,r):t},out:function(e,n,r){return!o(n)&&t?t(e,n,r):e}}}},3488:function(e,t,n){"use strict";t.Z=function(e){var t=(0,i.default)(e);return{getItem:function(e){return new Promise(function(n,r){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(r,i){r(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,r){n(t.removeItem(e))})}}};var r,i=(r=n(7290))&&r.__esModule?r:{default:r}},7290:function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return!function(e){if(("undefined"==typeof self?"undefined":n(self))!=="object"||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(e){return!1}return!0}(t)?i:self[t]};var i={getItem:r,setItem:r,removeItem:r}},8356:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){!function(e,t,n){var i;i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===r(i)?i:String(i))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{Kf:function(){return u},md:function(){return m},DE:function(){return p},UY:function(){return d},qC:function(){return g},MT:function(){return c},jB:function(){return h}});var a="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function c(e,t,n){if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error(s(1));return n(c)(e,t)}if("function"!=typeof e)throw Error(s(2));var r,i=e,o=t,l=[],h=l,d=!1;function f(){h===l&&(h=l.slice())}function p(){if(d)throw Error(s(3));return o}function g(e){if("function"!=typeof e)throw Error(s(4));if(d)throw Error(s(5));var t=!0;return f(),h.push(e),function(){if(t){if(d)throw Error(s(6));t=!1,f();var n=h.indexOf(e);h.splice(n,1),l=null}}}function m(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(s(7));if(void 0===e.type)throw Error(s(8));if(d)throw Error(s(9));try{d=!0,o=i(o,e)}finally{d=!1}for(var t=l=h,n=0;n<t.length;n++)(0,t[n])();return e}return m({type:u.INIT}),(r={dispatch:m,subscribe:g,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw Error(s(10));i=e,m({type:u.REPLACE})}})[a]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(s(11));function t(){e.next&&e.next(p())}return t(),{unsubscribe:g(t)}}})[a]=function(){return this},e},r}var h=c;function d(e){for(var t,n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i];"function"==typeof e[o]&&(r[o]=e[o])}var a=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:u.INIT}))throw Error(s(12));if(void 0===n(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw Error(s(13))})}(r)}catch(e){t=e}return function(e,n){if(void 0===e&&(e={}),t)throw t;for(var i=!1,o={},l=0;l<a.length;l++){var u=a[l],c=r[u],h=e[u],d=c(h,n);if(void 0===d)throw n&&n.type,Error(s(14));o[u]=d,i=i||d!==h}return(i=i||a.length!==Object.keys(e).length)?o:e}}function f(e,t){return function(){return t(e.apply(this,arguments))}}function p(e,t){if("function"==typeof e)return f(e,t);if("object"!=typeof e||null===e)throw Error(s(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=f(i,t))}return n}function g(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw Error(s(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map(function(e){return e(i)});return r=g.apply(void 0,a)(n.dispatch),o(o({},n),{},{dispatch:r})}}}},8697:function(e,t,n){"use strict";n.r(t),n.d(t,{createSelector:function(){return a},createSelectorCreator:function(){return s},createStructuredSelector:function(){return l},defaultEqualityCheck:function(){return i},defaultMemoize:function(){return o}});var r="NOT_FOUND",i=function(e,t){return e===t};function o(e,t){var n,o,s="object"==typeof t?t:{equalityCheck:t},a=s.equalityCheck,l=s.maxSize,u=void 0===l?1:l,c=s.resultEqualityCheck,h=(n=void 0===a?i:a,function(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var r=e.length,i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}),d=1===u?{get:function(e){return o&&h(o.key,e)?o.value:r},put:function(e,t){o={key:e,value:t}},getEntries:function(){return o?[o]:[]},clear:function(){o=void 0}}:function(e,t){var n=[];function i(e){var i=n.findIndex(function(n){return t(e,n.key)});if(i>-1){var o=n[i];return i>0&&(n.splice(i,1),n.unshift(o)),o.value}return r}return{get:i,put:function(t,o){i(t)===r&&(n.unshift({key:t,value:o}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(u,h);function f(){var t=d.get(arguments);if(t===r){if(t=e.apply(null,arguments),c){var n=d.getEntries().find(function(e){return c(e.value,t)});n&&(t=n.value)}d.put(arguments,t)}return t}return f.clearCache=function(){return d.clear()},f}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=0,a={memoizeOptions:void 0},l=i.pop();if("object"==typeof l&&(a=l,l=i.pop()),"function"!=typeof l)throw Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=a.memoizeOptions,c=void 0===u?n:u,h=Array.isArray(c)?c:[c],d=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e}))throw Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ")+"]");return t}(i),f=e.apply(void 0,[function(){return s++,l.apply(null,arguments)}].concat(h)),p=e(function(){for(var e=[],n=d.length,r=0;r<n;r++)e.push(d[r].apply(null,arguments));return t=f.apply(null,e)});return Object.assign(p,{resultFunc:l,memoizedResultFunc:f,dependencies:d,lastResult:function(){return t},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),p}}var a=s(o),l=function(e,t){if(void 0===t&&(t=a),"object"!=typeof e)throw Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}},3250:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return a(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),s(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),i=n(1688),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]);var f=s(e,h[0],h[1]);return l(function(){d.hasValue=!0,d.value=f},[f]),c(f),f}},1688:function(e,t,n){"use strict";e.exports=n(3250)},2798:function(e,t,n){"use strict";e.exports=n(139)},2480:function(){},8180:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(4444),i=n(740),o=n(5816),s=n(3333);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,o._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,o.deleteApp)(this._delegate)))}_getService(e,t=o._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return r.isInitialized()||(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)!=="EXPLICIT"||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=o._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,o._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,o._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}let l=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),u=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e(){let t=/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t={},n={__esModule:!0,initializeApp:function(i,s={}){let a=o.initializeApp(i,s);if((0,r.r3)(t,a.name))return t[a.name];let l=new e(a,n);return t[a.name]=l,l},app:i,registerVersion:o.registerVersion,setLogLevel:o.setLogLevel,onLog:o.onLog,apps:null,SDK_VERSION:o.SDK_VERSION,INTERNAL:{registerComponent:function(t){let s=t.name,a=s.replace("-compat","");if(o._registerComponent(t)&&"PUBLIC"===t.type){let o=(e=i())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:s});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(o,t.serviceProps),n[a]=o,e.prototype[a]=function(...e){let n=this._getService.bind(this,s);return n.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:o}};function i(e){if(e=e||o._DEFAULT_ENTRY_NAME,!(0,r.r3)(t,e))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),c=new s.Yd("@firebase/app-compat");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,r.jU)()&&void 0!==self.firebase){c.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&c.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}let h=u;(0,o.registerVersion)("@firebase/app-compat","0.2.10",void 0)},5816:function(e,t,n){"use strict";let r,i;n.r(t),n.d(t,{FirebaseError:function(){return l.ZR},SDK_VERSION:function(){return F},_DEFAULT_ENTRY_NAME:function(){return T},_addComponent:function(){return A},_addOrOverwriteComponent:function(){return R},_apps:function(){return P},_clearComponents:function(){return L},_components:function(){return O},_getProvider:function(){return D},_registerComponent:function(){return N},_removeServiceInstance:function(){return x},deleteApp:function(){return z},getApp:function(){return U},getApps:function(){return W},initializeApp:function(){return q},onLog:function(){return V},registerVersion:function(){return B},setLogLevel:function(){return H}});var o,s=n(740),a=n(3333),l=n(4444);let u=(e,t)=>t.some(t=>e instanceof t),c=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,g={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(m(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(f.has(e))return f.get(e);let n="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(v(this),e),m(c.get(this))}:function(...e){return m(t.apply(v(this),e))}:function(e,...n){let r=t.call(v(this),e,...n);return d.set(r,e.sort?e.sort():[e]),m(r)}:(t instanceof IDBTransaction&&function(e){if(h.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});h.set(e,t)}(t),u(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,g):t;return n!==e&&(f.set(e,n),p.set(n,e)),n}let v=e=>p.get(e),y=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],b=new Map;function w(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,i=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||y.includes(n)))return;let o=async function(e,...t){let o=this.transaction(e,i?"readwrite":"readonly"),s=o.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),i&&o.done]))[0]};return b.set(t,o),o}g={...o=g,get:(e,t,n)=>w(e,t)||o.get(e,t,n),has:(e,t)=>!!w(e,t)||o.has(e,t)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e){this.container=e}getPlatformInfoString(){let e=this.container.getProviders();return e.map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let S="@firebase/app",C="0.9.10",E=new a.Yd("@firebase/app"),T="[DEFAULT]",k={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},P=new Map,O=new Map;function A(e,t){try{e.container.addComponent(t)}catch(n){E.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function R(e,t){e.container.addOrOverwriteComponent(t)}function N(e){let t=e.name;if(O.has(t))return E.debug(`There were multiple attempts to register component ${t}.`),!1;for(let n of(O.set(t,e),P.values()))A(n,e);return!0}function D(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function x(e,t,n=T){D(e,t).clearInstance(n)}function L(){O.clear()}let M=new l.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F="9.22.0";function q(e,t={}){let n=e;if("object"!=typeof t){let e=t;t={name:e}}let r=Object.assign({name:T,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw M.create("bad-app-name",{appName:String(i)});if(n||(n=(0,l.aH)()),!n)throw M.create("no-options");let o=P.get(i);if(o){if((0,l.vZ)(n,o.options)&&(0,l.vZ)(r,o.config))return o;throw M.create("duplicate-app",{appName:i})}let a=new s.H0(i);for(let e of O.values())a.addComponent(e);let u=new j(n,r,a);return P.set(i,u),u}function U(e=T){let t=P.get(e);if(!t&&e===T&&(0,l.aH)())return q();if(!t)throw M.create("no-app",{appName:e});return t}function W(){return Array.from(P.values())}async function z(e){let t=e.name;P.has(t)&&(P.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function B(e,t,n){var r;let i=null!==(r=k[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);let o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){let e=[`Unable to register library "${i}" with version "${t}":`];o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),E.warn(e.join(" "));return}N(new s.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function V(e,t){if(null!==e&&"function"!=typeof e)throw M.create("invalid-log-argument");(0,a.Am)(e,t)}function H(e){(0,a.Ub)(e)}let K="firebase-heartbeat-store",$=null;function Q(){return $||($=(function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(e,1),a=m(s);return r&&s.addEventListener("upgradeneeded",e=>{r(m(s.result),e.oldVersion,e.newVersion,m(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{0===t&&e.createObjectStore(K)}}).catch(e=>{throw M.create("idb-open",{originalErrorMessage:e.message})})),$}async function G(e){try{let t=await Q(),n=await t.transaction(K).objectStore(K).get(J(e));return n}catch(e){if(e instanceof l.ZR)E.warn(e.message);else{let t=M.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}async function Y(e,t){try{let n=await Q(),r=n.transaction(K,"readwrite"),i=r.objectStore(K);await i.put(t,J(e)),await r.done}catch(e){if(e instanceof l.ZR)E.warn(e.message);else{let t=M.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}function J(e){return`${e.name}!${e.options.appId}`}class Z{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ee(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=X();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))?void 0:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf(),n=Date.now();return n-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=X(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),et(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),et(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,l.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function X(){let e=new Date;return e.toISOString().substring(0,10)}class ee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,l.hl)()&&(0,l.eu)().then(()=>!0).catch(()=>!1)}async read(){let e=await this._canUseIndexedDBPromise;if(!e)return{heartbeats:[]};{let e=await G(this.app);return e||{heartbeats:[]}}}async overwrite(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;let n=await this._canUseIndexedDBPromise;if(n){let n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function et(e){return(0,l.L)(JSON.stringify({version:2,heartbeats:e})).length}N(new s.wA("platform-logger",e=>new I(e),"PRIVATE")),N(new s.wA("heartbeat",e=>new Z(e),"PRIVATE")),B(S,C,""),B(S,C,"esm2017"),B("fire-js","")},740:function(e,t,n){"use strict";n.d(t,{H0:function(){return a},wA:function(){return i},zt:function(){return s}});var r=n(4444);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=o){return this.instances.has(e)}getOptions(e=o){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){var n;let r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:e===o?void 0:e,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=o){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){let t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,n){"use strict";var r,i;n.d(t,{Am:function(){return d},Ub:function(){return h},Yd:function(){return c},in:function(){return r}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o=[];(i=r||(r={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";let s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},a=r.INFO,l={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=l[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=u,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}function h(e){o.forEach(t=>{t.setLogLevel(e)})}function d(e,t){for(let n of o){let i=null;t&&t.level&&(i=s[t.level]),null===e?n.userLogHandler=null:n.userLogHandler=(t,n,...o)=>{let s=o.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:r[n].toLowerCase(),message:s,args:o,type:t.name})}}}},4866:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(8180);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.Z.registerVersion("firebase","9.22.0","app-compat")},2148:function(e,t,n){"use strict";var r,i,o=n(8180),s=n(4444),a=n(5816);function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var u=n(3333),c=n(740);let h={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},d={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function f(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let p=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},g=new s.LL("auth","Firebase",f()),m=new u.Yd("@firebase/auth");function v(e,...t){m.logLevel<=u.in.ERROR&&m.error(`Auth (${a.SDK_VERSION}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e,...t){throw I(e,...t)}function _(e,...t){return I(e,...t)}function b(e,t,n){let r=Object.assign(Object.assign({},f()),{[t]:n}),i=new s.LL("auth","Firebase",r);return i.create(t,{appName:e.name})}function w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&y(e,"argument-error"),b(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I(e,...t){if("string"!=typeof e){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return g.create(e,...t)}function S(e,t,...n){if(!e)throw I(t,...n)}function C(e){let t="INTERNAL ASSERTION FAILED: "+e;throw v(t),Error(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function T(){return"http:"===k()||"https:"===k()}function k(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e,t){this.shortDelay=e,this.longDelay=t,t>e||C("Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(T()||(0,s.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(e,t){e.emulator||C("Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void C("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void C("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void C("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},N=new P(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function x(e,t,n,r,i={}){return L(e,i,async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});let a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),A.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},i))})}async function L(e,t,n){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},R),t);try{let t=new F(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let o=await i.json();if("needConfirmation"in o)throw q(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{let t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw q(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw q(e,"user-disabled",o);let a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw b(e,a,s);y(e,a)}}catch(t){if(t instanceof s.ZR)throw t;y(e,"network-request-failed",{message:String(t)})}}async function M(e,t,n,r,i={}){let o=await x(e,t,n,r,i);return"mfaPendingCredential"in o&&y(e,"multi-factor-auth-required",{_serverResponse:o}),o}function j(e,t,n,r){let i=`${t}${n}?${r}`;return e.config.emulator?O(e.config,i):`${e.config.apiScheme}://${i}`}class F{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_(this.auth,"network-request-failed")),N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U(e,t){return x(e,"POST","/v1/accounts:delete",t)}async function W(e,t){return x(e,"POST","/v1/accounts:update",t)}async function z(e,t){return x(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function V(e,t=!1){let n=(0,s.m9)(e),r=await n.getIdToken(t),i=K(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:B(H(i.auth_time)),issuedAtTime:B(H(i.iat)),expirationTime:B(H(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function H(e){return 1e3*Number(e)}function K(e){let[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return v("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,s.tV)(n);if(!e)return v("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return v("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof s.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;let e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=B(this.lastLoginAt),this.creationTime=B(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y(e){var t;let n=e.auth,r=await e.getIdToken(),i=await $(e,z(n,{idToken:r}));S(null==i?void 0:i.users.length,n,"internal-error");let o=i.users[0];e._notifyReloadListener(o);let s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=l(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],a=function(e,t){let n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,s),u=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null==a?void 0:a.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new G(o.createdAt,o.lastLoginAt),isAnonymous:!!u&&c};Object.assign(e,h)}async function J(e){let t=(0,s.m9)(e);await Y(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z(e,t){let n=await L(e,{},async()=>{let n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=j(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",A.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(void 0!==e.idToken,"internal-error"),S(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){let t=K(e);return S(t,"internal-error"),S(void 0!==t.exp,"internal-error"),S(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return(S(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await Z(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){let{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new X;return n&&(S("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(S("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(S("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return C("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(e,t){S("string"==typeof e||void 0===e,"internal-error",{appName:t})}class et{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=l(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await $(this,this.stsTokenManager.getToken(this.auth,e));return S(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return V(this,e)}reload(){return J(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new et(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Y(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await $(this,U(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,u;let c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:I}=t;S(y&&I,e,"internal-error");let C=X.fromJSON(this.name,I);S("string"==typeof y,e,"internal-error"),ee(c,e.name),ee(h,e.name),S("boolean"==typeof _,e,"internal-error"),S("boolean"==typeof b,e,"internal-error"),ee(d,e.name),ee(f,e.name),ee(p,e.name),ee(g,e.name),ee(m,e.name),ee(v,e.name);let E=new et({uid:y,auth:e,email:h,emailVerified:_,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:m,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t,n=!1){let r=new X;r.updateFromServerResponse(t);let i=new et({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Y(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=new Map;function er(e){e instanceof Function||C("Expected a class definition");let t=en.get(e);return t?(t instanceof e||C("Instance stored in cache mismatched with class"),t):(t=new e,en.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(e,t,n){return`firebase:${e}:${t}:${n}`}ei.type="NONE";class es{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=eo(this.userKey,r.apiKey,i),this.fullPersistenceKey=eo("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?et._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new es(er(ei),e,n);let r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),i=r[0]||er(ei),o=eo(n,e.config.apiKey,e.name),s=null;for(let n of t)try{let t=await n._get(o);if(t){let r=et._fromJSON(e,t);n!==i&&(s=r),i=n;break}}catch(e){}let a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length&&(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(e){}}))),new es(i,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(eh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";{if(t.includes("edge/"))return"Edge";if(el(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ef(t))return"Blackberry";if(ep(t))return"Webos";if(eu(t))return"Safari";if((t.includes("chrome/")||ec(t))&&!t.includes("edge/"))return"Chrome";if(ed(t))return"Android";let n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==n?void 0:n.length)===2)return n[1]}return"Other"}function el(e=(0,s.z$)()){return/firefox\//i.test(e)}function eu(e=(0,s.z$)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ec(e=(0,s.z$)()){return/crios\//i.test(e)}function eh(e=(0,s.z$)()){return/iemobile/i.test(e)}function ed(e=(0,s.z$)()){return/android/i.test(e)}function ef(e=(0,s.z$)()){return/blackberry/i.test(e)}function ep(e=(0,s.z$)()){return/webos/i.test(e)}function eg(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function em(e=(0,s.z$)()){return eg(e)||ed(e)||ep(e)||ef(e)||/windows phone/i.test(e)||eh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(e,t=[]){let n;switch(e){case"Browser":n=ea((0,s.z$)());break;case"Worker":n=`${ea((0,s.z$)())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${a.SDK_VERSION}/${r}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(e){return(await x(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function e_(e,t){return x(e,"GET","/v2/recaptchaConfig",D(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(e){return void 0!==e&&void 0!==e.getResponse}function ew(e){return void 0!==e&&void 0!==e.enterprise}class eI{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function eS(e){return new Promise((t,n)=>{var r,i;let o=document.createElement("script");o.setAttribute("src",e),o.onload=t,o.onerror=e=>{let t=_("internal-error");t.customData=e,n(t)},o.type="text/javascript",o.charset="UTF-8",(null!==(i=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==i?i:document).appendChild(o)})}function eC(e){return`__${e}${Math.floor(1e6*Math.random())}`}class eE{constructor(e){this.type="recaptcha-enterprise",this.auth=eO(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{e_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0===r.recaptchaKey)n(Error("recaptcha Enterprise site key undefined"));else{let n=new eI(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;ew(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&ew(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window){i(Error("RecaptchaVerifier is only supported in browser"));return}eS("https://www.google.com/recaptcha/enterprise.js?render="+n).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function eT(e,t,n,r=!1){let i;let o=new eE(e);try{i=await o.verify(n)}catch(e){i=await o.verify(n,!0)}let s=Object.assign({},t);return r?Object.assign(s,{captchaResp:i}):Object.assign(s,{captchaResponse:i}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eA(this),this.idTokenSubscription=new eA(this),this.beforeStateQueue=new ek(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=er(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await es.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);(!n||n===o)&&(null==s?void 0:s.user)&&(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return(S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId)?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Y(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?(0,s.m9)(e):null;return t&&S(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}async initializeRecaptchaConfig(){let e=await e_(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new eI(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){let e=new eE(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&er(e)||this._popupRedirectResolver;S(t,this,"argument-error"),this.redirectPersistenceManager=await es.create(this,[er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return(this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return(S(o,this,"internal-error"),o.then(()=>i(this.currentUser)),"function"==typeof t)?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let n=await (null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;let t=await (null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){m.logLevel<=u.in.WARN&&m.warn(`Auth (${a.SDK_VERSION}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function eO(e){return(0,s.m9)(e)}class eA{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function eR(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eN(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return C("not implemented")}_getIdTokenResponse(e){return C("not implemented")}_linkToIdToken(e,t){return C("not implemented")}_getReauthenticationResolver(e){return C("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(e,t){return x(e,"POST","/v1/accounts:resetPassword",D(e,t))}async function eL(e,t){return x(e,"POST","/v1/accounts:update",t)}async function eM(e,t){return x(e,"POST","/v1/accounts:update",D(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",D(e,t))}async function eF(e,t){return x(e,"POST","/v1/accounts:sendOobCode",D(e,t))}async function eq(e,t){return eF(e,t)}async function eU(e,t){return eF(e,t)}async function eW(e,t){return eF(e,t)}async function ez(e,t){return eF(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eB(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}async function eV(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH extends eD{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new eH(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new eH(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t||!t.emailPasswordEnabled)return ej(e,n).catch(async t=>{if("auth/missing-recaptcha-token"!==t.code)return Promise.reject(t);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let t=await eT(e,n,"signInWithPassword");return ej(e,t)}});{let t=await eT(e,n,"signInWithPassword");return ej(e,t)}case"emailLink":return eB(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eL(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return eV(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eK(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",D(e,t))}class e$ extends eD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new e$(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=l(t,["providerId","signInMethod"]);if(!n||!r)return null;let o=new e$(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return eK(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,eK(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eK(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eQ(e,t){return x(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))}async function eG(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))}async function eY(e,t){let n=await M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw q(e,"account-exists-with-different-credential",n);return n}let eJ={USER_NOT_FOUND:"user-not-found"};async function eZ(e,t){let n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return M(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,n),eJ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX extends eD{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eX({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eX({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return eG(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return eY(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eZ(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new eX({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class e0{constructor(e){var t,n,r,i,o,a;let l=(0,s.zd)((0,s.pd)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(n=l.oobCode)&&void 0!==n?n:null,h=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);S(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!==(i=l.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){let t=function(e){let t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id,i=r?(0,s.zd)((0,s.pd)(r)).link:null;return i||r||n||t||e}(e);try{return new e0(t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.providerId=e1.PROVIDER_ID}static credential(e,t){return eH._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=e0.parseLink(t);return S(n,"argument-error"),eH._fromEmailAndCode(e,n.code,n.tenantId)}}e1.PROVIDER_ID="password",e1.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4 extends e2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class e3 extends e4{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return S("providerId"in t&&"signInMethod"in t,"argument-error"),e$._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return S(e.idToken||e.accessToken,"argument-error"),e$._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return e3.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return e3.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:o,providerId:s}=e;if(!n&&!r&&!t&&!i||!s)return null;try{return new e3(s)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:i})}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6 extends e4{constructor(){super("facebook.com")}static credential(e){return e$._fromParams({providerId:e6.PROVIDER_ID,signInMethod:e6.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e6.credentialFromTaggedObject(e)}static credentialFromError(e){return e6.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e6.credential(e.oauthAccessToken)}catch(e){return null}}}e6.FACEBOOK_SIGN_IN_METHOD="facebook.com",e6.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5 extends e4{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return e$._fromParams({providerId:e5.PROVIDER_ID,signInMethod:e5.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return e5.credentialFromTaggedObject(e)}static credentialFromError(e){return e5.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return e5.credential(t,n)}catch(e){return null}}}e5.GOOGLE_SIGN_IN_METHOD="google.com",e5.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8 extends e4{constructor(){super("github.com")}static credential(e){return e$._fromParams({providerId:e8.PROVIDER_ID,signInMethod:e8.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e8.credentialFromTaggedObject(e)}static credentialFromError(e){return e8.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e8.credential(e.oauthAccessToken)}catch(e){return null}}}e8.GITHUB_SIGN_IN_METHOD="github.com",e8.PROVIDER_ID="github.com";class e9 extends eD{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){let t=this.buildRequest();return eK(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,eK(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eK(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new e9(n,i):null}static _create(e,t){return new e9(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class e7 extends e2{constructor(e){S(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return e7.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return e7.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){let t=e9.fromJSON(e);return S(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return e9._create(n,t)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te extends e4{constructor(){super("twitter.com")}static credential(e,t){return e$._fromParams({providerId:te.PROVIDER_ID,signInMethod:te.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return te.credentialFromTaggedObject(e)}static credentialFromError(e){return te.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return te.credential(t,n)}catch(e){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tt(e,t){return M(e,"POST","/v1/accounts:signUp",D(e,t))}te.TWITTER_SIGN_IN_METHOD="twitter.com",te.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){let i=await et._fromIdTokenResponse(e,n,r),o=tr(n),s=new tn({user:i,providerId:o,_tokenResponse:n,operationType:t});return s}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);let r=tr(n);return new tn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function tr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ti(e){var t;let n=eO(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new tn({user:n.currentUser,providerId:null,operationType:"signIn"});let r=await tt(n,{returnSecureToken:!0}),i=await tn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,to.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new to(e,t,n,r)}}function ts(e,t,n,r){let i="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return i.catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw to._fromErrorAndOperation(e,n,t,r);throw n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(e,t){let n=(0,s.m9)(e);await tc(!0,n,t);let{providerUserInfo:r}=await W(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=ta(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function tu(e,t,n=!1){let r=await $(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tn._forOperation(e,"link",r)}async function tc(e,t,n){await Y(t);let r=ta(t.providerData);S(r.has(n)===e,t.auth,!1===e?"provider-already-linked":"no-such-provider")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(e,t,n=!1){let{auth:r}=e,i="reauthenticate";try{let o=await $(e,ts(r,i,t,e),n);S(o.idToken,r,"internal-error");let s=K(o.idToken);S(s,r,"internal-error");let{sub:a}=s;return S(e.uid===a,r,"user-mismatch"),tn._forOperation(e,i,o)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&y(r,"user-mismatch"),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(e,t,n=!1){let r="signIn",i=await ts(e,r,t),o=await tn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function tf(e,t){return td(eO(e),t)}async function tp(e,t){let n=(0,s.m9)(e);return await tc(!1,n,t.providerId),tu(n,t)}async function tg(e,t){return th((0,s.m9)(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tm(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",D(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tv(e,t){let n=eO(e),r=await tm(n,{token:t,returnSecureToken:!0}),i=await tn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?t_._fromServerResponse(e,t):"totpInfo"in t?tb._fromServerResponse(e,t):y(e,"internal-error")}}class t_ extends ty{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new t_(t)}}class tb extends ty{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new tb(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(e,t,n){var r;S((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),S(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(S(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(S(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(e,t,n){var r;let i=eO(e),o={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){let e=await eT(i,o,"getOobCode",!0);n&&tw(i,e,n),await eU(i,e)}else n&&tw(i,o,n),await eU(i,o).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");let e=await eT(i,o,"getOobCode",!0);n&&tw(i,e,n),await eU(i,e)}})}async function tS(e,t,n){await ex((0,s.m9)(e),{oobCode:t,newPassword:n})}async function tC(e,t){await eM((0,s.m9)(e),{oobCode:t})}async function tE(e,t){let n=(0,s.m9)(e),r=await ex(n,{oobCode:t}),i=r.requestType;switch(S(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":S(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":S(r.mfaInfo,n,"internal-error");default:S(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=ty._fromServerResponse(eO(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function tT(e,t){let{data:n}=await tE((0,s.m9)(e),t);return n.email}async function tk(e,t,n){var r;let i;let o=eO(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};if(null===(r=o._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){let e=await eT(o,s,"signUpPassword");i=tt(o,e)}else i=tt(o,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");let e=await eT(o,s,"signUpPassword");return tt(o,e)}});let a=await i.catch(e=>Promise.reject(e)),l=await tn._fromIdTokenResponse(o,"signIn",a);return await o._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(e,t,n){var r;let i=eO(e),o={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function s(e,t){S(t.handleCodeInApp,i,"argument-error"),t&&tw(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){let e=await eT(i,o,"getOobCode",!0);s(e,n),await eW(i,e)}else s(o,n),await eW(i,o).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let e=await eT(i,o,"getOobCode",!0);s(e,n),await eW(i,e)}})}async function tO(e,t,n){let r=(0,s.m9)(e),i=e1.credentialWithLink(t,n||E());return S(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),tf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(e,t){return x(e,"POST","/v1/accounts:createAuthUri",D(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(e,t){let n=T()?E():"http://localhost",{signinMethods:r}=await tA((0,s.m9)(e),{identifier:t,continueUri:n});return r||[]}async function tN(e,t){let n=(0,s.m9)(e),r=await e.getIdToken(),i={requestType:"VERIFY_EMAIL",idToken:r};t&&tw(n.auth,i,t);let{email:o}=await eq(n.auth,i);o!==e.email&&await e.reload()}async function tD(e,t,n){let r=(0,s.m9)(e),i=await e.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:t};n&&tw(r.auth,o,n);let{email:a}=await ez(r.auth,o);a!==e.email&&await e.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(e,t){return x(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;let r=(0,s.m9)(e),i=await r.getIdToken(),o=await $(r,tx(r.auth,{idToken:i,displayName:t,photoUrl:n,returnSecureToken:!0}));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;let a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}async function tM(e,t,n){let{auth:r}=e,i=await e.getIdToken(),o={idToken:i,returnSecureToken:!0};t&&(o.email=t),n&&(o.password=n);let s=await $(e,eL(r,o));await e._updateTokensIfNecessary(s,!0)}class tj{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class tF extends tj{constructor(e,t,n,r){super(e,t,n),this.username=r}}class tq extends tj{constructor(e,t){super(e,"facebook.com",t)}}class tU extends tF{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class tW extends tj{constructor(e,t){super(e,"google.com",t)}}class tz extends tF{constructor(e,t,n){super(e,"twitter.com",t,n)}}class tB{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new tB("enroll",e,t)}static _fromMfaPendingCredential(e){return new tB("signin",e)}toJSON(){let e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return tB._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return tB._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){let n=eO(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>ty._fromServerResponse(n,e));S(r.mfaPendingCredential,n,"internal-error");let o=tB._fromMfaPendingCredential(r.mfaPendingCredential);return new tV(o,i,async e=>{let i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;let s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":let a=await tn._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(a.user),a;case"reauthenticate":return S(t.user,n,"internal-error"),tn._forOperation(t.user,t.operationType,s);default:y(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}class tH{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>ty._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new tH(e)}async getSession(){return tB._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){let n=await this.getSession(),r=await $(this.user,e._process(this.user.auth,n,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){let t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{var r;let e=await $(this.user,(r=this.user.auth,x(r,"POST","/v2/accounts/mfaEnrollment:withdraw",D(r,{idToken:n,mfaEnrollmentId:t}))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}let tK=new WeakMap,t$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(t$,"1"),this.storage.removeItem(t$),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class tG extends tQ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let e=(0,s.z$)();return eu(e)||eg(e)}()&&function(){try{return!!(window&&window!==window.top)}catch(e){return!1}}(),this.fallbackToPolling=em(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}let r=()=>{let e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tG.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY extends tQ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tY.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let n=new tJ(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:n,data:r}=e.data,i=this.handlersMap[n];if(!(null==i?void 0:i.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:n});let o=Array.from(i).map(async t=>t(e.origin,r)),s=await Promise.all(o.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:n,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}tJ.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r,i;let o="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!o)throw Error("connection_unavailable");return new Promise((s,a)=>{let l=tZ("",20);o.port1.start();let u=setTimeout(()=>{a(Error("unsupported_event"))},n);i={messageChannel:o,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{a(Error("timeout"))},3e3);break;case"done":clearTimeout(r),s(e.data.response);break;default:clearTimeout(u),clearTimeout(r),a(Error("invalid_response"))}}},this.handlers.add(i),o.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[o.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(){return void 0!==t0().WorkerGlobalScope&&"function"==typeof t0().importScripts}async function t2(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t4="firebaseLocalStorageDb",t3="firebaseLocalStorage",t6="fbase_key";class t5{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function t8(e,t){return e.transaction([t3],t?"readwrite":"readonly").objectStore(t3)}function t9(){let e=indexedDB.open(t4,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(t3,{keyPath:t6})}catch(e){n(e)}}),e.addEventListener("success",async()=>{let n=e.result;n.objectStoreNames.contains(t3)?t(n):(n.close(),await function(){let e=indexedDB.deleteDatabase(t4);return new t5(e).toPromise()}(),t(await t9()))})})}async function t7(e,t,n){let r=t8(e,!0).put({[t6]:t,value:n});return new t5(r).toPromise()}async function ne(e,t){let n=t8(e,!1).get(t),r=await new t5(n).toPromise();return void 0===r?null:r.value}function nt(e,t){let n=t8(e,!0).delete(t);return new t5(n).toPromise()}class nn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await t9()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tJ._getInstance(t1()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>{let n=await this._poll();return{keyProcessed:n.includes(t.key)}}),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await t2(),!this.activeServiceWorker)return;this.sender=new tX(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null==navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await t9();return await t7(e,t$,"1"),await nt(e,t$),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>t7(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>ne(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=t8(e,!1).getAll();return new t5(t).toPromise()});if(!e||0!==this.pendingWrites)return[];let t=[],n=new Set;for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}nn.type="LOCAL";class nr{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){let n=this.counter;return this._widgets.set(n,new ni(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;let n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||1e12))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;return null===(t=this._widgets.get(e||1e12))||void 0===t||t.execute(),""}}class ni{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r="string"==typeof e?document.getElementById(e):e;S(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){let t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(0);let{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw Error("reCAPTCHA mock was already deleted!")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=eC("rcb"),ns=new P(3e4,6e4);class na{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=t0().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return(S(t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(t)&&eb(t0().grecaptcha))?Promise.resolve(t0().grecaptcha):new Promise((n,r)=>{let i=t0().setTimeout(()=>{r(_(e,"network-request-failed"))},ns.get());t0()[no]=()=>{t0().clearTimeout(i),delete t0()[no];let o=t0().grecaptcha;if(!o||!eb(o)){r(_(e,"internal-error"));return}let s=o.render;o.render=(e,t)=>{let n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};let o=`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:no,render:"explicit",hl:t})}`;eS(o).catch(()=>{clearTimeout(i),r(_(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=t0().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nl{async load(e){return new nr(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu="recaptcha",nc={theme:"light",type:"image"};class nh{constructor(e,t=Object.assign({},nc),n){this.parameters=t,this.type=nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=eO(n),this.isInvisible="invisible"===this.parameters.size,S("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");let r="string"==typeof e?document.getElementById(e):e;S(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nl:new na,this.validateStartingState()}async verify(){this.assertNotDestroyed();let e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{let r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){let n=t0()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){let e;S(T()&&!t1(),this.auth,"internal-error"),await (e=null,new Promise(t=>{if("complete"===document.readyState){t();return}e=()=>t(),window.addEventListener("load",e)}).catch(t=>{throw e&&window.removeEventListener("load",e),t})),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let t=await ey(this.auth);S(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){let t=eX._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function nf(e,t,n){let r=eO(e),i=await nm(r,t,(0,s.m9)(n));return new nd(i,e=>tf(r,e))}async function np(e,t,n){let r=(0,s.m9)(e);await tc(!1,r,"phone");let i=await nm(r.auth,t,(0,s.m9)(n));return new nd(i,e=>tp(r,e))}async function ng(e,t,n){let r=(0,s.m9)(e),i=await nm(r.auth,t,(0,s.m9)(n));return new nd(i,e=>tg(r,e))}async function nm(e,t,n){var r,i,o;let s=await n.verify();try{let a;if(S("string"==typeof s,e,"argument-error"),S(n.type===nu,e,"argument-error"),a="string"==typeof t?{phoneNumber:t}:t,"session"in a){let t=a.session;if("phoneNumber"in a){S("enroll"===t.type,e,"internal-error");let n=await (i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:s}},x(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,i)));return n.phoneSessionInfo.sessionInfo}{S("signin"===t.type,e,"internal-error");let n=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;S(n,e,"missing-multi-factor-info");let i=await (o={mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}},x(e,"POST","/v2/accounts/mfaSignIn:start",D(e,o)));return i.phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await eQ(e,{phoneNumber:a.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}async function nv(e,t){await tu((0,s.m9)(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.providerId=ny.PROVIDER_ID,this.auth=eO(e)}verifyPhoneNumber(e,t){return nm(this.auth,e,(0,s.m9)(t))}static credential(e,t){return eX._fromVerification(e,t)}static credentialFromResult(e){return ny.credentialFromTaggedObject(e)}static credentialFromError(e){return ny.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?eX._fromTokenResponse(t,n):null}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(e,t){return t?er(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ny.PROVIDER_ID="phone",ny.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eK(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eK(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eK(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nw(e){return td(e.auth,new nb(e),e.bypassAuthState)}function nI(e){let{auth:t,user:n}=e;return S(n,t,"internal-error"),th(n,new nb(e),e.bypassAuthState)}async function nS(e){let{auth:t,user:n}=e;return S(n,t,"internal-error"),tu(n,new nb(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o){this.reject(o);return}let a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nw;case"linkViaPopup":case"linkViaRedirect":return nS;case"reauthViaPopup":case"reauthViaRedirect":return nI;default:y(this.auth,"internal-error")}}resolve(e){this.pendingPromise||C("Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){this.pendingPromise||C("Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nE=new P(2e3,1e4);async function nT(e,t,n){let r=eO(e);w(e,t,e2);let i=n_(r,n),o=new nO(r,"signInViaPopup",t,i);return o.executeNotNull()}async function nk(e,t,n){let r=(0,s.m9)(e);w(r.auth,t,e2);let i=n_(r.auth,n),o=new nO(r.auth,"reauthViaPopup",t,i,r);return o.executeNotNull()}async function nP(e,t,n){let r=(0,s.m9)(e);w(r.auth,t,e2);let i=n_(r.auth,n),o=new nO(r.auth,"linkViaPopup",t,i,r);return o.executeNotNull()}class nO extends nC{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,nO.currentPopupAction&&nO.currentPopupAction.cancel(),nO.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return S(e,this.auth,"internal-error"),e}async onExecution(){1===this.filter.length||C("Popup operations only handle one event");let e=tZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nO.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,n;if(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nE.get())};e()}}nO.currentPopupAction=null;let nA=new Map;class nR extends nC{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=nA.get(this.auth._key());if(!e){try{let t=await nN(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}nA.set(this.auth._key(),e)}return this.bypassAuthState||nA.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nN(e,t){let n=nM(t),r=nL(e);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}async function nD(e,t){return nL(e)._set(nM(t),"true")}function nx(e,t){nA.set(e._key(),t)}function nL(e){return er(e._redirectPersistence)}function nM(e){return eo("pendingRedirect",e.config.apiKey,e.name)}async function nj(e,t,n){let r=eO(e);w(e,t,e2),await r._initializationPromise;let i=n_(r,n);return await nD(i,r),i._openRedirect(r,t,"signInViaRedirect")}async function nF(e,t,n){let r=(0,s.m9)(e);w(r.auth,t,e2),await r.auth._initializationPromise;let i=n_(r.auth,n);await nD(i,r.auth);let o=await nz(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}async function nq(e,t,n){let r=(0,s.m9)(e);w(r.auth,t,e2),await r.auth._initializationPromise;let i=n_(r.auth,n);await tc(!1,r,t.providerId),await nD(i,r.auth);let o=await nz(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}async function nU(e,t){return await eO(e)._initializationPromise,nW(e,t,!1)}async function nW(e,t,n=!1){let r=eO(e),i=n_(r,t),o=new nR(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function nz(e){let t=tZ(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class nB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nH(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nH(e)){let r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nV(e))}saveEventToCache(e){this.cachedEventUids.add(nV(e)),this.lastProcessedEventTime=Date.now()}}function nV(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function nH({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nK(e,t={}){return x(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nQ=/^https?/;async function nG(e){if(e.config.emulator)return;let{authorizedDomains:t}=await nK(e);for(let e of t)try{if(function(e){let t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){let i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!nQ.test(n))return!1;if(n$.test(e))return r===e;let i=e.replace(/\./g,"\\."),o=RegExp("^(.+\\."+i+"|"+i+")$","i");return o.test(r)}(e))return}catch(e){}y(e,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nY=new P(3e4,6e4);function nJ(){let e=t0().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let nZ=null,nX=new P(5e3,15e3),n0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function n2(e){let t=await (nZ=nZ||new Promise((t,n)=>{var r,i,o;function s(){nJ(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nJ(),n(_(e,"network-request-failed"))},timeout:nY.get()})}if(null===(i=null===(r=t0().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else if(null===(o=t0().gapi)||void 0===o?void 0:o.load)s();else{let t=eC("iframefcb");return t0()[t]=()=>{gapi.load?s():n(_(e,"network-request-failed"))},eS(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw nZ=null,e})),n=t0().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;S(t.authDomain,e,"auth-domain-config-required");let n=t.emulator?O(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:a.SDK_VERSION},i=n1.get(e.config.apiHost);i&&(r.eid=i);let o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n0,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=_(e,"network-request-failed"),o=t0().setTimeout(()=>{r(i)},nX.get());function s(){t0().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{r(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class n3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let n6=encodeURIComponent("fac");async function n5(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:a.SDK_VERSION,eventId:i};if(t instanceof e2)for(let[n,r]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(o||{})))l[n]=r;if(t instanceof e4){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);let u=l;for(let e of Object.keys(u))void 0===u[e]&&delete u[e];let c=await e._getAppCheckToken(),h=c?`#${n6}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?O(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(u).slice(1)}${h}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n8="webStorageSupport",n9=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tY,this._completeRedirectFn=nW,this._overrideRedirectResult=nx}async _openPopup(e,t,n,r){var i;(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager)||C("_initialize() not called before _openPopup()");let o=await n5(e,t,n,E(),r);return function(e,t,n,r=500,i=600){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),l="",u=Object.assign(Object.assign({},n4),{width:r.toString(),height:i.toString(),top:o,left:a}),c=(0,s.z$)().toLowerCase();n&&(l=ec(c)?"_blank":n),el(c)&&(t=t||"http://localhost",u.scrollbars="yes");let h=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return eg(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){let n=document.createElement("a");n.href=e,n.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new n3(null);let d=window.open(t||"",l,h);S(d,e,"popup-blocked");try{d.focus()}catch(e){}return new n3(d)}(e,o,tZ())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await n5(e,t,n,E(),r);return t0().location.href=i,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(n||C("If manager is not set, promise should be"),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await n2(e),n=new nB(e);return t.register("authEvent",t=>{S(null==t?void 0:t.authEvent,e,"invalid-auth-event");let r=n.onEvent(t.authEvent);return{status:r?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){let n=this.iframes[e._key()];n.send(n8,{type:n8},n=>{var r;let i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[n8];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return em()||eu()||eg()}};class n7{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return C("unexpected MultiFactorSessionType")}}}class re extends n7{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new re(e)}_finalizeEnroll(e,t,n){return x(e,"POST","/v2/accounts/mfaEnrollment:finalize",D(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:finalize",D(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}}class rt{constructor(){}static assertion(e){return re._fromCredential(e)}}rt.FACTOR_ID="phone";class rn extends n7{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new rn(t,void 0,e)}static _fromEnrollmentId(e,t){return new rn(t,e)}async _finalizeEnroll(e,t,n){return S(void 0!==this.secret,e,"argument-error"),x(e,"POST","/v2/accounts/mfaEnrollment:finalize",D(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(e,t){S(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");let n={verificationCode:this.otp};return x(e,"POST","/v2/accounts/mfaSignIn:finalize",D(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n}))}}class rr{constructor(e,t,n,r,i,o,s){this.sessionInfo=o,this.auth=s,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new rr(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let r=!1;return(ri(e)||ri(t))&&(r=!0),r&&(ri(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),ri(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function ri(e){return void 0===e||(null==e?void 0:e.length)===0}var ro="@firebase/auth",rs="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(){return window}async function ru(e,t,n){var r;let{BuildInfo:i}=rl();t.sessionId||C("AuthEvent did not contain a session ID");let o=await rd(t.sessionId),s={};return eg()?s.ibi=i.packageName:ed()?s.apn=i.packageName:y(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,n5(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}async function rc(e){let{BuildInfo:t}=rl(),n={};eg()?n.iosBundleId=t.packageName:ed()?n.androidPackageName=t.packageName:y(e,"operation-not-supported-in-this-environment"),await nK(e,n)}async function rh(e,t,n){let{cordova:r}=rl(),i=()=>{};try{await new Promise((o,s)=>{let a=null;function l(){var e;o();let t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout(()=>{s(_(e,"redirect-cancelled-by-user"))},2e3))}function c(){(null==document?void 0:document.visibilityState)==="visible"&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),ed()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}async function rd(e){let t=function(e){if(/[0-9a-zA-Z]+/.test(e)||C("Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return new TextEncoder().encode(e);let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t),r=Array.from(new Uint8Array(n));return r.map(e=>e.toString(16).padStart(2,"0")).join("")}(0,s.Pz)("authIdTokenMaxAge"),r="Browser",(0,a._registerComponent)(new c.wA("auth",(e,{options:t})=>{let n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;S(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:s,authDomain:a,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ev(r)},u=new eP(n,i,o,l);return function(e,t){let n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(er);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{let r=e.getProvider("auth-internal");r.initialize()})),(0,a._registerComponent)(new c.wA("auth-internal",e=>{let t=eO(e.getProvider("auth").getImmediate());return new ra(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,a.registerVersion)(ro,rs,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(r)),(0,a.registerVersion)(ro,rs,"esm2017");class rf extends nB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function rp(e){let t=await er(tG)._get(rg(e));return t&&await er(tG)._remove(rg(e)),t}function rg(e){return eo("authEvent",e.config.apiKey,e.name)}function rm(e){if(!(null==e?void 0:e.includes("?")))return{};let[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}let rv=class{constructor(){this._redirectPersistence=tY,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nW,this._overrideRedirectResult=nx}async _initialize(e){let t=e._key(),n=this.eventManagers.get(t);return n||(n=new rf(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){y(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,l,u,c;let h=rl();S("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),S(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),S("function"==typeof(null===(o=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"==typeof(null===(l=null===(a=null===(s=null==h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),S("function"==typeof(null===(c=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);let i=await this._initialize(e);await i.initialized(),i.resetRedirect(),nA.clear(),await this._originValidation(e);let o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:function(){let e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){let n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}(),postBody:null,tenantId:e.tenantId,error:_(e,"no-auth-event")}}(e,n,r);await er(tG)._set(rg(e),o);let a=await ru(e,o,t),l=await function(e){let{cordova:t}=rl();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,!function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_system":"_blank","location=yes"),n(i)})})}(a);return rh(e,i,l)}_isIframeWebStorageSupported(e,t){throw Error("Method not implemented.")}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rc(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){let{universalLinks:n,handleOpenURL:r,BuildInfo:i}=rl(),o=setTimeout(async()=>{await rp(e),t.onEvent(ry())},500),s=async n=>{clearTimeout(o);let r=await rp(e),i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;let i=function(e){let t=rm(e),n=t.link?decodeURIComponent(t.link):void 0,r=rm(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0,o=rm(i).link;return o||i||r||n||e}(t);if(i.includes("/__/auth/callback")){let t=rm(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?_(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||ry())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,s);let a=`${i.packageName.toLowerCase()}://`;rl().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(a)&&s({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}}}};function ry(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_("no-auth-event")}}function r_(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function rb(e=(0,s.z$)()){return!!(("file:"===r_()||"ionic:"===r_()||"capacitor:"===r_())&&e.toLowerCase().match(/iphone|ipad|ipod|android/))}function rw(){try{let e=self.localStorage,t=tZ();if(e){if(e.setItem(t,"1"),e.removeItem(t),function(e=(0,s.z$)()){return(0,s.w1)()&&(null==document?void 0:document.documentMode)===11||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}())return(0,s.hl)();return!0}}catch(e){return rI()&&(0,s.hl)()}return!1}function rI(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function rS(){return("http:"===r_()||"https:"===r_()||(0,s.ru)()||rb())&&!((0,s.b$)()||(0,s.UG)())&&rw()&&!rI()}function rC(){return rb()&&"undefined"!=typeof document}async function rE(){return!!rC()&&new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rT={LOCAL:"local",NONE:"none",SESSION:"session"},rk="persistence";async function rP(e){await e._initializationPromise;let t=rO(),n=eo(rk,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function rO(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}class rA{constructor(){this.browserResolver=er(n9),this.cordovaResolver=er(rv),this.underlyingResolver=null,this._redirectPersistence=tY,this._completeRedirectFn=nW,this._overrideRedirectResult=nx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return rC()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return S(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;let e=await rE();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function rR(e){let t;let{_tokenResponse:n}=e instanceof s.ZR?e.customData:e;if(!n)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in n&&"phoneNumber"in n)return ny.credentialFromResult(e);let r=n.providerId;if(!r||r===h.PASSWORD)return null;switch(r){case h.GOOGLE:t=e5;break;case h.FACEBOOK:t=e6;break;case h.GITHUB:t=e8;break;case h.TWITTER:t=te;break;default:let{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:a,pendingToken:l,nonce:u}=n;if(!o&&!a&&!i&&!l)return null;if(l){if(r.startsWith("saml."))return e9._create(r,l);return e$._fromParams({providerId:r,signInMethod:r,pendingToken:l,idToken:i,accessToken:o})}return new e3(r).credential({idToken:i,accessToken:o,rawNonce:u})}return e instanceof s.ZR?t.credentialFromError(e):t.credentialFromResult(e)}function rN(e,t){return t.catch(t=>{throw t instanceof s.ZR&&function(e,t){var n;let r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if((null==t?void 0:t.code)==="auth/multi-factor-auth-required"){let n=t;n.resolver=new rx(e,function(e,t){var n;let r=(0,s.m9)(e);return S(t.customData.operationType,r,"argument-error"),S(null===(n=t.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),tV._fromError(r,t)}(e,t))}else if(r){let e=rR(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{let t=e.operationType,n=e.user;return{operationType:t,credential:rR(e),additionalUserInfo:function(e){let{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){var t,n;if(!e)return null;let{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){let r=null===(n=null===(t=K(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new tj(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new tq(o,i);case"github.com":return new tU(o,i);case"google.com":return new tW(o,i);case"twitter.com":return new tz(o,i,e.screenName||null);case"custom":case"anonymous":return new tj(o,null);default:return new tj(o,r,i)}}(n)}(e),user:rL.getOrCreate(n)}})}async function rD(e,t){let n=await t;return{verificationId:n.verificationId,confirm:t=>rN(e,n.confirm(t))}}class rx{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return rN(this.auth.unwrap(),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this._delegate=e,this.multiFactor=function(e){let t=(0,s.m9)(e);return tK.has(t)||tK.set(t,tH._fromUser(t)),tK.get(t)}(e)}static getOrCreate(e){return rL.USER_MAP.has(e)||rL.USER_MAP.set(e,new rL(e)),rL.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return rN(this.auth,tp(this._delegate,e))}async linkWithPhoneNumber(e,t){return rD(this.auth,np(this._delegate,e,t))}async linkWithPopup(e){return rN(this.auth,nP(this._delegate,e,rA))}async linkWithRedirect(e){return await rP(eO(this.auth)),nq(this._delegate,e,rA)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return rN(this.auth,tg(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return rD(this.auth,ng(this._delegate,e,t))}reauthenticateWithPopup(e){return rN(this.auth,nk(this._delegate,e,rA))}async reauthenticateWithRedirect(e){return await rP(eO(this.auth)),nF(this._delegate,e,rA)}sendEmailVerification(e){return tN(this._delegate,e)}async unlink(e){return await tl(this._delegate,e),this}updateEmail(e){var t;return t=this._delegate,tM((0,s.m9)(t),e,null)}updatePassword(e){var t;return t=this._delegate,tM((0,s.m9)(t),null,e)}updatePhoneNumber(e){return nv(this._delegate,e)}updateProfile(e){return tL(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return tD(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rL.USER_MAP=new WeakMap;class rM{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}let{apiKey:n}=e.options;S(n,"invalid-api-key",{appName:e.name}),S(n,"invalid-api-key",{appName:e.name});let r="undefined"!=typeof window?rA:void 0;this._delegate=t.initialize({options:{persistence:function(e,t){let n=function(e,t){let n=rO();if(!n)return[];let r=eo(rk,e,t),i=n.getItem(r);switch(i){case rT.NONE:return[ei];case rT.LOCAL:return[nn,tY];case rT.SESSION:return[tY];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(nn)||n.push(nn),"undefined"!=typeof window)for(let e of[tG,tY])n.includes(e)||n.push(e);return n.includes(ei)||n.push(ei),n}(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(p),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rL.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){let r=eO(e);S(r._canInitEmulator,r,"emulator-config-failed"),S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!(null==n?void 0:n.disableWarnings),o=eR(t),{host:s,port:a}=function(e){let t=eR(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:eN(r.substr(e.length+1))}}{let[e,t]=r.split(":");return{host:e,port:eN(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return tC(this._delegate,e)}checkActionCode(e){return tE(this._delegate,e)}confirmPasswordReset(e,t){return tS(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return rN(this._delegate,tk(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return tR(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){let n=e0.parseLink(t);return(null==n?void 0:n.operation)==="EMAIL_SIGNIN"}(this._delegate,e)}async getRedirectResult(){S(rS(),this._delegate,"operation-not-supported-in-this-environment");let e=await nU(this._delegate,rA);return e?rN(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e,t){eO(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){let{next:r,error:i,complete:o}=rj(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){let{next:r,error:i,complete:o}=rj(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return tP(this._delegate,e,t)}sendPasswordResetEmail(e,t){return tI(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(!function(e,t){if(S(Object.values(rT).includes(t),e,"invalid-persistence-type"),(0,s.b$)()){S(t!==rT.SESSION,e,"unsupported-persistence-type");return}if((0,s.UG)()){S(t===rT.NONE,e,"unsupported-persistence-type");return}if(rI()){S(t===rT.NONE||t===rT.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type");return}S(t===rT.NONE||rw(),e,"unsupported-persistence-type")}(this._delegate,e),e){case rT.SESSION:t=tY;break;case rT.LOCAL:let n=await er(nn)._isAvailable();t=n?nn:tG;break;case rT.NONE:t=ei;break;default:return y("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return rN(this._delegate,ti(this._delegate))}signInWithCredential(e){return rN(this._delegate,tf(this._delegate,e))}signInWithCustomToken(e){return rN(this._delegate,tv(this._delegate,e))}signInWithEmailAndPassword(e,t){var n;return rN(this._delegate,(n=this._delegate,tf((0,s.m9)(n),e1.credential(e,t))))}signInWithEmailLink(e,t){return rN(this._delegate,tO(this._delegate,e,t))}signInWithPhoneNumber(e,t){return rD(this._delegate,nf(this._delegate,e,t))}async signInWithPopup(e){return S(rS(),this._delegate,"operation-not-supported-in-this-environment"),rN(this._delegate,nT(this._delegate,e,rA))}async signInWithRedirect(e){return S(rS(),this._delegate,"operation-not-supported-in-this-environment"),await rP(this._delegate),nj(this._delegate,e,rA)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return tT(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function rj(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);let i=r,o=e=>i(e&&rL.getOrCreate(e));return{next:o,error:t,complete:n}}rM.Persistence=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(){this.providerId="phone",this._delegate=new ny(o.Z.auth().unwrap())}static credential(e,t){return ny.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}rF.PHONE_SIGN_IN_METHOD=ny.PHONE_SIGN_IN_METHOD,rF.PROVIDER_ID=ny.PROVIDER_ID,(i=o.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{let t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new rM(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:d.EMAIL_SIGNIN,PASSWORD_RESET:d.PASSWORD_RESET,RECOVER_EMAIL:d.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:d.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:d.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:d.VERIFY_EMAIL}},EmailAuthProvider:e1,FacebookAuthProvider:e6,GithubAuthProvider:e8,GoogleAuthProvider:e5,OAuthProvider:e3,SAMLAuthProvider:e7,PhoneAuthProvider:rF,PhoneMultiFactorGenerator:rt,RecaptchaVerifier:class{constructor(e,t,n=o.Z.app()){var r;S(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new nh(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:te,Auth:rM,AuthCredential:eD,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),i.registerVersion("@firebase/auth-compat","0.4.2")},7921:function(e,t,n){"use strict";let r,i,o,s,a,l,u,c,h,d,f;var p,g,m,v=n(8180),y=n(740),_=n(5816),b=n(4444),w=n(3333),I=n(3454);let S="@firebase/database",C="0.14.4",E="";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,b.Wl)(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,b.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,b.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new T(t)}}catch(e){}return new k},O=P("localStorage"),A=P("sessionStorage"),R=new w.Yd("@firebase/database"),N=(f=1,function(){return f++}),D=function(e){let t=(0,b.dS)(e),n=new b.gQ;n.update(t);let r=n.digest();return b.US.encodeByteArray(r)},x=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=x.apply(null,r):"object"==typeof r?t+=(0,b.Wl)(r):t+=r,t+=" "}return t},L=null,M=!0,j=function(e,t){(0,b.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(R.logLevel=w.in.VERBOSE,L=R.log.bind(R),t&&A.set("logging_enabled",!0)):"function"==typeof e?L=e:(L=null,A.remove("logging_enabled"))},F=function(...e){if(!0===M&&(M=!1,null===L&&!0===A.get("logging_enabled")&&j(!0)),L){let t=x.apply(null,e);L(t)}},q=function(e){return function(...t){F(e,...t)}},U=function(...e){let t="FIREBASE INTERNAL ERROR: "+x(...e);R.error(t)},W=function(...e){let t=`FIREBASE FATAL ERROR: ${x(...e)}`;throw R.error(t),Error(t)},z=function(...e){let t="FIREBASE WARNING: "+x(...e);R.warn(t)},B=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&z("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},V=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},H=function(e){if((0,b.Yr)()||"complete"===document.readyState)e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},K="[MIN_NAME]",$="[MAX_NAME]",Q=function(e,t){if(e===t)return 0;if(e===K||t===$)return -1;if(t===K||e===$)return 1;{let n=en(e),r=en(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},G=function(e,t){return e===t?0:e<t?-1:1},Y=function(e,t){if(t&&e in t)return t[e];throw Error("Missing required key ("+e+") in object: "+(0,b.Wl)(t))},J=function(e){if("object"!=typeof e||null===e)return(0,b.Wl)(e);let t=[];for(let n in e)t.push(n);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,b.Wl)(t[r])+":"+J(e[t[r]]);return n+"}"},Z=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function X(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}let ee=function(e){let t,n,r,i,o;(0,b.hu)(!V(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=22250738585072014e-324?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-4503599627370496)):(n=0,r=Math.round(e/5e-324)));let s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();let a=s.join(""),l="";for(o=0;o<64;o+=8){let e=parseInt(a.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},et=RegExp("^-?(0*)\\d{1,10}$"),en=function(e){if(et.test(e)){let t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},er=function(e){try{e()}catch(e){setTimeout(()=>{let t=e.stack||"";throw z("Exception was thrown by user callback.",t),e},Math.floor(0))}},ei=function(){let e="object"==typeof window&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},eo=function(e,t){let n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){z(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(F("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',z(e)}}class el{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}el.OWNER="owner";let eu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ec="websocket",eh="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,n,r,i=!1,o="",s=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=O.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&O.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ef(e,t,n){let r;if((0,b.hu)("string"==typeof t,"typeof type must == string"),(0,b.hu)("object"==typeof n,"typeof params must == object"),t===ec)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===eh)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw Error("Unknown connection type: "+t);(e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=e.namespace);let i=[];return X(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,b.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,b.p$)(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg={},em={};function ev(e){let t=e.toString();return eg[t]||(eg[t]=new ep),eg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&er(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e_="start";class eb{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=q(e),this.stats_=ev(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),ef(t,eh,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ey(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),H(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ew((...e)=>{let[t,n,r,i,o]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder){if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===e_)this.id=n,this.password=r;else if("close"===t)n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_();else throw Error("Unrecognized command received: "+t)}},(...e)=>{let[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);let e={};e[e_]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&eu.test(location.hostname)&&(e.r="f");let t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){eb.forceAllow_=!0}static forceDisallow(){eb.forceDisallow_=!0}static isAvailable(){return!(0,b.Yr)()&&(!!eb.forceAllow_||!eb.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){!this.isClosed_&&(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=(0,b.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=(0,b.h$)(t),r=Z(n,1840);for(let e=0;e<r.length;e++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[e]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,b.Yr)())return;this.myDisconnFrame=document.createElement("iframe");let n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=(0,b.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ew{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,b.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=N(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ew.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){let e=document.domain;n='<script>document.domain="'+e+'";</script>'}let r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(e){F("frame writing exception"),e.stack&&F(e.stack),F(e)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{let t=e.contentWindow.document;t||F("No IE domain setting required")}catch(n){let t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(!this.alive||!this.sendNewPolls||!(this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)))return!1;{this.currentSerial++;let e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){let e=this.pendingSegs[0];if(e.d.length+30+n.length<=1870){let e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}else break}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3)),i=()=>{clearTimeout(r),n()};this.addTag(e,i)}addTag(e,t){(0,b.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){let e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{F("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(e){}},Math.floor(1))}}let eI=null;"undefined"!=typeof MozWebSocket?eI=MozWebSocket:"undefined"!=typeof WebSocket&&(eI=WebSocket);class eS{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=q(this.connId),this.stats_=ev(t),this.connURL=eS.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){let o={};return o.v="5",!(0,b.Yr)()&&"undefined"!=typeof location&&location.hostname&&eu.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o.ac=r),i&&(o.p=i),ef(e,ec,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,O.set("previous_websocket_failure",!0);try{let e;if((0,b.Yr)()){let t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/5/${E}/${I.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);let n=I.env,r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new eI(this.connURL,[],e)}catch(t){this.log_("Error instantiating WebSocket.");let e=t.message||t.data;e&&this.log_(e),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");let t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){eS.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){let t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&t.length>1&&4.4>parseFloat(t[1])&&(e=!0)}return!e&&null!==eI&&!eS.forceDisallow_}static previouslyFailed(){return O.isInMemoryStorage||!0===O.get("previous_websocket_failure")}markConnectionHealthy(){O.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let e=this.frames.join("");this.frames=null;let t=(0,b.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,b.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){let t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;let t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{let e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();let t=(0,b.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let n=Z(t,16384);n.length>1&&this.sendString_(String(n.length));for(let e=0;e<n.length;e++)this.sendString_(n[e])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){!this.isClosed_&&(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}eS.responsesRequiredToBeHealthy=2,eS.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[eb,eS]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let t=eS&&eS.isAvailable(),n=t&&!eS.previouslyFailed();if(e.webSocketOnly&&(t||z("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[eS];else{let e=this.transports_=[];for(let t of eC.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);eC.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}eC.globalTransportInitialized_=!1;class eE{constructor(e,t,n,r,i,o,s,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=q("c:"+this.id+":"),this.transportManager_=new eC(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=eo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){let t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Y("t",e),n=Y("d",e);if("c"===t)this.onSecondaryControl_(n);else if("d"===t)this.pendingDataMessages.push(n);else throw Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Y("t",e),n=Y("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){!this.isHealthy_&&(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Y("t",e);if("d"in e){let n=e.d;if("h"===t){let e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?U("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&z("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),eo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(O.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,b.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});let r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let e=0;e<r.length;e++)if(r[e].callback===t&&(!n||n===r[e].context)){r.splice(e,1);return}}validateEventType_(e){(0,b.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends ek{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,b.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new eP}getInitialEvent(e){return(0,b.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class eO{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function eA(){return new eO("")}function eR(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function eN(e){return e.pieces_.length-e.pieceNum_}function eD(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new eO(e.pieces_,t)}function ex(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function eL(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function eM(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new eO(t,0)}function ej(e,t){let n=[];for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);if(t instanceof eO)for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);else{let e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new eO(n,0)}function eF(e){return e.pieceNum_>=e.pieces_.length}function eq(e,t){let n=eR(e),r=eR(t);if(null===n)return t;if(n===r)return eq(eD(e),eD(t));throw Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function eU(e,t){let n=eL(e,0),r=eL(t,0);for(let e=0;e<n.length&&e<r.length;e++){let t=Q(n[e],r[e]);if(0!==t)return t}return n.length===r.length?0:n.length<r.length?-1:1}function eW(e,t){if(eN(e)!==eN(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ez(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(eN(e)>eN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class eB{constructor(e,t){this.errorPrefix_=t,this.parts_=eL(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let e=0;e<this.parts_.length;e++)this.byteLength_+=(0,b.ug)(this.parts_[e]);eV(this)}}function eV(e){if(e.byteLength_>768)throw Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eH(e))}function eH(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK extends ek{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new eK}getInitialEvent(e){return(0,b.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}class e$ extends eT{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=e$.nextPersistentConnectionId_++,this.log_=q("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!(0,b.Yr)())throw Error("Auth override specified in options, but not supported on non Node.js platforms");eK.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&eP.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){let r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,b.Wl)(i)),(0,b.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();let t=new b.BH,n={p:e._path.toString(),q:e._queryObject};this.outstandingGets_.push({action:"g",request:n,onComplete:e=>{let n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}}),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();let i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,b.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,b.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");let s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){let t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){let t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);let i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{let o=i.d,s=i.s;e$.warnOnListenWarnings_(o,t);let a=this.listens.get(n)&&this.listens.get(n).get(r);a===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,b.r3)(e,"w")){let n=(0,b.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){let e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();z(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){let t=e&&40===e.length;(t||(0,b.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,t=(0,b.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{let n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){let n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,b.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");let i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);let i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){let i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();let o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;let s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){let t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){let t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{let t=e.s;if("ok"!==t){let t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,b.Wl)(e));let t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else if("error"in e)throw"A server-side error has occurred: "+e.error;else"a"in e&&this.onDataPush_(e.a,e.b)}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):U("Unrecognized action received from server: "+(0,b.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,b.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){!e||this.visible_||this.reconnectDelay_!==this.maxReconnectDelay_||(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){let e=new Date().getTime()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();let e=new Date().getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+e$.nextConnectionId_++,i=this.lastSessionId,o=!1,s=null,a=function(){s?s.close():(o=!0,n())};this.realtime_={close:a,sendRequest:function(e){(0,b.hu)(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)}};let l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[a,u]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?F("getToken() completed but was canceled"):(F("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=u&&u.token,s=new eE(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{z(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},i))}catch(e){this.log_("Failed to get token: "+e),o||(this.repoInfo_.nodeAdmin&&z(e),a())}}}interrupt(e){F("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){F("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,b.xb)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>J(e)).join("$"):"default";let r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){let n;let r=new eO(e).toString();if(this.listens.has(r)){let e=this.listens.get(r);n=e.get(t),e.delete(t),0===e.size&&this.listens.delete(r)}else n=void 0;return n}onAuthRevoked_(e,t){F("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){F("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){for(let e of(this.tryAuth(),this.tryAppCheck(),this.listens.values()))for(let t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},t="js";(0,b.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+E.replace(/\./g,"-")]=1,(0,b.uI)()?e["framework.cordova"]=1:(0,b.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=eP.getInstance().currentlyOnline();return(0,b.xb)(this.interruptReasons_)&&e}}e$.nextPersistentConnectionId_=0,e$.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new eQ(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let n=new eQ(K,e),r=new eQ(K,t);return 0!==this.compare(n,r)}minPost(){return eQ.MIN}}class eY extends eG{static get __EMPTY_NODE(){return r}static set __EMPTY_NODE(e){r=e}compare(e,t){return Q(e.name,t.name)}isDefinedOn(e){throw(0,b.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return eQ.MIN}maxPost(){return new eQ($,r)}makePost(e,t){return(0,b.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new eQ(e,r)}toString(){return".key"}}let eJ=new eY;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else if(0===o){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}getNext(){let e;if(0===this.nodeStack_.length)return null;let t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class eX{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:eX.RED,this.left=null!=r?r:e0.EMPTY_NODE,this.right=null!=i?i:e0.EMPTY_NODE}copy(e,t,n,r,i){return new eX(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}removeMin_(){if(this.left.isEmpty())return e0.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}remove(e,t){let n,r;if(n=this,0>t(e,n.key))n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return e0.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,eX.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,eX.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e===this.right.check_())return e+(this.isRed_()?0:1);throw Error("Black depths differ")}}eX.RED=!0,eX.BLACK=!1;class e0{constructor(e,t=e0.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new e0(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,eX.BLACK,null,null))}remove(e){return new e0(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,eX.BLACK,null,null))}get(e){let t;let n=this.root_;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty()){if(r)return r.key;return null}for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eZ(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eZ(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eZ(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eZ(this.root_,null,this.comparator_,!0,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(e,t){return Q(e.name,t.name)}function e2(e,t){return Q(e,t)}e0.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new eX(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};let e4=function(e){return"number"==typeof e?"number:"+ee(e):"string:"+e},e3=function(e){if(e.isLeafNode()){let t=e.val();(0,b.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,b.r3)(t,".sv"),"Priority must be a string or number.")}else(0,b.hu)(e===i||e.isEmpty(),"priority of unexpected type.");(0,b.hu)(e===i||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};class e6{constructor(e,t=e6.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,b.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),e3(this.priorityNode_)}static set __childrenNodeConstructor(e){o=e}static get __childrenNodeConstructor(){return o}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new e6(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:e6.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return eF(e)?this:".priority"===eR(e)?this.priorityNode_:e6.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:e6.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){let n=eR(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,b.hu)(".priority"!==n||1===eN(e),".priority must be the last token in a path"),this.updateImmediateChild(n,e6.__childrenNodeConstructor.EMPTY_NODE.updateChild(eD(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+e4(this.priorityNode_.val())+":");let t=typeof this.value_;e+=t+":","number"===t?e+=ee(this.value_):e+=this.value_,this.lazyHash_=D(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===e6.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof e6.__childrenNodeConstructor?-1:((0,b.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let t=typeof e.value_,n=typeof this.value_,r=e6.VALUE_TYPE_ORDER.indexOf(t),i=e6.VALUE_TYPE_ORDER.indexOf(n);return((0,b.hu)(r>=0,"Unknown leaf type: "+t),(0,b.hu)(i>=0,"Unknown leaf type: "+n),r!==i)?i-r:"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1}withIndex(){return this}isIndexed(){return!0}equals(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}}e6.VALUE_TYPE_ORDER=["object","boolean","number","string"];let e5=new class extends eG{compare(e,t){let n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Q(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return eQ.MIN}maxPost(){return new eQ($,new e6("[PRIORITY-POST]",a))}makePost(e,t){let n=s(e);return new eQ(t,new e6("[PRIORITY-POST]",n))}toString(){return".priority"}},e8=Math.log(2);class e9{constructor(e){this.count=parseInt(Math.log(e+1)/e8,10),this.current_=this.count-1;let t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}}let e7=function(e,t,n,r){e.sort(t);let i=function(t,r){let o,s;let a=r-t;if(0===a)return null;if(1===a)return o=e[t],s=n?n(o):o,new eX(s,o.node,eX.BLACK,null,null);{let l=parseInt(a/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],s=n?n(o):o,new eX(s,o.node,eX.BLACK,u,c)}},o=new e9(e.length),s=function(t){let r=null,o=null,s=e.length,a=function(t,r){let o=s-t,a=s;s-=t;let u=i(o+1,a),c=e[o],h=n?n(c):c;l(new eX(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){let n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,eX.BLACK):(a(r,eX.BLACK),a(r,eX.RED))}return o}(o);return new e0(r||t,s)},te={};class tt{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,b.hu)(te&&e5,"ChildrenNode.ts has not been loaded"),l=l||new tt({".priority":te},{".priority":e5})}get(e){let t=(0,b.DV)(this.indexes_,e);if(!t)throw Error("No index defined for "+e);return t instanceof e0?t:null}hasIndex(e){return(0,b.r3)(this.indexSet_,e.toString())}addIndex(e,t){let n;(0,b.hu)(e!==eJ,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(eQ.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?e7(r,e.getCompare()):te;let a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;let u=Object.assign({},this.indexes_);return u[a]=n,new tt(u,l)}addToIndexes(e,t){let n=(0,b.UI)(this.indexes_,(n,r)=>{let i=(0,b.DV)(this.indexSet_,r);if((0,b.hu)(i,"Missing index implementation for "+r),n===te){if(!i.isDefinedOn(e.node))return te;{let n=[],r=t.getIterator(eQ.Wrap),o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),e7(n,i.getCompare())}}{let r=t.get(e.name),i=n;return r&&(i=i.remove(new eQ(e.name,r))),i.insert(e,e.node)}});return new tt(n,this.indexSet_)}removeFromIndexes(e,t){let n=(0,b.UI)(this.indexes_,n=>{if(n===te)return n;{let r=t.get(e.name);return r?n.remove(new eQ(e.name,r)):n}});return new tt(n,this.indexSet_)}}class tn{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&e3(this.priorityNode_),this.children_.isEmpty()&&(0,b.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return u||(u=new tn(new e0(e2),null,tt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||u}updatePriority(e){return this.children_.isEmpty()?this:new tn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{let t=this.children_.get(e);return null===t?u:t}}getChild(e){let t=eR(e);return null===t?this:this.getImmediateChild(t).getChild(eD(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,b.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{let n,r;let i=new eQ(e,t);t.isEmpty()?(n=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(n=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(i,this.children_));let o=n.isEmpty()?u:this.priorityNode_;return new tn(n,o,r)}}updateChild(e,t){let n=eR(e);if(null===n)return t;{(0,b.hu)(".priority"!==eR(e)||1===eN(e),".priority must be the last token in a path");let r=this.getImmediateChild(n).updateChild(eD(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let t={},n=0,r=0,i=!0;if(this.forEachChild(e5,(o,s)=>{t[o]=s.val(e),n++,i&&tn.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),e||!i||!(r<2*n))return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t;{let e=[];for(let n in t)e[n]=t[n];return e}}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+e4(this.getPriority().val())+":"),this.forEachChild(e5,(t,n)=>{let r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":D(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){let r=this.resolveIndex_(n);if(!r)return this.children_.getPredecessorKey(e);{let n=r.getPredecessorKey(new eQ(e,t));return n?n.name:null}}getFirstChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.minKey();{let e=t.minKey();return e&&e.name}}getFirstChild(e){let t=this.getFirstChildName(e);return t?new eQ(t,this.children_.get(t)):null}getLastChildName(e){let t=this.resolveIndex_(e);if(!t)return this.children_.maxKey();{let e=t.maxKey();return e&&e.name}}getLastChild(e){let t=this.getLastChildName(e);return t?new eQ(t,this.children_.get(t)):null}forEachChild(e,t){let n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{let n=this.children_.getIteratorFrom(e.name,eQ.Wrap),r=n.peek();for(;null!=r&&0>t.compare(r,e);)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){let n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{let n=this.children_.getReverseIteratorFrom(e.name,eQ.Wrap),r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tr?-1:0}withIndex(e){if(e===eJ||this.indexMap_.hasIndex(e))return this;{let t=this.indexMap_.addIndex(e,this.children_);return new tn(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===eJ||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode()||!this.getPriority().equals(e.getPriority())||this.children_.count()!==e.children_.count())return!1;{let t=this.getIterator(e5),n=e.getIterator(e5),r=t.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=t.getNext(),i=n.getNext()}return null===r&&null===i}}resolveIndex_(e){return e===eJ?null:this.indexMap_.get(e.toString())}}tn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;let tr=new class extends tn{constructor(){super(new e0(e2),tn.EMPTY_NODE,tt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}};function ti(e,t=null){if(null===e)return tn.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,b.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){let n=e;return new e6(n,ti(t))}if(e instanceof Array){let n=tn.EMPTY_NODE;return X(e,(t,r)=>{if((0,b.r3)(e,t)&&"."!==t.substring(0,1)){let e=ti(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(ti(t))}{let n=[],r=!1,i=e;if(X(i,(e,t)=>{if("."!==e.substring(0,1)){let i=ti(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new eQ(e,i)))}}),0===n.length)return tn.EMPTY_NODE;let o=e7(n,e1,e=>e.name,e2);if(!r)return new tn(o,ti(t),tt.Default);{let e=e7(n,e5.getCompare());return new tn(o,ti(t),new tt({".priority":e},{".priority":e5}))}}}Object.defineProperties(eQ,{MIN:{value:new eQ(K,tn.EMPTY_NODE)},MAX:{value:new eQ($,tr)}}),eY.__EMPTY_NODE=tn.EMPTY_NODE,e6.__childrenNodeConstructor=tn,i=tr,a=tr,s=ti;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends eG{constructor(e){super(),this.indexPath_=e,(0,b.hu)(!eF(e)&&".priority"!==eR(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Q(e.name,t.name):i}makePost(e,t){let n=ti(e),r=tn.EMPTY_NODE.updateChild(this.indexPath_,n);return new eQ(t,r)}maxPost(){let e=tn.EMPTY_NODE.updateChild(this.indexPath_,tr);return new eQ($,e)}toString(){return eL(this.indexPath_,0).join("/")}}let ts=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class extends eG{compare(e,t){let n=e.node.compareTo(t.node);return 0===n?Q(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return eQ.MIN}maxPost(){return eQ.MAX}makePost(e,t){let n=ti(e);return new eQ(t,n)}toString(){return".value"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(e){return{type:"value",snapshotNode:e}}function tl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tu(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function tc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){(0,b.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(tu(t,s)):(0,b.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(tl(t,n)):o.trackChildChange(tc(t,n,s))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(t,n).withIndex(this.index_)}updateFullNode(e,t,n){return null==n||(e.isLeafNode()||e.forEachChild(e5,(e,r)=>{t.hasChild(e)||n.trackChildChange(tu(e,r))}),t.isLeafNode()||t.forEachChild(e5,(t,r)=>{if(e.hasChild(t)){let i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(tc(t,r,i))}else n.trackChildChange(tl(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.indexedFilter_=new th(e.getIndex()),this.index_=e.getIndex(),this.startPost_=td.getStartPost_(e),this.endPost_=td.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?0>=this.index_.compare(this.getStartPost(),e):0>this.index_.compare(this.getStartPost(),e),n=this.endIsInclusive_?0>=this.index_.compare(e,this.getEndPost()):0>this.index_.compare(e,this.getEndPost());return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new eQ(t,n))||(n=tn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=tn.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(tn.EMPTY_NODE);let i=this;return t.forEachChild(e5,(e,t)=>{i.matches(new eQ(e,t))||(r=r.updateImmediateChild(e,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(!e.hasStart())return e.getIndex().minPost();{let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}}static getEndPost_(e){if(!e.hasEnd())return e.getIndex().maxPost();{let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{let t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new td(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return(this.rangedFilter_.matches(new eQ(t,n))||(n=tn.EMPTY_NODE),e.getImmediateChild(t).equals(n))?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=tn.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){let t=e.getNext();if(this.withinDirectionalStart(t)){if(this.withinDirectionalEnd(t))r=r.updateImmediateChild(t.name,t.node),n++;else break}}}else{let e;r=(r=t.withIndex(this.index_)).updatePriority(tn.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){let t=e.getNext(),i=n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t);i?n++:r=r.updateImmediateChild(t.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){let e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();(0,b.hu)(e.numChildren()===this.limit_,"");let s=new eQ(t,n),a=this.reverse_?e.getFirstChild(this.index_):e.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(e.hasChild(t)){let u=e.getImmediateChild(t),c=r.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=c&&(c.name===t||e.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);let h=null==c?1:o(c,s),d=l&&!n.isEmpty()&&h>=0;if(d)return null!=i&&i.trackChildChange(tc(t,n,u)),e.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(tu(t,u));let n=e.updateImmediateChild(t,tn.EMPTY_NODE),r=null!=c&&this.rangedFilter_.matches(c);return r?(null!=i&&i.trackChildChange(tl(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:l&&o(a,s)>=0?(null!=i&&(i.trackChildChange(tu(a.name,a.node)),i.trackChildChange(tl(t,n))),e.updateImmediateChild(t,n).updateImmediateChild(a.name,tn.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=e5}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,b.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return((0,b.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_)?this.indexStartName_:K}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,b.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return((0,b.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_)?this.indexEndName_:$}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,b.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===e5}copy(){let e=new tp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tg(e,t,n){let r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function tm(e,t,n){let r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function tv(e,t){let n=e.copy();return n.index_=t,n}function ty(e){let t;let n={};if(e.isDefault())return n;if(e.index_===e5?t="$priority":e.index_===ts?t="$value":e.index_===eJ?t="$key":((0,b.hu)(e.index_ instanceof to,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,b.Wl)(t),e.startSet_){let t=e.startAfterSet_?"startAfter":"startAt";n[t]=(0,b.Wl)(e.indexStartValue_),e.startNameSet_&&(n[t]+=","+(0,b.Wl)(e.indexStartName_))}if(e.endSet_){let t=e.endBeforeSet_?"endBefore":"endAt";n[t]=(0,b.Wl)(e.indexEndValue_),e.endNameSet_&&(n[t]+=","+(0,b.Wl)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function t_(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==e5&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends eT{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=q("p:rest:"),this.listens_={}}reportStats(e){throw Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,b.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){let i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);let o=tb.getListenId_(e,n),s={};this.listens_[o]=s;let a=ty(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),(0,b.DV)(this.listens_,o)===s&&r(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}unlisten(e,t){let n=tb.getListenId_(e,t);delete this.listens_[n]}get(e){let t=ty(e._queryParams),n=e._path.toString(),r=new b.BH;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,b.xO)(t);this.log_("Sending REST request for "+o);let s=new XMLHttpRequest;s.onreadystatechange=()=>{if(n&&4===s.readyState){this.log_("REST Response for "+o+" received. status:",s.status,"response:",s.responseText);let e=null;if(s.status>=200&&s.status<300){try{e=(0,b.cI)(s.responseText)}catch(e){z("Failed to parse JSON response for "+o+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&z("Got unsuccessful REST response for "+o+" Status: "+s.status),n(s.status);n=null}},s.open("GET",o,!0),s.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return{value:null,children:new Map}}function tS(e,t,n){if(eF(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{let r=eR(t);e.children.has(r)||e.children.set(r,tI());let i=e.children.get(r);tS(i,t=eD(t),n)}}function tC(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{let i=new eO(t.toString()+"/"+e);tC(r,i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&X(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class tT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tE(e),eo(this.reportStats_.bind(this),Math.floor(1e4+2e4*Math.random()))}reportStats_(){let e=this.statsListener_.get(),t={},n=!1;X(e,(e,r)=>{r>0&&(0,b.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),eo(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}function tk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function tO(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}(p=m||(m={}))[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=m.ACK_USER_WRITE,this.source=tk()}operationForChild(e){if(!eF(this.path))return(0,b.hu)(eR(this.path)===e,"operationForChild called for unrelated child."),new tA(eD(this.path),this.affectedTree,this.revert);if(null!=this.affectedTree.value)return(0,b.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new eO(e));return new tA(eA(),t,this.revert)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t){this.source=e,this.path=t,this.type=m.LISTEN_COMPLETE}operationForChild(e){return eF(this.path)?new tR(this.source,eA()):new tR(this.source,eD(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=m.OVERWRITE}operationForChild(e){return eF(this.path)?new tN(this.source,eA(),this.snap.getImmediateChild(e)):new tN(this.source,eD(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=m.MERGE}operationForChild(e){if(!eF(this.path))return(0,b.hu)(eR(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new tD(this.source,eD(this.path),this.children);{let t=this.children.subtree(new eO(e));return t.isEmpty()?null:t.value?new tN(this.source,eA(),t.value):new tD(this.source,eA(),t)}}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(eF(e))return this.isFullyInitialized()&&!this.filtered_;let t=eR(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tM(e,t,n,r,i,o){let s=r.filter(e=>e.type===n);s.sort((t,n)=>(function(e,t,n){if(null==t.childName||null==n.childName)throw(0,b.g5)("Should only compare child_ events.");let r=new eQ(t.childName,t.snapshotNode),i=new eQ(n.childName,n.snapshotNode);return e.index_.compare(r,i)})(e,t,n)),s.forEach(n=>{var r;let s=("value"===(r=n).type||"child_removed"===r.type||(r.prevName=o.getPredecessorChildName(r.childName,r.snapshotNode,e.index_)),r);i.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(s,e.query_))})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(e,t){return{eventCache:e,serverCache:t}}function tF(e,t,n,r){return tj(new tx(t,n,r),e.serverCache)}function tq(e,t,n,r){return tj(e.eventCache,new tx(t,n,r))}function tU(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function tW(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let tz=()=>(c||(c=new e0(G)),c);class tB{constructor(e,t=tz()){this.value=e,this.children=t}static fromObject(e){let t=new tB(null);return X(e,(e,n)=>{t=t.set(new eO(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:eA(),value:this.value};if(eF(e))return null;{let n=eR(e),r=this.children.get(n);if(null===r)return null;{let i=r.findRootMostMatchingPathAndValue(eD(e),t);if(null==i)return null;{let e=ej(new eO(n),i.path);return{path:e,value:i.value}}}}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(eF(e))return this;{let t=eR(e),n=this.children.get(t);return null!==n?n.subtree(eD(e)):new tB(null)}}set(e,t){if(eF(e))return new tB(t,this.children);{let n=eR(e),r=this.children.get(n)||new tB(null),i=r.set(eD(e),t),o=this.children.insert(n,i);return new tB(this.value,o)}}remove(e){if(eF(e))return this.children.isEmpty()?new tB(null):new tB(null,this.children);{let t=eR(e),n=this.children.get(t);if(!n)return this;{let r;let i=n.remove(eD(e));return(r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty())?new tB(null):new tB(this.value,r)}}}get(e){if(eF(e))return this.value;{let t=eR(e),n=this.children.get(t);return n?n.get(eD(e)):null}}setTree(e,t){if(eF(e))return t;{let n;let r=eR(e),i=this.children.get(r)||new tB(null),o=i.setTree(eD(e),t);return n=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new tB(this.value,n)}}fold(e){return this.fold_(eA(),e)}fold_(e,t){let n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(ej(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,eA(),t)}findOnPath_(e,t,n){let r=!!this.value&&n(t,this.value);if(r)return r;if(eF(e))return null;{let r=eR(e),i=this.children.get(r);return i?i.findOnPath_(eD(e),ej(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,eA(),t)}foreachOnPath_(e,t,n){if(eF(e))return this;{this.value&&n(t,this.value);let r=eR(e),i=this.children.get(r);return i?i.foreachOnPath_(eD(e),ej(t,r),n):new tB(null)}}foreach(e){this.foreach_(eA(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(ej(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.writeTree_=e}static empty(){return new tV(new tB(null))}}function tH(e,t,n){if(eF(t))return new tV(new tB(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){let i=r.path,o=r.value,s=eq(i,t);return o=o.updateChild(s,n),new tV(e.writeTree_.set(i,o))}{let r=new tB(n),i=e.writeTree_.setTree(t,r);return new tV(i)}}}function tK(e,t,n){let r=e;return X(n,(e,n)=>{r=tH(r,ej(t,e),n)}),r}function t$(e,t){if(eF(t))return tV.empty();{let n=e.writeTree_.setTree(t,new tB(null));return new tV(n)}}function tQ(e,t){return null!=tG(e,t)}function tG(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(eq(n.path,t)):null}function tY(e){let t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(e5,(e,n)=>{t.push(new eQ(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new eQ(e,n.value))}),t}function tJ(e,t){if(eF(t))return e;{let n=tG(e,t);return new tV(null!=n?new tB(n):e.writeTree_.subtree(t))}}function tZ(e){return e.writeTree_.isEmpty()}function tX(e,t){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);{let i=null;return n.children.inorderTraversal((n,o)=>{".priority"===n?((0,b.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(ej(t,n),o,r)}),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(ej(t,".priority"),i)),r}}(eA(),e.writeTree_,t)}function t0(e){return e.visible}function t1(e,t,n){let r=tV.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let e;let t=o.path;if(o.snap)ez(n,t)?r=tH(r,e=eq(n,t),o.snap):ez(t,n)&&(e=eq(t,n),r=tH(r,eA(),o.snap.getChild(e)));else if(o.children){if(ez(n,t))r=tK(r,e=eq(n,t),o.children);else if(ez(t,n)){if(eF(e=eq(t,n)))r=tK(r,eA(),o.children);else{let t=(0,b.DV)(o.children,eR(e));if(t){let n=t.getChild(eD(e));r=tH(r,eA(),n)}}}}else throw(0,b.g5)("WriteRecord should have .snap or .children")}}return r}function t2(e,t,n,r,i){if(r||i){let o=tJ(e.visibleWrites,t);if(!i&&tZ(o))return n;if(!i&&null==n&&!tQ(o,eA()))return null;{let o=t1(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ez(e.path,t)||ez(t,e.path))},t),s=n||tn.EMPTY_NODE;return tX(o,s)}}{let r=tG(e.visibleWrites,t);if(null!=r)return r;{let r=tJ(e.visibleWrites,t);if(tZ(r))return n;if(null==n&&!tQ(r,eA()))return null;{let e=n||tn.EMPTY_NODE;return tX(r,e)}}}}function t4(e,t,n,r){return t2(e.writeTree,e.treePath,t,n,r)}function t3(e,t){return function(e,t,n){let r=tn.EMPTY_NODE,i=tG(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(e5,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){let i=tJ(e.visibleWrites,t);return n.forEachChild(e5,(e,t)=>{let n=tX(tJ(i,new eO(e)),t);r=r.updateImmediateChild(e,n)}),tY(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}{let n=tJ(e.visibleWrites,t);return tY(n).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}}(e.writeTree,e.treePath,t)}function t6(e,t,n,r){return function(e,t,n,r,i){(0,b.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ej(t,n);if(tQ(e.visibleWrites,o))return null;{let t=tJ(e.visibleWrites,o);return tZ(t)?i.getChild(n):tX(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function t5(e,t){var n,r;return n=e.writeTree,r=ej(e.treePath,t),tG(n.visibleWrites,r)}function t8(e,t,n){return function(e,t,n,r){let i=ej(t,n),o=tG(e.visibleWrites,i);if(null!=o)return o;if(!r.isCompleteForChild(n))return null;{let t=tJ(e.visibleWrites,i);return tX(t,r.getNode().getImmediateChild(n))}}(e.writeTree,e.treePath,t,n)}function t9(e,t){return t7(ej(e.treePath,t),e.writeTree)}function t7(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,n=e.childName;(0,b.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,b.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,tc(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tu(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,tl(n,e.snapshotNode));else if("child_changed"===t&&"child_changed"===i)this.changeMap.set(n,tc(n,e.snapshotNode,r.oldSnap));else throw(0,b.g5)("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}let nt=new /**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class nn{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let t=null!=this.optCompleteServerCache_?new tx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return t8(this.writes_,e,t)}}getChildAfterChild(e,t,n){var r;let i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tW(this.viewCache_),o=function(e,t,n,r,i,o,s){let a;let l=tJ(e.visibleWrites,t),u=tG(l,eA());if(null!=u)a=u;else{if(null==n)return[];a=tX(l,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];{let e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),i=n.getNext();for(;i&&e.length<1;)0!==t(i,r)&&e.push(i),i=n.getNext();return e}}((r=this.writes_).writeTree,r.treePath,i,t,0,n,e);return 0===o.length?null:o[0]}}function nr(e,t,n,r,i,o){let s=t.eventCache;if(null!=t5(r,n))return t;{let a,l;if(eF(n)){if((0,b.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let n=tW(t),i=n instanceof tn?n:tn.EMPTY_NODE,s=t3(r,i);a=e.filter.updateFullNode(t.eventCache.getNode(),s,o)}else{let n=t4(r,tW(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}}else{let u=eR(n);if(".priority"===u){(0,b.hu)(1===eN(n),"Can't have a priority with additional path components");let i=s.getNode();l=t.serverCache.getNode();let o=t6(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{let c;let h=eD(n);if(s.isCompleteForChild(u)){l=t.serverCache.getNode();let e=t6(r,n,s.getNode(),l);c=null!=e?s.getNode().getImmediateChild(u).updateChild(h,e):s.getNode().getImmediateChild(u)}else c=t8(r,u,t.serverCache);a=null!=c?e.filter.updateChild(s.getNode(),u,c,h,i,o):s.getNode()}}return tF(t,a,s.isFullyInitialized()||eF(n),e.filter.filtersNodes())}}function ni(e,t,n,r,i,o,s,a){let l;let u=t.serverCache,c=s?e.filter:e.filter.getIndexedFilter();if(eF(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered()){let e=u.getNode().updateChild(n,r);l=c.updateFullNode(u.getNode(),e,null)}else{let e=eR(n);if(!u.isCompleteForPath(n)&&eN(n)>1)return t;let i=eD(n),o=u.getNode().getImmediateChild(e),s=o.updateChild(i,r);l=".priority"===e?c.updatePriority(u.getNode(),s):c.updateChild(u.getNode(),e,s,i,nt,null)}let h=tq(t,l,u.isFullyInitialized()||eF(n),c.filtersNodes()),d=new nn(i,h,o);return nr(e,h,n,i,d,a)}function no(e,t,n,r,i,o,s){let a,l;let u=t.eventCache,c=new nn(i,t,o);if(eF(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),a=tF(t,l,!0,e.filter.filtersNodes());else{let i=eR(n);if(".priority"===i)l=e.filter.updatePriority(t.eventCache.getNode(),r),a=tF(t,l,u.isFullyInitialized(),u.isFiltered());else{let o;let l=eD(n),h=u.getNode().getImmediateChild(i);if(eF(l))o=r;else{let e=c.getCompleteChild(i);o=null!=e?".priority"===ex(l)&&e.getChild(eM(l)).isEmpty()?e:e.updateChild(l,r):tn.EMPTY_NODE}if(h.equals(o))a=t;else{let n=e.filter.updateChild(u.getNode(),i,o,l,c,s);a=tF(t,n,u.isFullyInitialized(),e.filter.filtersNodes())}}}return a}function ns(e,t){return e.eventCache.isCompleteForChild(t)}function na(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function nl(e,t,n,r,i,o,s,a){let l;if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t;l=eF(n)?r:new tB(null).setTree(n,r);let c=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(c.hasChild(n)){let l=t.serverCache.getNode().getImmediateChild(n),c=na(e,l,r);u=ni(e,u,new eO(n),c,i,o,s,a)}}),l.children.inorderTraversal((n,r)=>{let l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){let l=t.serverCache.getNode().getImmediateChild(n),c=na(e,l,r);u=ni(e,u,new eO(n),c,i,o,s,a)}}),u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new th(n.getIndex()),i=n.loadsAllData()?new th(n.getIndex()):n.hasLimit()?new tf(n):new td(n);this.processor_={filter:i};let o=t.serverCache,s=t.eventCache,a=r.updateFullNode(tn.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(tn.EMPTY_NODE,s.getNode(),null),u=new tx(a,o.isFullyInitialized(),r.filtersNodes()),c=new tx(l,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=tj(c,u),this.eventGenerator_=new tL(this.query_)}get query(){return this.query_}}function nc(e){return 0===e.eventRegistrations_.length}function nh(e,t,n){let r=[];if(n){(0,b.hu)(null==t,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(e=>{let t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){let i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function nd(e,t,n,r){var i,o;t.type===m.MERGE&&null!==t.source.queryId&&((0,b.hu)(tW(e.viewCache_),"We should always have a full cache before handling merges"),(0,b.hu)(tU(e.viewCache_),"Missing event cache, even though we have a server cache"));let s=e.viewCache_,a=function(e,t,n,r,i){let o,s;let a=new ne;if(n.type===m.OVERWRITE)n.source.fromUser?o=no(e,t,n.path,n.snap,r,i,a):((0,b.hu)(n.source.fromServer,"Unknown source."),s=n.source.tagged||t.serverCache.isFiltered()&&!eF(n.path),o=ni(e,t,n.path,n.snap,r,i,s,a));else if(n.type===m.MERGE){var l,u;let c;n.source.fromUser?(l=n.path,u=n.children,c=t,u.foreach((n,o)=>{let s=ej(l,n);ns(t,eR(s))&&(c=no(e,c,s,o,r,i,a))}),u.foreach((n,o)=>{let s=ej(l,n);ns(t,eR(s))||(c=no(e,c,s,o,r,i,a))}),o=c):((0,b.hu)(n.source.fromServer,"Unknown source."),s=n.source.tagged||t.serverCache.isFiltered(),o=nl(e,t,n.path,n.children,r,i,s,a))}else if(n.type===m.ACK_USER_WRITE)o=n.revert?function(e,t,n,r,i,o){let s;if(null!=t5(r,n))return t;{let a;let l=new nn(r,t,i),u=t.eventCache.getNode();if(eF(n)||".priority"===eR(n)){let n;if(t.serverCache.isFullyInitialized())n=t4(r,tW(t));else{let e=t.serverCache.getNode();(0,b.hu)(e instanceof tn,"serverChildren would be complete if leaf node"),n=t3(r,e)}a=e.filter.updateFullNode(u,n,o)}else{let i=eR(n),c=t8(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=u.getImmediateChild(i)),(a=null!=c?e.filter.updateChild(u,i,c,eD(n),l,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(u,i,tn.EMPTY_NODE,eD(n),l,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=t4(r,tW(t))).isLeafNode()&&(a=e.filter.updateFullNode(a,s,o))}return s=t.serverCache.isFullyInitialized()||null!=t5(r,eA()),tF(t,a,s,e.filter.filtersNodes())}}(e,t,n.path,r,i,a):function(e,t,n,r,i,o,s){if(null!=t5(i,n))return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(eF(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ni(e,t,n,l.getNode().getChild(n),i,o,a,s);if(!eF(n))return t;{let r=new tB(null);return l.getNode().forEachChild(eJ,(e,t)=>{r=r.set(new eO(e),t)}),nl(e,t,n,r,i,o,a,s)}}{let u=new tB(null);return r.foreach((e,t)=>{let r=ej(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))}),nl(e,t,n,u,i,o,a,s)}}(e,t,n.path,n.affectedTree,r,i,a);else if(n.type===m.LISTEN_COMPLETE)o=function(e,t,n,r,i){let o=t.serverCache,s=tq(t,o.getNode(),o.isFullyInitialized()||eF(n),o.isFiltered());return nr(e,s,n,r,nt,i)}(e,t,n.path,r,a);else throw(0,b.g5)("Unknown operation type: "+n.type);let c=a.getChanges();return function(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tU(e);!(n.length>0)&&e.eventCache.isFullyInitialized()&&(!i||r.getNode().equals(o))&&r.getNode().getPriority().equals(o.getPriority())||n.push(ta(tU(t)))}}(t,o,c),{viewCache:o,changes:c}}(e.processor_,s,t,n,r);return i=e.processor_,o=a.viewCache,(0,b.hu)(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,b.hu)(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,b.hu)(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,nf(e,a.changes,a.viewCache.eventCache.getNode(),null)}function nf(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){let i=[],o=[];return t.forEach(t=>{if("child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)){var n;o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}}),tM(e,i,"child_removed",t,r,n),tM(e,i,"child_added",t,r,n),tM(e,i,"child_moved",o,r,n),tM(e,i,"child_changed",t,r,n),tM(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}class np{constructor(){this.views=new Map}}function ng(e,t,n,r){let i=t.source.queryId;if(null!==i){let o=e.views.get(i);return(0,b.hu)(null!=o,"SyncTree gave us an op for an invalid query."),nd(o,t,n,r)}{let i=[];for(let o of e.views.values())i=i.concat(nd(o,t,n,r));return i}}function nm(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=t4(n,i?r:null),o=!1;e?o=!0:r instanceof tn?(e=t3(n,r),o=!1):(e=tn.EMPTY_NODE,o=!1);let s=tj(new tx(e,o,!1),new tx(r,i,!1));return new nu(t,s)}return s}function nv(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ny(e,t){let n=null;for(let r of e.views.values())n=n||function(e,t){let n=tW(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!eF(t)&&!n.getImmediateChild(eR(t)).isEmpty())?n.getChild(t):null}(r,t);return n}function n_(e,t){let n=t._queryParams;if(n.loadsAllData())return nw(e);{let n=t._queryIdentifier;return e.views.get(n)}}function nb(e){return null!=nw(e)}function nw(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let nI=1;class nS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tB(null),this.pendingWriteTree_={visibleWrites:tV.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nC(e,t,n,r,i){var o,s;return(o=e.pendingWriteTree_,s=i,(0,b.hu)(r>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),o.allWrites.push({path:t,snap:n,writeId:r,visible:s}),s&&(o.visibleWrites=tH(o.visibleWrites,t,n)),o.lastWriteId=r,i)?nR(e,new tN(tk(),t,n)):[]}function nE(e,t,n=!1){let r=function(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t),i=function(e,t){let n=e.allWrites.findIndex(e=>e.writeId===t);(0,b.hu)(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let t=e.allWrites[s];t.visible&&(s>=n&&function(e,t){if(e.snap)return ez(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&ez(ej(e.path,n),t))return!0;return!1}(t,r.path)?i=!1:ez(r.path,t.path)&&(o=!0)),s--}if(!i)return!1;if(o){var a;return(a=e).visibleWrites=t1(a.allWrites,t0,eA()),a.allWrites.length>0?a.lastWriteId=a.allWrites[a.allWrites.length-1].writeId:a.lastWriteId=-1,!0}if(r.snap)e.visibleWrites=t$(e.visibleWrites,r.path);else{let t=r.children;X(t,t=>{e.visibleWrites=t$(e.visibleWrites,ej(r.path,t))})}return!0}(e.pendingWriteTree_,t);if(!i)return[];{let t=new tB(null);return null!=r.snap?t=t.set(eA(),!0):X(r.children,e=>{t=t.set(new eO(e),!0)}),nR(e,new tA(r.path,t,n))}}function nT(e,t,n){return nR(e,new tN(tP(),t,n))}function nk(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&("default"===t._queryIdentifier||null!=n_(s,t))){let l=function(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=nb(e);if("default"===i)for(let[t,i]of e.views.entries())s=s.concat(nh(i,n,r)),nc(i)&&(e.views.delete(t),i.query._queryParams.loadsAllData()||o.push(i.query));else{let t=e.views.get(i);t&&(s=s.concat(nh(t,n,r)),nc(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!nb(e)&&o.push(new((0,b.hu)(h,"Reference.ts has not been loaded"),h)(t._repo,t._path)),{removed:o,events:s}}(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));let u=l.removed;if(a=l.events,!i){let n=-1!==u.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(o,(e,t)=>nb(t));if(n&&!i){let t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){let n=t.fold((e,t,n)=>{if(t&&nb(t)){let e=nw(t);return[e]}{let e=[];return t&&(e=nv(t)),X(n,(t,n)=>{e=e.concat(n)}),e}});for(let t=0;t<n.length;++t){let r=n[t],i=r.query,o=nN(e,r);e.listenProvider_.startListening(nF(i),nD(e,i),o.hashFn,o.onComplete)}}}i||!(u.length>0)||r||(n?e.listenProvider_.stopListening(nF(t),null):u.forEach(t=>{let n=e.queryToTagMap.get(nx(t));e.listenProvider_.stopListening(nF(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let t=nx(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,u)}return a}function nP(e,t,n,r){let i=nL(e,r);if(null==i)return[];{let r=nM(i),o=r.path,s=r.queryId,a=eq(o,t),l=new tN(tO(s),a,n);return nj(e,o,l)}}function nO(e,t,n,r=!1){var i;let o;let s=t._path,a=null,l=!1;e.syncPointTree_.foreachOnPath(s,(e,t)=>{let n=eq(e,s);a=a||ny(t,n),l=l||nb(t)});let u=e.syncPointTree_.get(s);if(u?(l=l||nb(u),a=a||ny(u,eA())):(u=new np,e.syncPointTree_=e.syncPointTree_.set(s,u)),null!=a)o=!0;else{o=!1,a=tn.EMPTY_NODE;let t=e.syncPointTree_.subtree(s);t.foreachChild((e,t)=>{let n=ny(t,eA());n&&(a=a.updateImmediateChild(e,n))})}let c=null!=n_(u,t);if(!c&&!t._queryParams.loadsAllData()){let n=nx(t);(0,b.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");let r=nI++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let h=(i=e.pendingWriteTree_,t7(s,i)),d=function(e,t,n,r,i,o){let s=nm(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),!function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){let n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){let e=n.getNode();e.forEachChild(e5,(e,t)=>{r.push(tl(e,t))})}return n.isFullyInitialized()&&r.push(ta(n.getNode())),nf(e,r,n.getNode(),t)}(s,n)}(u,t,n,h,a,o);if(!c&&!l&&!r){let n=n_(u,t);d=d.concat(function(e,t,n){let r=t._path,i=nD(e,t),o=nN(e,n),s=e.listenProvider_.startListening(nF(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)(0,b.hu)(!nb(a.value),"If we're adding a query, it shouldn't be shadowed");else{let t=a.fold((e,t,n)=>{if(!eF(e)&&t&&nb(t))return[nw(t).query];{let e=[];return t&&(e=e.concat(nv(t).map(e=>e.query))),X(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){let r=t[n];e.listenProvider_.stopListening(nF(r),nD(e,r))}}return s}(e,t,n))}return d}function nA(e,t,n){let r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{let r=eq(e,t),i=ny(n,r);if(i)return i});return t2(r,t,i,n,!0)}function nR(e,t){var n;return function e(t,n,r,i){if(eF(t.path))return function e(t,n,r,i){let o=n.get(eA());null==r&&null!=o&&(r=ny(o,eA()));let s=[];return n.children.inorderTraversal((n,o)=>{let a=r?r.getImmediateChild(n):null,l=t9(i,n),u=t.operationForChild(n);u&&(s=s.concat(e(u,o,a,l)))}),o&&(s=s.concat(ng(o,t,i,r))),s}(t,n,r,i);{let o=n.get(eA());null==r&&null!=o&&(r=ny(o,eA()));let s=[],a=eR(t.path),l=t.operationForChild(a),u=n.children.get(a);if(u&&l){let t=r?r.getImmediateChild(a):null,n=t9(i,a);s=s.concat(e(l,u,t,n))}return o&&(s=s.concat(ng(o,t,i,r))),s}}(t,e.syncPointTree_,null,(n=e.pendingWriteTree_,t7(eA(),n)))}function nN(e,t){let n=t.query,r=nD(e,n);return{hashFn:()=>{let e=t.viewCache_.serverCache.getNode()||tn.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t){var i;return r?function(e,t,n){let r=nL(e,n);if(!r)return[];{let n=nM(r),i=n.path,o=n.queryId,s=eq(i,t),a=new tR(tO(o),s);return nj(e,i,a)}}(e,n._path,r):(i=n._path,nR(e,new tR(tP(),i)))}{let r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");let r=Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return nk(e,n,null,r)}}}}function nD(e,t){let n=nx(t);return e.queryToTagMap.get(n)}function nx(e){return e._path.toString()+"$"+e._queryIdentifier}function nL(e,t){return e.tagToQueryMap.get(t)}function nM(e){let t=e.indexOf("$");return(0,b.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new eO(e.substr(0,t))}}function nj(e,t,n){let r=e.syncPointTree_.get(t);(0,b.hu)(r,"Missing sync point for query tag that we're tracking");let i=t7(t,e.pendingWriteTree_);return ng(r,n,i,null)}function nF(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,b.hu)(d,"Reference.ts has not been loaded"),d)(e._repo,e._path):e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new nq(t)}node(){return this.node_}}class nU{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=ej(this.path_,e);return new nU(this.syncTree_,t)}node(){return nA(this.syncTree_,this.path_)}}let nW=function(e,t,n){return e&&"object"==typeof e?((0,b.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"])?nz(e[".sv"],t,n):"object"==typeof e[".sv"]?nB(e[".sv"],t):void(0,b.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2)):e},nz=function(e,t,n){if("timestamp"===e)return n.timestamp;(0,b.hu)(!1,"Unexpected server value: "+e)},nB=function(e,t,n){e.hasOwnProperty("increment")||(0,b.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;"number"!=typeof r&&(0,b.hu)(!1,"Unexpected increment value: "+r);let i=t.node();if((0,b.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return"number"!=typeof o?r:o+r},nV=function(e,t,n,r){return nK(t,new nU(n,e),r)},nH=function(e,t,n){return nK(e,new nq(t),n)};function nK(e,t,n){let r;let i=e.getPriority().val(),o=nW(i,t.getImmediateChild(".priority"),n);if(!e.isLeafNode())return r=e,o!==e.getPriority().val()&&(r=r.updatePriority(new e6(o))),e.forEachChild(e5,(e,i)=>{let o=nK(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r;{let r=nW(e.getValue(),t,n);return r!==e.getValue()||o!==e.getPriority().val()?new e6(r,ti(o)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function nQ(e,t){let n=t instanceof eO?t:new eO(t),r=e,i=eR(n);for(;null!==i;){let e=(0,b.DV)(r.node.children,i)||{children:{},childCount:0};r=new n$(i,r,e),i=eR(n=eD(n))}return r}function nG(e){return e.node.value}function nY(e,t){e.node.value=t,function e(t){null!==t.parent&&function(t,n,r){let i=void 0===nG(r)&&!nJ(r),o=(0,b.r3)(t.node.children,n);i&&o?(delete t.node.children[n],t.node.childCount--,e(t)):i||o||(t.node.children[n]=r.node,t.node.childCount++,e(t))}(t.parent,t.name,t)}(e)}function nJ(e){return e.node.childCount>0}function nZ(e,t){X(e.node.children,(n,r)=>{t(new n$(n,e,r))})}function nX(e){return new eO(null===e.parent?e.name:nX(e.parent)+"/"+e.name)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n0=/[\[\].#$\/\u0000-\u001F\u007F]/,n1=/[\[\].#$\u0000-\u001F\u007F]/,n2=function(e){return"string"==typeof e&&0!==e.length&&!n0.test(e)},n4=function(e){return"string"==typeof e&&0!==e.length&&!n1.test(e)},n3=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!V(e)||e&&"object"==typeof e&&(0,b.r3)(e,".sv")},n6=function(e,t,n,r){r&&void 0===t||n5((0,b.gK)(e,"value"),t,n)},n5=function(e,t,n){let r=n instanceof eO?new eB(n,e):n;if(void 0===t)throw Error(e+"contains undefined "+eH(r));if("function"==typeof t)throw Error(e+"contains a function "+eH(r)+" with contents = "+t.toString());if(V(t))throw Error(e+"contains "+t.toString()+" "+eH(r));if("string"==typeof t&&t.length>3495253.3333333335&&(0,b.ug)(t)>10485760)throw Error(e+"contains a string greater than 10485760 utf8 bytes "+eH(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(X(t,(t,o)=>{var s;if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!n2(t)))throw Error(e+" contains an invalid key ("+t+") "+eH(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(s=r).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(t),s.byteLength_+=(0,b.ug)(t),eV(s),n5(e,o,r),function(e){let t=e.parts_.pop();e.byteLength_-=(0,b.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw Error(e+' contains ".value" child '+eH(r)+" in addition to actual children.")}},n8=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let i=eL(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!n2(i[t]))throw Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(eU);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&ez(i,r))throw Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},n9=function(e,t,n,r){if(r&&void 0===t)return;let i=(0,b.gK)(e,"values");if(!(t&&"object"==typeof t)||Array.isArray(t))throw Error(i+" must be an object containing the children to replace.");let o=[];X(t,(e,t)=>{let r=new eO(e);if(n5(i,t,ej(n,r)),".priority"===ex(r)&&!n3(t))throw Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)}),n8(i,o)},n7=function(e,t,n){if(!n||void 0!==t){if(V(t))throw Error((0,b.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!n3(t))throw Error((0,b.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},re=function(e,t,n,r){if((!r||void 0!==n)&&!n2(n))throw Error((0,b.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rt=function(e,t,n,r){if((!r||void 0!==n)&&!n4(n))throw Error((0,b.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},rn=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rt(e,t,n,r)},rr=function(e,t){if(".info"===eR(t))throw Error(e+" failed = Can't modify data under /.info/")},ri=function(e,t){var n;let r=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!n2(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==r.length&&((n=r)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),!n4(n)))throw Error((0,b.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rs(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();null===n||eW(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function ra(e,t,n){rs(e,n),ru(e,e=>eW(e,t))}function rl(e,t,n){rs(e,n),ru(e,e=>ez(e,t)||ez(t,e))}function ru(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(function(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(null!==n){e.events[t]=null;let r=n.getEventRunner();L&&F("event: "+n.toString()),er(r)}}}(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="repo_interrupt";class rh{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ro,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tI(),this.transactionQueueTree_=new n$,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rd(e){let t=e.infoData_.getNode(new eO(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n}function rf(e){var t;return(t=t={timestamp:rd(e)}).timestamp=t.timestamp||new Date().getTime(),t}function rp(e,t,n,r,i){e.dataUpdateCount++;let o=new eO(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i){if(r){let t=(0,b.UI)(n,e=>ti(e));s=function(e,t,n,r){let i=nL(e,r);if(!i)return[];{let r=nM(i),o=r.path,s=r.queryId,a=eq(o,t),l=tB.fromObject(n),u=new tD(tO(s),a,l);return nj(e,o,u)}}(e.serverSyncTree_,o,t,i)}else{let t=ti(n);s=nP(e.serverSyncTree_,o,t,i)}}else if(r){let t=(0,b.UI)(n,e=>ti(e));s=function(e,t,n){let r=tB.fromObject(n);return nR(e,new tD(tP(),t,r))}(e.serverSyncTree_,o,t)}else{let t=ti(n);s=nT(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=rT(e,o)),rl(e.eventQueue_,a,s)}function rg(e,t){rm(e,"connected",t),!1===t&&function(e){rI(e,"onDisconnectEvents");let t=rf(e),n=tI();tC(e.onDisconnect_,eA(),(r,i)=>{let o=nV(r,i,e.serverSyncTree_,t);tS(n,r,o)});let r=[];tC(n,eA(),(t,n)=>{r=r.concat(nT(e.serverSyncTree_,t,n));let i=rA(e,t);rT(e,i)}),e.onDisconnect_=tI(),rl(e.eventQueue_,eA(),r)}(e)}function rm(e,t,n){let r=new eO("/.info/"+t),i=ti(n);e.infoData_.updateSnapshot(r,i);let o=nT(e.infoSyncTree_,r,i);rl(e.eventQueue_,r,o)}function rv(e){return e.nextWriteId_++}function ry(e,t,n,r,i){rI(e,"set",{path:t.toString(),value:n,priority:r});let o=rf(e),s=ti(n,r),a=nA(e.serverSyncTree_,t),l=nH(s,a,o),u=rv(e),c=nC(e.serverSyncTree_,t,l,u,!0);rs(e.eventQueue_,c),e.server_.put(t.toString(),s.val(!0),(n,r)=>{let o="ok"===n;o||z("set at "+t+" failed: "+n);let s=nE(e.serverSyncTree_,u,!o);rl(e.eventQueue_,t,s),rS(e,i,n,r)});let h=rA(e,t);rT(e,h),rl(e.eventQueue_,h,[])}function r_(e,t,n,r){let i=ti(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,o)=>{"ok"===n&&tS(e.onDisconnect_,t,i),rS(e,r,n,o)})}function rb(e,t,n){let r;r=".info"===eR(t._path)?nk(e.infoSyncTree_,t,n):nk(e.serverSyncTree_,t,n),ra(e.eventQueue_,t._path,r)}function rw(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rc)}function rI(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),F(n,...t)}function rS(e,t,n,r){t&&er(()=>{if("ok"===n)t(null);else{let e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);let o=Error(i);o.code=e,t(o)}})}function rC(e,t,n){return nA(e.serverSyncTree_,t,n)||tn.EMPTY_NODE}function rE(e,t=e.transactionQueueTree_){if(t||rO(e,t),nG(t)){let n=rP(e,t);(0,b.hu)(n.length>0,"Sending zero length transaction queue");let r=n.every(e=>0===e.status);r&&function(e,t,n){let r=n.map(e=>e.currentWriteId),i=rC(e,t,r),o=i,s=i.hash();for(let e=0;e<n.length;e++){let r=n[e];(0,b.hu)(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;let i=eq(t,r.path);o=o.updateChild(i,r.currentOutputSnapshotRaw)}let a=o.val(!0);e.server_.put(t.toString(),a,r=>{rI(e,"transaction put response",{path:t.toString(),status:r});let i=[];if("ok"===r){let r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(nE(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();rO(e,nQ(e.transactionQueueTree_,t)),rE(e,e.transactionQueueTree_),rl(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)er(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{z("transaction at "+t.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}rT(e,t)}},s)}(e,nX(t),n)}else nJ(t)&&nZ(t,t=>{rE(e,t)})}function rT(e,t){let n=rk(e,t),r=nX(n),i=rP(e,n);return function(e,t,n){if(0===t.length)return;let r=[],i=[],o=t.filter(e=>0===e.status),s=o.map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){let a=t[o],l=eq(n,a.path),u=!1,c;if((0,b.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)u=!0,c=a.abortReason,i=i.concat(nE(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status){if(a.retryCount>=25)u=!0,c="maxretry",i=i.concat(nE(e.serverSyncTree_,a.currentWriteId,!0));else{let n=rC(e,a.path,s);a.currentInputSnapshot=n;let r=t[o].update(n.val());if(void 0!==r){n5("transaction failed: Data returned ",r,a.path);let t=ti(r),o="object"==typeof r&&null!=r&&(0,b.r3)(r,".priority");o||(t=t.updatePriority(n.getPriority()));let l=a.currentWriteId,u=rf(e),c=nH(t,n,u);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=c,a.currentWriteId=rv(e),s.splice(s.indexOf(l),1),i=(i=i.concat(nC(e.serverSyncTree_,a.path,c,a.currentWriteId,a.applyLocally))).concat(nE(e.serverSyncTree_,l,!0))}else u=!0,c="nodata",i=i.concat(nE(e.serverSyncTree_,a.currentWriteId,!0))}}rl(e.eventQueue_,n,i),i=[],u&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&("nodata"===c?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(Error(c),!1,null))))}rO(e,e.transactionQueueTree_);for(let e=0;e<r.length;e++)er(r[e]);rE(e,e.transactionQueueTree_)}(e,i,r),r}function rk(e,t){let n;let r=e.transactionQueueTree_;for(n=eR(t);null!==n&&void 0===nG(r);)r=nQ(r,n),n=eR(t=eD(t));return r}function rP(e,t){let n=[];return function e(t,n,r){let i=nG(n);if(i)for(let e=0;e<i.length;e++)r.push(i[e]);nZ(n,n=>{e(t,n,r)})}(e,t,n),n.sort((e,t)=>e.order-t.order),n}function rO(e,t){let n=nG(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,nY(t,n.length>0?n:void 0)}nZ(t,t=>{rO(e,t)})}function rA(e,t){let n=nX(rk(e,t)),r=nQ(e.transactionQueueTree_,t);return!function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{rR(e,t)}),rR(e,r),!function e(t,n,r,i){r&&!i&&n(t),nZ(t,t=>{e(t,n,!0,i)}),r&&i&&n(t)}(r,t=>{rR(e,t)}),n}function rR(e,t){let n=nG(t);if(n){let r=[],i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,b.hu)(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):((0,b.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(nE(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,Error("set"),!1,null))));-1===o?nY(t,void 0):n.length=o+1,rl(e.eventQueue_,nX(t),i);for(let e=0;e<r.length;e++)er(r[e])}}let rN=function(e,t){let n=rD(e),r=n.namespace;"firebase.com"===n.domain&&W(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||W("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||B();let i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ed(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new eO(n.pathString)}},rD=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(e){let t="",n=e.split("/");for(let e=0;e<n.length;e++)if(n[e].length>0){let r=n[e];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(e){}t+="/"+r}return t}(e.substring(c,h)));let d=function(e){let t={};for(let n of("?"===e.charAt(0)&&(e=e.substring(1)),e.split("&"))){if(0===n.length)continue;let r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):z(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));(u=t.indexOf(":"))>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;let f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{let e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},rx="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rL=function(){let e=0,t=[];return function(n){let r;let i=n===e;e=n;let o=Array(8);for(r=7;r>=0;r--)o[r]=rx.charAt(n%64),n=Math.floor(n/64);(0,b.hu)(0===n,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=rx.charAt(t[r]);return(0,b.hu)(20===s.length,"nextPushId: Length should be 20."),s}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){let e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,b.Wl)(this.snapshot.exportVal())}}class rj{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,b.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e,t){this._repo=e,this._path=t}cancel(){let e=new b.BH;return!function(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&function e(t,n){if(eF(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{let r=t.value;return t.value=null,r.forEachChild(e5,(e,n)=>{tS(t,new eO(e),n)}),e(t,n)}}if(!(t.children.size>0))return!0;{let r=eR(n);if(n=eD(n),t.children.has(r)){let i=e(t.children.get(r),n);i&&t.children.delete(r)}return 0===t.children.size}}(e.onDisconnect_,t),rS(e,n,r,i)})}(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){rr("OnDisconnect.remove",this._path);let e=new b.BH;return r_(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){rr("OnDisconnect.set",this._path),n6("OnDisconnect.set",e,this._path,!1);let t=new b.BH;return r_(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){rr("OnDisconnect.setWithPriority",this._path),n6("OnDisconnect.setWithPriority",e,this._path,!1),n7("OnDisconnect.setWithPriority",t,!1);let n=new b.BH;return!function(e,t,n,r,i){let o=ti(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(n,r)=>{"ok"===n&&tS(e.onDisconnect_,t,o),rS(e,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){rr("OnDisconnect.update",this._path),n9("OnDisconnect.update",e,this._path,!1);let t=new b.BH;return!function(e,t,n,r){if((0,b.xb)(n)){F("onDisconnect().update() called with empty data.  Don't do anything."),rS(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(i,o)=>{"ok"===i&&X(n,(n,r)=>{let i=ti(r);tS(e.onDisconnect_,ej(t,n),i)}),rS(e,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return eF(this._path)?null:ex(this._path)}get ref(){return new rV(this._repo,this._path)}get _queryIdentifier(){let e=t_(this._queryParams),t=J(e);return"{}"===t?"default":t}get _queryObject(){return t_(this._queryParams)}isEqual(e){if(!((e=(0,b.m9)(e))instanceof rU))return!1;let t=this._repo===e._repo,n=eW(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function rW(e,t){if(!0===e._orderByCalled)throw Error(t+": You can't combine multiple orderBy calls.")}function rz(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===eJ){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){let n=e.getIndexStartName();if(n!==K)throw Error(r);if("string"!=typeof t)throw Error(i)}if(e.hasEnd()){let t=e.getIndexEndName();if(t!==$)throw Error(r);if("string"!=typeof n)throw Error(i)}}else if(e.getIndex()===e5){if(null!=t&&!n3(t)||null!=n&&!n3(n))throw Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,b.hu)(e.getIndex() instanceof to||e.getIndex()===ts,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rB(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class rV extends rU{constructor(e,t){super(e,t,new tp,!1)}get parent(){let e=eM(this._path);return null===e?null:new rV(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class rH{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new eO(e),n=rQ(this.ref,e);return new rH(this._node.getChild(t),n,e5)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;let t=this._node;return!!t.forEachChild(this._index,(t,n)=>e(new rH(n,rQ(this.ref,t),e5)))}hasChild(e){let t=new eO(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rK(e,t){return(e=(0,b.m9)(e))._checkNotDeleted("ref"),void 0!==t?rQ(e._root,t):e._root}function r$(e,t){(e=(0,b.m9)(e))._checkNotDeleted("refFromURL");let n=rN(t,e._repo.repoInfo_.nodeAdmin);ri("refFromURL",n);let r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||W("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),rK(e,n.path.toString())}function rQ(e,t){return null===eR((e=(0,b.m9)(e))._path)?rn("child","path",t,!1):rt("child","path",t,!1),new rV(e._repo,ej(e._path,t))}function rG(e,t){rr("set",(e=(0,b.m9)(e))._path),n6("set",t,e._path,!1);let n=new b.BH;return ry(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class rY{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){let n=t._queryParams.getIndex();return new rM("value",this,new rH(e.snapshotNode,new rV(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rj(this,e,t):null}matches(e){return e instanceof rY&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rJ{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rj(this,e,t):null}createEvent(e,t){(0,b.hu)(null!=e.childName,"Child events should have a childName.");let n=rQ(new rV(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new rM(e.type,this,new rH(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rJ&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function rZ(e,t,n,r,i){var o;let s,a;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){let t=n,r=(n,r)=>{rb(e._repo,e,u),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}let l=new rF(n,s||void 0),u="value"===t?new rY(l):new rJ(t,l);return o=e._repo,a=".info"===eR(e._path)?nO(o.infoSyncTree_,e,u):nO(o.serverSyncTree_,e,u),ra(o.eventQueue_,e._path,a),()=>rb(e._repo,e,u)}function rX(e,t,n,r){return rZ(e,"value",t,n,r)}function r0(e,t,n,r){return rZ(e,"child_added",t,n,r)}function r1(e,t,n,r){return rZ(e,"child_changed",t,n,r)}function r2(e,t,n,r){return rZ(e,"child_moved",t,n,r)}function r4(e,t,n,r){return rZ(e,"child_removed",t,n,r)}function r3(e,t,n){let r=null,i=n?new rF(n):null;"value"===t?r=new rY(i):t&&(r=new rJ(t,i)),rb(e._repo,e,r)}class r6{}class r5 extends r6{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){n6("endAt",this._value,e._path,!0);let t=tm(e._queryParams,this._value,this._key);if(rB(t),rz(t),e._queryParams.hasEnd())throw Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rU(e._repo,e._path,t,e._orderByCalled)}}class r8 extends r6{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,r;let i;n6("endBefore",this._value,e._path,!1);let o=(t=e._queryParams,n=this._value,r=this._key,(i=t.index_===eJ||r?tm(t,n,r):tm(t,n,K)).endBeforeSet_=!0,i);if(rB(o),rz(o),e._queryParams.hasEnd())throw Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new rU(e._repo,e._path,o,e._orderByCalled)}}class r9 extends r6{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){n6("startAt",this._value,e._path,!0);let t=tg(e._queryParams,this._value,this._key);if(rB(t),rz(t),e._queryParams.hasStart())throw Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new rU(e._repo,e._path,t,e._orderByCalled)}}class r7 extends r6{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){var t,n,r;let i;n6("startAfter",this._value,e._path,!1);let o=(t=e._queryParams,n=this._value,r=this._key,(i=t.index_===eJ||r?tg(t,n,r):tg(t,n,$)).startAfterSet_=!0,i);if(rB(o),rz(o),e._queryParams.hasStart())throw Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new rU(e._repo,e._path,o,e._orderByCalled)}}class ie extends r6{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new rU(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class it extends r6{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new rU(e._repo,e._path,function(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class ir extends r6{constructor(e){super(),this._path=e}_apply(e){rW(e,"orderByChild");let t=new eO(this._path);if(eF(t))throw Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new to(t),r=tv(e._queryParams,n);return rz(r),new rU(e._repo,e._path,r,!0)}}class ii extends r6{_apply(e){rW(e,"orderByKey");let t=tv(e._queryParams,eJ);return rz(t),new rU(e._repo,e._path,t,!0)}}class io extends r6{_apply(e){rW(e,"orderByPriority");let t=tv(e._queryParams,e5);return rz(t),new rU(e._repo,e._path,t,!0)}}class is extends r6{_apply(e){rW(e,"orderByValue");let t=tv(e._queryParams,ts);return rz(t),new rU(e._repo,e._path,t,!0)}}class ia extends r6{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(n6("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new r5(this._value,this._key)._apply(new r9(this._value,this._key)._apply(e))}}function il(e,...t){let n=(0,b.m9)(e);for(let e of t)n=e._apply(n);return n}(0,b.hu)(!h,"__referenceConstructor has already been defined"),h=rV,(0,b.hu)(!d,"__referenceConstructor has already been defined"),d=rV;let iu={};function ic(e,t,n,r,i){var o,s,a;let l,u,c,h,d=r||e.options.databaseURL;void 0===d&&(e.options.projectId||W("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),F("Using default host for project ",e.options.projectId),d=`${e.options.projectId}-default-rtdb.firebaseio.com`);let f=rN(d,i),p=f.repoInfo;void 0!==I&&I.env&&(c=I.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(h=!0,p=(f=rN(d=`http://${c}?ns=${p.namespace}`,i)).repoInfo):h=!f.repoInfo.secure;let g=i&&h?new el(el.OWNER):new ea(e.name,e.options,t);ri("Invalid Firebase Database URL",f),eF(f.path)||W("Database URL must point to the root of a Firebase Database (not including a child path).");let m=(o=p,s=e,a=new es(e.name,n),(l=iu[s.name])||(l={},iu[s.name]=l),(u=l[o.toURLString()])&&W("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new rh(o,!1,g,a),l[o.toURLString()]=u,u);return new ih(m,e)}class ih{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=ev(e.repoInfo_),e.forceRestClient_||ei())e.server_=new tb(e.repoInfo_,(t,n,r,i)=>{rp(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>rg(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,b.Wl)(n)}catch(e){throw Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new e$(e.repoInfo_,t,(t,n,r,i)=>{rp(e,t,n,r,i)},t=>{rg(e,t)},t=>{X(t,(t,n)=>{rm(e,t,n)})},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){let n=e.toString();return em[n]||(em[n]=t()),em[n]}(e.repoInfo_,()=>new tT(e.stats_,e.server_)),e.infoData_=new tw,e.infoSyncTree_=new nS({startListening:(t,n,r,i)=>{let o=[],s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=nT(e.infoSyncTree_,t._path,s),setTimeout(()=>{i("ok")},0)),o},stopListening:()=>{}}),rm(e,"connected",!1),e.serverSyncTree_=new nS({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{let o=i(n,r);rl(e.eventQueue_,t._path,o)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new rV(this._repo,eA())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){let n=iu[t];n&&n[e.key]===e||W(`Database ${t}(${e.repoInfo_}) has already been deleted.`),rw(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&W("Cannot call "+e+" on a deleted database.")}}function id(){eC.IS_TRANSPORT_INITIALIZED&&z("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ip(){id(),eb.forceDisallow()}function ig(){id(),eS.forceDisallow(),eb.forceAllow()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}e$.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},e$.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},E=_.SDK_VERSION,(0,_._registerComponent)(new y.wA("database",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return ic(n,r,i,t)},"PUBLIC").setMultipleInstances(!0)),(0,_.registerVersion)(S,C,void 0),(0,_.registerVersion)(S,C,"esm2017");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iv=new w.Yd("@firebase/database-compat"),iy=function(e){iv.warn("FIREBASE WARNING: "+e)},i_=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw Error((0,b.gK)(e,t)+"must be a boolean.")},ib=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw Error((0,b.gK)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this._delegate=e}cancel(e){(0,b.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,b.Wj)("OnDisconnect.cancel","onComplete",e,!0);let t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,b.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,b.Wj)("OnDisconnect.remove","onComplete",e,!0);let t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,b.Dv)("OnDisconnect.set",1,2,arguments.length),(0,b.Wj)("OnDisconnect.set","onComplete",t,!0);let n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,b.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,b.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);let r=this._delegate.setWithPriority(e,t);return n&&r.then(()=>n(null),e=>n(e)),r}update(e,t){if((0,b.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,iy("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,b.Wj)("OnDisconnect.update","onComplete",t,!0);let n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,b.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,b.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,b.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,b.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,b.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,b.Dv)("DataSnapshot.child",0,1,arguments.length),rt("DataSnapshot.child","path",e=String(e),!1),new iS(this._database,this._delegate.child(e))}hasChild(e){return(0,b.Dv)("DataSnapshot.hasChild",1,1,arguments.length),rt("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,b.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,b.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,b.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new iS(this._database,t)))}hasChildren(){return(0,b.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,b.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,b.Dv)("DataSnapshot.ref",0,0,arguments.length),new iE(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class iC{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,b.Dv)("Query.on",2,4,arguments.length),(0,b.Wj)("Query.on","callback",t,!1);let o=iC.getCancelAndContextArgs_("Query.on",n,r),s=(e,n)=>{t.call(o.context,new iS(this.database,e),n)};s.userCallback=t,s.context=o.context;let a=null===(i=o.cancel)||void 0===i?void 0:i.bind(o.context);switch(e){case"value":return rX(this._delegate,s,a),t;case"child_added":return r0(this._delegate,s,a),t;case"child_removed":return r4(this._delegate,s,a),t;case"child_changed":return r1(this._delegate,s,a),t;case"child_moved":return r2(this._delegate,s,a),t;default:throw Error((0,b.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,b.Dv)("Query.off",0,3,arguments.length),ib("Query.off",e,!0),(0,b.Wj)("Query.off","callback",t,!0),(0,b.lb)("Query.off","context",n,!0),t){let r=()=>{};r.userCallback=t,r.context=n,r3(this._delegate,e,r)}else r3(this._delegate,e)}get(){return(function(e){e=(0,b.m9)(e);let t=new rF(()=>{}),n=new rY(t);return(function(e,t,n){let r=function(e,t){var n;let r=t._path,i=null;e.syncPointTree_.foreachOnPath(r,(e,t)=>{let n=eq(e,r);i=i||ny(t,n)});let o=e.syncPointTree_.get(r);o?i=i||ny(o,eA()):(o=new np,e.syncPointTree_=e.syncPointTree_.set(r,o));let s=null!=i,a=s?new tx(i,!0,!1):null,l=(n=e.pendingWriteTree_,t7(t._path,n)),u=nm(o,t,l,s?a.getNode():tn.EMPTY_NODE,s);return tU(u.viewCache_)}(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{let i;let o=ti(r).withIndex(t._queryParams.getIndex());if(nO(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=nT(e.serverSyncTree_,t._path,o);else{let n=nD(e.serverSyncTree_,t);i=nP(e.serverSyncTree_,t._path,o,n)}return rl(e.eventQueue_,t._path,i),nk(e.serverSyncTree_,t,n,null,!0),o},n=>(rI(e,"get for query "+(0,b.Wl)(t)+" failed: "+n),Promise.reject(Error(n))))})(e._repo,e,n).then(t=>new rH(t,new rV(e._repo,e._path),e._queryParams.getIndex()))})(this._delegate).then(e=>new iS(this.database,e))}once(e,t,n,r){(0,b.Dv)("Query.once",1,4,arguments.length),(0,b.Wj)("Query.once","callback",t,!0);let i=iC.getCancelAndContextArgs_("Query.once",n,r),o=new b.BH,s=(e,n)=>{let r=new iS(this.database,e);t&&t.call(i.context,r,n),o.resolve(r)};s.userCallback=t,s.context=i.context;let a=e=>{i.cancel&&i.cancel.call(i.context,e),o.reject(e)};switch(e){case"value":rX(this._delegate,s,a,{onlyOnce:!0});break;case"child_added":r0(this._delegate,s,a,{onlyOnce:!0});break;case"child_removed":r4(this._delegate,s,a,{onlyOnce:!0});break;case"child_changed":r1(this._delegate,s,a,{onlyOnce:!0});break;case"child_moved":r2(this._delegate,s,a,{onlyOnce:!0});break;default:throw Error((0,b.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,b.Dv)("Query.limitToFirst",1,1,arguments.length),new iC(this.database,il(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToFirst: First argument must be a positive integer.");return new ie(e)}(e)))}limitToLast(e){return(0,b.Dv)("Query.limitToLast",1,1,arguments.length),new iC(this.database,il(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw Error("limitToLast: First argument must be a positive integer.");return new it(e)}(e)))}orderByChild(e){return(0,b.Dv)("Query.orderByChild",1,1,arguments.length),new iC(this.database,il(this._delegate,function(e){if("$key"===e)throw Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return rt("orderByChild","path",e,!1),new ir(e)}(e)))}orderByKey(){return(0,b.Dv)("Query.orderByKey",0,0,arguments.length),new iC(this.database,il(this._delegate,new ii))}orderByPriority(){return(0,b.Dv)("Query.orderByPriority",0,0,arguments.length),new iC(this.database,il(this._delegate,new io))}orderByValue(){return(0,b.Dv)("Query.orderByValue",0,0,arguments.length),new iC(this.database,il(this._delegate,new is))}startAt(e=null,t){return(0,b.Dv)("Query.startAt",0,2,arguments.length),new iC(this.database,il(this._delegate,function(e=null,t){return re("startAt","key",t,!0),new r9(e,t)}(e,t)))}startAfter(e=null,t){return(0,b.Dv)("Query.startAfter",0,2,arguments.length),new iC(this.database,il(this._delegate,(re("startAfter","key",t,!0),new r7(e,t))))}endAt(e=null,t){return(0,b.Dv)("Query.endAt",0,2,arguments.length),new iC(this.database,il(this._delegate,(re("endAt","key",t,!0),new r5(e,t))))}endBefore(e=null,t){return(0,b.Dv)("Query.endBefore",0,2,arguments.length),new iC(this.database,il(this._delegate,(re("endBefore","key",t,!0),new r8(e,t))))}equalTo(e,t){return(0,b.Dv)("Query.equalTo",1,2,arguments.length),new iC(this.database,il(this._delegate,(re("equalTo","key",t,!0),new ia(e,t))))}toString(){return(0,b.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,b.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,b.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof iC))throw Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){let r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,b.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,b.lb)(e,"context",r.context,!0);else if(t){if("object"==typeof t&&null!==t)r.context=t;else if("function"==typeof t)r.cancel=t;else throw Error((0,b.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.")}return r}get ref(){return new iE(this.database,new rV(this._delegate._repo,this._delegate._path))}}class iE extends iC{constructor(e,t){super(e,new rU(t._repo,t._path,new tp,!1)),this.database=e,this._delegate=t}getKey(){return(0,b.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,b.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new iE(this.database,rQ(this._delegate,e))}getParent(){(0,b.Dv)("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new iE(this.database,e):null}getRoot(){return(0,b.Dv)("Reference.root",0,0,arguments.length),new iE(this.database,this._delegate.root)}set(e,t){(0,b.Dv)("Reference.set",1,2,arguments.length),(0,b.Wj)("Reference.set","onComplete",t,!0);let n=rG(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,b.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){let t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,iy("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}rr("Reference.update",this._delegate._path),(0,b.Wj)("Reference.update","onComplete",t,!0);let n=function(e,t){n9("update",t,e._path,!1);let n=new b.BH;return!function(e,t,n,r){rI(e,"update",{path:t.toString(),value:n});let i=!0,o=rf(e),s={};if(X(n,(n,r)=>{i=!1,s[n]=nV(ej(t,n),ti(r),e.serverSyncTree_,o)}),i)F("update() called with empty data.  Don't do anything."),rS(e,r,"ok",void 0);else{let i=rv(e),o=function(e,t,n,r){var i;i=e.pendingWriteTree_,(0,b.hu)(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:n,writeId:r,visible:!0}),i.visibleWrites=tK(i.visibleWrites,t,n),i.lastWriteId=r;let o=tB.fromObject(n);return nR(e,new tD(tk(),t,o))}(e.serverSyncTree_,t,s,i);rs(e.eventQueue_,o),e.server_.merge(t.toString(),n,(n,o)=>{let s="ok"===n;s||z("update at "+t+" failed: "+n);let a=nE(e.serverSyncTree_,i,!s),l=a.length>0?rT(e,t):t;rl(e.eventQueue_,l,a),rS(e,r,n,o)}),X(n,n=>{let r=rA(e,ej(t,n));rT(e,r)}),rl(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,b.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,b.Wj)("Reference.setWithPriority","onComplete",n,!0);let r=function(e,t,n){if(rr("setWithPriority",e._path),n6("setWithPriority",t,e._path,!1),n7("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";let r=new b.BH;return ry(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return n&&r.then(()=>n(null),e=>n(e)),r}remove(e){var t;(0,b.Dv)("Reference.remove",0,1,arguments.length),(0,b.Wj)("Reference.remove","onComplete",e,!0);let n=(rr("remove",(t=this._delegate)._path),rG(t,null));return e&&n.then(()=>e(null),t=>e(t)),n}transaction(e,t,n){(0,b.Dv)("Reference.transaction",1,3,arguments.length),(0,b.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,b.Wj)("Reference.transaction","onComplete",t,!0),i_("Reference.transaction","applyLocally",n,!0);let r=(function(e,t,n){var r;if(rr("Reference.transaction",(e=(0,b.m9)(e))._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";let i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new b.BH,s=(t,n,r)=>{let i=null;t?o.reject(t):(i=new rH(r,new rV(e._repo,e._path),e5),o.resolve(new im(n,i)))},a=rX(e,()=>{});return!function(e,t,n,r,i,o){rI(e,"transaction on "+t);let s={path:t,update:n,onComplete:r,status:null,order:N(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=rC(e,t,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(void 0===l)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{let n;n5("transaction failed: Data returned ",l,s.path),s.status=0;let r=nQ(e.transactionQueueTree_,t),i=nG(r)||[];if(i.push(s),nY(r,i),"object"==typeof l&&null!==l&&(0,b.r3)(l,".priority"))n=(0,b.DV)(l,".priority"),(0,b.hu)(n3(n),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{let r=nA(e.serverSyncTree_,t)||tn.EMPTY_NODE;n=r.getPriority().val()}let o=rf(e),u=ti(l,n),c=nH(u,a,o);s.currentOutputSnapshotRaw=u,s.currentOutputSnapshotResolved=c,s.currentWriteId=rv(e);let h=nC(e.serverSyncTree_,t,c,s.currentWriteId,s.applyLocally);rl(e.eventQueue_,t,h),rE(e,e.transactionQueueTree_)}}(e._repo,e._path,t,s,a,i),o.promise})(this._delegate,e,{applyLocally:n}).then(e=>new iI(e.committed,new iS(this.database,e.snapshot)));return t&&r.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),r}setPriority(e,t){(0,b.Dv)("Reference.setPriority",1,2,arguments.length),(0,b.Wj)("Reference.setPriority","onComplete",t,!0);let n=function(e,t){rr("setPriority",(e=(0,b.m9)(e))._path),n7("setPriority",t,!1);let n=new b.BH;return ry(e._repo,ej(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,b.Dv)("Reference.push",0,2,arguments.length),(0,b.Wj)("Reference.push","onComplete",t,!0);let n=function(e,t){let n;rr("push",(e=(0,b.m9)(e))._path),n6("push",t,e._path,!0);let r=rd(e._repo),i=rL(r),o=rQ(e,i),s=rQ(e,i);return n=null!=t?rG(s,t).then(()=>s):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}(this._delegate,e),r=n.then(e=>new iE(this.database,e));t&&r.then(()=>t(null),e=>t(e));let i=new iE(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return rr("Reference.onDisconnect",this._delegate._path),new iw(new rq(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ip,forceLongPolling:ig}}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i,o;let s;(e=(0,b.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&W("Cannot call useEmulator() after instance has already been initialized.");let a=e._repoInternal;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&W('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new el(el.OWNER);else if(r.mockUserToken){let t="string"==typeof r.mockUserToken?r.mockUserToken:(0,b.Sg)(r.mockUserToken,e.app.options.projectId);s=new el(t)}i=a,o=s,i.repoInfo_=new ed(`${t}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),o&&(i.authTokenProvider_=o)}(this._delegate,e,t,n)}ref(e){if((0,b.Dv)("database.ref",0,1,arguments.length),e instanceof iE){let t=r$(this._delegate,e.toString());return new iE(this,t)}{let t=rK(this._delegate,e);return new iE(this,t)}}refFromURL(e){(0,b.Dv)("database.refFromURL",1,1,arguments.length);let t=r$(this._delegate,e);return new iE(this,t)}goOffline(){var e;return(0,b.Dv)("database.goOffline",0,0,arguments.length),e=this._delegate,void((e=(0,b.m9)(e))._checkNotDeleted("goOffline"),rw(e._repo))}goOnline(){var e,t;return(0,b.Dv)("database.goOnline",0,0,arguments.length),e=this._delegate,void((e=(0,b.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rc))}}iT.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:e=>({".sv":{increment:e}})};var ik=Object.freeze({__proto__:null,initStandalone:/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function({app:e,url:t,version:n,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){E=n;let s=new y.zt("auth-internal",new y.H0("database-standalone"));return s.setComponent(new y.wA("auth-internal",()=>r,"PRIVATE")),{instance:new iT(ic(e,s,void 0,t,o),e),namespace:i}}});/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iP=iT.ServerValue;(g=v.Z).INTERNAL.registerComponent(new y.wA("database-compat",(e,{instanceIdentifier:t})=>{let n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new iT(r,n)},"PUBLIC").setServiceProps({Reference:iE,Query:iC,Database:iT,DataSnapshot:iS,enableLogging:function(e,t){j(e,t)},INTERNAL:ik,ServerValue:iP}).setMultipleInstances(!0)),g.registerVersion("@firebase/database-compat","0.3.4")}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(6885)}),_N_E=e.O()}]);